var e=Object.defineProperty,t="",n='"',i=",",r="'",s=" ",o="\n";function a(e){switch(e){case"text":return"Plain Text";case"html":return"HTML";case"liquid":return"Liquid";case"xml":return"XML";case"json":return"JSON";case"jsx":return"JSX";case"tsx":return"TSX";case"typescript":return"TypeScript";case"javascript":return"JavaScript";case"less":return"LESS";case"scss":return"SCSS";case"sass":return"SASS";case"css":return"CSS"}}function l(e){switch(e){case"text":return"ignore";case"auto":return"auto";case"markup":case"html":case"liquid":case"xml":return"markup";case"json":case"jsx":case"tsx":case"typescript":case"javascript":return"script";case"less":case"scss":case"sass":case"css":return"style"}}function c(e){switch(e){case"auto":return 5;case"markup":case"html":case"liquid":case"xml":return 1;case"json":case"jsx":case"tsx":case"typescript":case"javascript":return 2;case"less":case"scss":case"sass":case"css":return 3}return 4}function u(e,t){let n={lexer:t,language:a(e),chars:0,time:""},i=Date.now();return e=>{let t=+(Date.now()-i).toFixed(0);return n.time=t>1e3?`${t}s`:`${t}ms`,n.chars=e,n}}function p(...e){return e.join(o)}function d(e,n=s){if(e<=0)return n;let i=t,r=1;do{i+=n}while(r++<e);return i}function h(e,t){return!!e&&e.charCodeAt(0)===t}function f(e,t){return h(e[e.length-1],t)}function g(e,t,n=2){return h(e[e.length-n],t)}function k(e,t){return!1===h(e,t)}function m(e,t){return!1===f(e,t)}function b(e){return/\s/.test(e)}function y(e){return/\d/.test(e)}function w(e){return`\\${e}`}var{toString:x}=Object.prototype;function v(e){return t=>t in e}function q(e){return"Array"===x.call(e).slice(8,-1)}function j(e){return"Object"===x.call(e).slice(8,-1)}function O(e){return"String"===x.call(e).slice(8,-1)}function $(e){return"Boolean"===x.call(e).slice(8,-1)}function S(e){return"Number"===x.call(e).slice(8,-1)}function _(e){return"Undefined"===x.call(e).slice(8,-1)}function A(e){let n=Be.count,i=Be.stack.index,r=0,s=0,o=0,a=0,l=0,c=0,u=0,p=!0,{count:d}=Be,f=Be.stack.token,g=Be.stack.index,m=Be.lineOffset,b="style"===e.lexer[d],y=b&&"global"===f,w=b?[";","separator"]:[",","separator"],x=[],v={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]};a=n;do{if(e.begin[n]===i||y&&n<a&&h(e.token[n],125)&&-1===e.begin[e.begin[n]]){if(e.types[n].indexOf("liquid")>-1)return;if(e.token[n]===w[0]||!0===b&&h(e.token[n],125)&&k(e.token[n+1],59)?(p=!0,l=n+1):!0===b&&h(e.token[n-1],125)&&(p=!0,l=n),0===l&&"comment"===e.types[0])do{l+=1}while("comment"===e.types[l]);else"comment"===e.types[l]&&e.lines[l]<2&&(l+=1);!0===p&&(e.token[n]===w[0]||!0===b&&h(e.token[n-1],125))&&l<=a&&((!0===b&&"};".indexOf(e.token[a])<0||!1===b&&k(e.token[a],44))&&(a+=1),x.push([l,a]),a=!0===b&&h(e.token[l],125)?l:l-1)}n-=1}while(n>i);if(x.length>0&&x[x.length-1][0]>n+1){if(r=x[x.length-1][0]-1,"comment"===e.types[r]&&e.lines[r]>1){do{r-=1}while(r>0&&"comment"===e.types[r]);x[x.length-1][0]=r+1}if("comment"===e.types[n+1]&&-1===n)do{n+=1}while("comment"===e.types[n+1]);x.push([n+1,r])}if(x.length>1&&(!0===b||"json"===Be.language||h(e.token[n-1],61)||h(e.token[n-1],58)||h(e.token[n-1],40)||h(e.token[n-1],91)||h(e.token[n-1],44)||"word"===e.types[n-1]||0===n)){x.sort((function(t,n){let i=t[0],r=n[0];if("comment"===e.types[i]){do{i+=1}while(i<d&&"comment"===e.types[i]);if(void 0===e.token[i])return 1}if("comment"===e.types[r]){do{r+=1}while(r<d&&"comment"===e.types[r]);if(void 0===e.token[r])return 1}if(!0===b){if(0===e.token[i].indexOf("@import")||0===e.token[r].indexOf("@import"))return i<r?-1:1;if(e.types[i]!==e.types[r]){if("function"===e.types[i])return 1;if("variable"===e.types[i])return-1;if("selector"===e.types[i])return 1;if("property"===e.types[i]&&"variable"!==e.types[r]||"mixin"===e.types[i]&&"property"!==e.types[r]&&"variable"!==e.types[r])return-1}}return e.token[i].toLowerCase()>e.token[r].toLowerCase()?1:-1})),u=x.length,p=!1,i=0;do{if(c=x[i][1],!0===b&&(o=c,"comment"===e.types[o]&&(o-=1),h(e.token[o],125)?(c+=1,w[0]="}",w[1]="end"):(w[0]=";",w[1]="separator")),r=x[i][0],!0===b&&"end"!==e.types[c-1]&&"comment"===e.types[c]&&"comment"!==e.types[c+1]&&i<u-1&&(c+=1),r<c)do{!1===b&&i===u-1&&r===c-2&&h(e.token[r],44)&&"script"===e.lexer[r]&&"comment"===e.types[r+1]||Be.push(v,{begin:e.begin[r],ender:e.begin[r],lexer:e.lexer[r],lines:e.lines[r],stack:e.stack[r],token:e.token[r],types:e.types[r]},t),s+=1,e.token[r]!==w[0]||!0!==b&&e.begin[r]!==e.begin[x[i][0]]?e.token[r]!==w[0]&&"comment"!==e.types[r]&&(p=!1):p=!0,r+=1}while(r<c);if(!1===p&&"x;"!==v.token[v.token.length-1]&&(!0===b||i<u-1)){if(r=v.types.length-1,"comment"===v.types[r])do{r-=1}while(r>0&&"comment"===v.types[r]);r+=1,Be.splice({data:v,howmany:0,index:r,record:{begin:g,stack:y?"global":f,ender:Be.count,lexer:v.lexer[r-1],lines:0,token:w[0],types:w[1]}}),s+=1}i+=1}while(i<u);Be.splice({data:e,howmany:s,index:n+1}),Be.lineOffset=m,Be.concat(e,v)}}function C(e,t,n){return!1===q(e)?e:"normal"===t?N.call({array:e,recursive:n},e):"descend"===t?T.call({recursive:n},e):L.call({recursive:n},e)}function I(e,t){let n=e,i=-1,{data:r}=Be,s=[],o=Be.stack.length<2?[-1]:[Be.stack[Be.stack.length-2][1]];do{n>0&&r.types[n].indexOf("attribute")>-1&&r.types[n].indexOf("end")<0&&r.types[n-1].indexOf("start")<0&&r.types[n-1].indexOf("attribute")<0&&"markup"===r.lexer[n]&&o.push(n-1),n>0&&r.types[n-1].indexOf("attribute")>-1&&r.types[n].indexOf("attribute")<0&&"markup"===r.lexer[o[o.length-1]]&&r.types[o[o.length-1]].indexOf("start")<0&&o.pop(),r.begin[n]!==o[o.length-1]&&(r.begin[n]=o.length>0?o[o.length-1]:-1),r.types[n].indexOf("else")>-1&&(o.length>0?o[o.length-1]=n:o.push(n)),r.types[n].indexOf("end")>-1&&o.pop(),r.types[n].indexOf("start")>-1&&o.push(n),n+=1}while(n<t);n=t;do{n-=1,r.types[n].indexOf("end")>-1&&(s.push(n),i+=1),r.ender[n]=i>-1?s[i]:-1,r.types[n].indexOf("start")>-1&&(s.pop(),i-=1)}while(n>e)}function L(e){let n=0,i=e.length,r=e,s=r.map((e=>e[1])),o=()=>{let e=0,t=r.length;if(e<t)do{!0===q(r[e])&&(r[e]=L.apply(this,r[e])),e+=1}while(e<t)},a=(l=t)=>{let c=n,u=0,p=0,d=0,h=[],f=r[n];if(c<i)do{r[c]<f?(f=r[c],h=[c]):r[c]===f&&h.push(c),c+=1}while(c<i);if(p=h.length,c=n,u=p+n,c<u)do{f[1]=s[c],r[h[d]]=r[c],r[c]=f,d+=1,c+=1}while(c<u);return n+=p,n<i?a():(!0===this.recursive&&o(),e=r),l};return a(),e}function T(e){let n=0,i=e.length,r=e,s=()=>{let e=r.length,t=0;if(t<e)do{q(r[t])&&(r[t]=T.apply(this,r[t])),t+=1}while(t<e)},o=(a="")=>{let l=n,c=0,u=0,p=0,d=r[n],h=[],f=t,g=typeof d;if(l<i)do{f=typeof r[l],r[l]>d||f>g?(d=r[l],h=[l]):r[l]===d&&h.push(l),l+=1}while(l<i);if(u=h.length,l=n,c=u+n,l<c)do{r[h[p]]=r[l],r[l]=d,p+=1,l+=1}while(l<c);return n+=u,n<i?o():(!0===this.recursive&&s(),e=r),a};return o(),e}function N(e){let t=e,n=[e[0]],i=()=>{let e=0,n=t.length;if(e<n)do{q(t[e])&&(t[e]=N.apply(this,t[e])),e+=1}while(e<n)},r=s=>{let o=0,a=[],l=t.length;if(o<l)do{t[o]!==s&&a.push(t[o]),o+=1}while(o<l);t=a,a.length>0?(n.push(a[0]),r(a[0])):(!0===this.recursive&&i(),e=t)};return r(this.array[0]),e}var P=function(){let e=function(e={units:["%","cap","ch","cm","deg","dpcm","dpi","dppx","em","ex","fr","grad","Hz","ic","in","kHz","lh","mm","ms","mS","pc","pt","px","Q","rad","rem","rlh","s","turn","vb","vh","vi","vmax","vmin","vw"],atrules:["@charset","@color-profile","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@supports"],webkit:{classes:["webkit-any","webkit-any-link*","webkit-autofill"],elements:["webkit-file-upload-button","webkit-inner-spin-button","webkit-input-placeholder","webkit-meter-bar","webkit-meter-even-less-good-value","webkit-meter-inner-element","webkit-meter-optimum-value","webkit-meter-suboptimum-value","webkit-outer-spin-button","webkit-progress-bar","webkit-progress-inner-element","webkit-progress-value","webkit-search-cancel-button","webkit-search-results-button","webkit-slider-runnable-track","webkit-slider-thumb"]},pseudo:{classes:["active","any-link","checked","default","defined","disabled","empty","enabled","first","first-child","first-of-type","fullscreen","focus","focus-visible","focus-within","host","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","modal","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","picture-in-picture","placeholder-shown","paused","playing","read-only","read-write","required","right","root","scope","target","valid","visited","where"],elements:["after","backdrop","before","cue","cue-region","first-letter","first-line","file-selector-button","marker","part","placeholder","selection","slotted"],functions:["after","before","first-letter","first-line","host","host-context","part","slotted","lang","not","nth-child","nth-col","nth-last-child","nth-last-of-type","nth-of-type","where"]}}){let t=new Set(e.units),n=new Set(e.atrules),i=new Set(e.pseudo.classes),r=new Set(e.pseudo.elements),s=new Set(e.pseudo.functions),o=new Set(e.webkit.elements),a=new Set(e.webkit.classes);return{get grammar(){return e},get units(){return t},get pseudoClasses(){return i},get pseudoElements(){return r},get pseudoFunctions(){return s},get webkitElements(){return o},get webkitClasses(){return a},atrules:e=>n.has(e.slice(0,e.indexOf("(")).trim()),extend(l){for(let c in l){if(q(l[c]))for(let i of l[c])"units"!==c||t.has(i)?"atrules"===c&&!n.has(i)&&(e[c].push(i),n.add(i)):(e[c].push(i),t.add(i));if("object"==typeof l[c])for(let t in l[c])if(q(l[c][t]))for(let n of l[c][t])"webkit"===c?"elements"===t?(e[c][t].push(n),o.add(n)):"classes"===t&&(e[c][t].push(n),a.add(n)):"pseudo"===c&&("elements"===t?(e[c][t].push(n),r.add(n)):"classes"===t?(e[c][t].push(n),i.add(n)):"functions"===t&&(e[c][t].push(n),s.add(n)))}}}}(),t=function(e={embedded:{schema:[{language:"json"}],style:[{language:"css"}],stylesheet:[{language:"css"},{language:"scss",argument:/['"]scss['"]/}],javascript:[{language:"javascript"}]},tags:["form","paginate","capture","case","comment","for","if","raw","tablerow","unless","schema","style","script","stylesheet","javascript"],control:["if","unless","case"],else:["else","elsif","when"],singletons:["include","layout","section","assign","liquid","break","continue","cycle","decrement","echo","increment","render"]}){let t=new Set(e.else),n=new Set(e.control),i=new Set(e.tags),r=new Set(e.singletons),s={};return o(e.embedded),{get grammar(){return e},get tags(){return i},get control(){return n},get else(){return t},get singleton(){return r},get embed(){return s},extend(s){for(let a in s)if(q(s[a]))for(let o of s[a])"tags"===a&&!1===i.has(o)?(e.tags.push(o),i.add(o)):"else"===a&&!1===t.has(o)?(e.else.push(o),t.add(o)):"control"===a&&n.has(o)?(e.control.push(o),n.add(o)):"singletons"===a&&!1===r.has(o)&&(e.singletons.push(o),r.add(o));else"embedded"===a&&"object"==typeof s[a]&&o(s[a])}};function o(e){for(let t in e)for(let{language:n,argument:i=null}of e[t])if(t in s||(s[t]={tag:t,language:n,args:new Map([[new Set,{tag:t,language:n}]])}),i)for(let[e]of s[t].args)if(null!==e)if(q(i))for(let t of i)e.has(t)||e.add(t);else{let t=new RegExp(i);if(e.size>0)for(let n of e)n instanceof RegExp&&n.source!==t.source&&e.add(t);else e.add(t)}}}(),n=function(e={keywords:["ActiveXObject","ArrayBuffer","AudioContext","Canvas","CustomAnimation","DOMParser","DataView","Date","Error","EvalError","FadeAnimation","FileReader","Flash","Float32Array","Float64Array","FormField","Frame","Generator","HotKey","Image","Iterator","Intl","Int16Array","Int32Array","Int8Array","InternalError","Loader","Map","MenuItem","MoveAnimation","Notification","ParallelArray","Point","Promise","Proxy","RangeError","Rectangle","ReferenceError","Reflect","RegExp","ResizeAnimation","RotateAnimation","Set","SQLite","ScrollBar","Set","Shadow","StopIteration","Symbol","SyntaxError","Text","TextArea","Timer","TypeError","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakSet","Web","Window","XMLHttpRequest"]}){let t=new Set(e.keywords);return{get grammar(){return e},get keywords(){return t},extend(n){for(let i in n)if(q(n[i]))for(let r of n[i])"keywords"===i&&!t.has(r)&&(e[i].push(r),t.add(r))}}}(),i=function(e={embedded:{script:[{language:"javascript"},{language:"json",attribute:{type:["application/json","application/ld+json"]}},{language:"jsx",attribute:{type:["text/jsx","application/jsx"]}}],style:[{language:"css"}]},voids:["area","base","br","col","command","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],tags:["a","abbr","acronym","address","applet","article","aside","audio","b","basefont","bdi","bdo","big","blockquote","body","button","canvas","caption","center","cite","code","colgroup","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","em","fieldset","figcaption","figure","figure","font","footer","form","frame","frameset","h1","h6","head","header","html","i","iframe","ins","isindex","kbd","label","legend","fieldset","li","main","map","mark","marquee","menu","meter","nav","noframes","frame","noscript","object","ol","optgroup","option","output","p","object","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","picture","video","audio","span","strike","strong","style","sub","summary","details","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","audio","video","tt","u","ul","var","video"]}){let t=new Set(e.tags),n=new Set(e.voids),i={};return r(e.embedded),{get grammar(){return e},get tags(){return t},get voids(){return n},get embed(){return i},extend(i){for(let s in i)if(q(i[s]))for(let r of i[s])"tags"===s&&!1===t.has(r)?(e.tags.push(r),t.add(r)):"voids"===s&&!1===n.has(r)&&(e.voids.push(r),n.add(r));else"embedded"===s&&"object"==typeof i[s]&&r(i[s])}};function r(e){for(let t in e){t in i||(i[t]={tag:t,attr:new Map});for(let{language:n,attribute:r}of e[t])if("language"in i[t]||(i[t].language=n),i[t].attr.has(n)||i[t].attr.set(n,{tag:t,language:n,attr:new Map}),r){let e=i[t].attr.get(n);for(let s in r){e.attr.has(s)||e.attr.set(s,{tag:t,language:n,attr:s,value:new Set});let o=i[t].attr.get(n).attr.get(s);if(q(r[s]))for(let e of r[s])o.value.has(e)||o.value.add(e);else{let e=new RegExp(r[s]);if(o.value.size>0)for(let t of o.value)t instanceof RegExp&&t.source!==e.source&&o.value.add(e);else o.value.add(e)}}}}}}(),r=function(e={tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]}){let t=new Set(e.tags);return{get grammar(){return e},get tags(){return t},extend(n){for(let i in n)if(q(n[i]))for(let r of n[i])"tags"===i&&!1===t.has(r)&&(e.tags.push(r),t.add(r))}}}();return{html:i,liquid:t,js:n,css:e,svg:r,extend(r){if("object"==typeof r)for(let s in r)"liquid"===s?t.extend(r.liquid):"html"===s?i.extend(r.html):"css"===s?e.extend(r.css):("js"===s||"svg"===s)&&n.extend(r.js);return{get html(){return i.grammar},get liquid(){return t.grammar},get js(){return n.grammar},get css(){return e.grammar},get svg(){return e.grammar}}}}}();function F(e,n=NaN,i){if(!1===O(e))return t;if(k(e,60)&&k(e,123))return i||e;if(h(e,60)){let t=e.search(/[\s>]/),i=e.slice(h(e[1],47)?2:1,t);return h(i,63)&&f(i,63)?"xml":isNaN(n)?i:i.slice(n)}let r=(h(e[2],45)?e.slice(3).trimStart():e.slice(2).trimStart()).split(/\s|-?[%}]}/).shift();return isNaN(n)?r:r.slice(n)}function z(e){return(t,n,i)=>{let r=e,s=e;return h(i[n-1],92)&&(r=t[0]),h(t[t.length-2],92)&&(s=t[t.length-1]),r+t.slice(1,-1)+s}}var E={version:"0.5.6-beta.1",env:"undefined"!=typeof process&&null!=process.versions?"node":"browser",lastUpdate:(new Date).toDateString(),cwd:null,reportStats:!0,editorConfig:!1,throwErrors:!0,globalThis:!0,persistRules:!0,logLevel:2,logColors:!0,resolveConfig:"package.json"};function M(e,t,n){n||(n=F(t));let i=J(e,n,Be.lineNumber);i.language=a(Be.language),Be.error=p(i.message,o,function(e=Be.lineNumber){let t=[],n=Be.source.split(o),i=e,r=`${i+1}`.length,s=i-1,a="";n.length>2&&(s=i-3),2===n.length&&(s=i-2);do{let e=`${s+1}`,o=r-e.length>0?` [90m${e} |`:`[90m${e} |`,l=n[s].trim();if(s>i)break;l?(s===i-1?0===l.length?t.push(`${" ".repeat(r+2)} ${B(a.length)}`):(t.push(`${o} [31m${l}[39m`),t.push(`${" ".repeat(r+2)} ${B(l.length)}`)):t.push(`${o} [90m${l||"␤"}`),s+=1,a=l):(t.push(`${o} [90m${l||"␤"}`),s+=1)}while(s<i);return t.join(o)}(),o,i.details,o,`Language: ${a(Be.language)} `,`Location: ${Be.lineNumber}:${Be.lineColumn}`,`Æsthetic: Parse Failed (Code: ${i})`)}function W(e,t,n){n||(n=F(t.token));let i=J(e,n,t.line);i.language=a(Be.language),Be.error=p(i.message,o,function(e){let t=e.line-Be.get(e.index).lines,n=0,i="",r=Be.source.split(o).slice(t,e.line),s=`${e.line+1}`.length,a=[],{indentSize:l,indentChar:c}=Be.rules;do{let o=`${t+1}`,u=s-o.length>0?` [90m${o} |`:`[90m${o} |`;if(i=r[n],0===n){if(_(r[n])){a.push(`${u} [31m${e.token}[39m`);break}i=r[n].trimStart(),a.push(`${u} [31m${i}[39m`)}else{let e=i.match(/^\s*/);null!==e&&e[0].length>l?(i=c.repeat(l)+i.trimStart(),a.push(`${u} [31m${i}[39m`)):a.push(`${u} [31m${i}[39m`)}n+=1,t+=1}while(n<r.length);return a.join(o)}(t),o,i.details,o,D(`Language: ${a(Be.language)}`),D(`Location: ${t.line}`),D(`Æsthetic: Parse Failed (Code: ${e})`))}function R(e){return p(`Rule Error: ${e.message}`,o,`Definition: ${e.option}`,`Provided: ${e.provided} `,`Expected: ${e.expected.join(", ")} `)}var B=e=>`[93m${"^".repeat(e)}[39m`;function D(...e){return E.logColors?`${e.join(o)}`.replace(/"(.*?)"/g,"[31m$1[39m"):e.join(o)}function J(e,t,n=Be.lineNumber){return{105:{code:e,message:D(`Syntax Error (line ${n}): Missing HTML "${t}" end tag`),details:D(`The "<${t}>" tag type has an incomplete HTML syntactic structure resulting in a parse error.`,`To resolve the issue check that you have a closing "</${t}>" tag. For more information`,"see: https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags")},112:{code:e,message:D(`Syntax Error (line ${n}): Missing Liquid "end${t}" tag`),details:D(`The Liquid "${t}" is a tag block type which requires an end tag be provided.`,"For more information, see: https://shopify.dev/api/liquid/tags")},104:{code:e,message:D(`Syntax Error (line ${n}): Missing HTML start "${t}" tag`),details:D("There is an incorrect placement or an incomplete structure resulting in a parse error.",`To resolve the issue, you may need to provide a start \`<${t}>\` tag type or correct the placement. `)},110:{code:e,message:D(`Syntax Error (line ${n}): Missing Liquid start "${t}" tag`),details:D("The Liquid tag has incorrect placement or an incomplete structure resulting in a parse error.","To resolve the issue, you may need to provide a start tag type or correct the placement. ")},111:{code:e,message:D(`Syntax Error (line ${n}): Missing Close Delimiter "%}" or "}}" on liquid tag`),details:D("The Liquid tag is missing its closing delimiter resulting in malformed syntax.")},106:{code:e,message:D(`Syntax Error (line ${n}): Missing HTML ">" delimiter on end tag`),details:D("The HTML tag is missing its closing delimiter resulting in malformed syntax.",'You can have Esthetic autofix syntax errors like this by setting the markup rule "correct" to true.')},107:{code:e,message:D(`Illegal Syntax (line ${n}): Invalid HTML Comment Attribute`),details:D("HTML comments are not allowed inside tags, start or end, at all.","To resolve the issue, remove the comment or place it above the tag.","For more information see: https://html.spec.whatwg.org/multipage/syntax.html#start-tags")},103:{code:e,message:D(`Syntax Error (line ${n}): Invalid quotation character`),details:D("Bad quotation character (“, &#x201c) provided. Only single ' or double \"","quotations characters are valid in HTML (markup) languages. For more information see:","https://html.spec.whatwg.org/multipage/parsing.html#attribute-value-(double-quoted)-state")},108:{code:e,message:D(`Syntax Error (line ${n}): Invalid CDATA Termination Sequence`),details:D("The CDATA bracket state sequence provided is invalid resulting in a parse error.","For more information see: https://html.spec.whatwg.org/multipage/parsing.html#cdata-section-bracket-state")},114:{code:e,message:D(`Syntax Error (line ${n}): Invalid character sequence in "${t}" token`),details:D("An invalid sequence of characters defined")},101:{code:e,message:D(`Syntax Error (line ${n}): Unterminated String`),details:D("There is an unterminated string sequence resulting in a parse error.")}}[e]}var V=/\S/,H=/^\s+$/,Z=/\s+/g,U=/^\s+/,G=/\s+$/,X=/^[\t\v\f\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/,Q=/[\t\v\f \u00a0\u2000-\u200b\u2028-\u2029\u3000]+$/,Y=/[\t\v\r \u00a0\u2000-\u200b\u2028-\u2029\u3000]+/g,K=/^\n+/,ee=/({%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-(start|next|end)\b/,te=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!-{2})\s*esthetic-ignore-start\b/,ne=/^\/\/\s*esthetic-ignore-start\b/,ie=/^\/\*{1,2}(?:\s*|\n\s*\*\s*)esthetic-ignore-start\b/,re=/(\/[*/]|{%-?\s*(?:comment\s*-?%}|#)|<!--)\s*esthetic-ignore-next\b/,se=/^\s*[*-]\s/,oe=/^\s*\d+\.\s/,ae=/^\s*(?:[*-]|\d+\.)\s/,le=/^<!--+/,ce=/--+>$/,ue=/{%-?|-?%}/g,pe=/^{%-?\s*#/,de=/(\/|\\|\||\*|\[|\]|\{|\})/g;function he(e){let{rules:n}=Be,i=[],r=[],a=e.begin.replace(de,w),l=h(e.begin[0],123)&&h(e.begin[1],37),c=!1!==l&&35===e.chars.slice(e.start+2,e.chars.indexOf("%}",e.start+2)).join(t).trimStart().charCodeAt(0),u=new RegExp(`^(${a}\\s*esthetic-ignore-start)`),p=new RegExp(`(${a}\\s*)`),d=l?new RegExp(`\\s*${e.ender.replace(ue,(e=>h(e,123)?"{%-?\\s*":"\\s*-?%}"))}$`):new RegExp(e.ender.replace(de,w)),f=e.start,g=0,m=0,y=0,x=[],v=0,q=t,j=!1,O=!1,$=!1,S=t,_=e.ender.length-1,A=e.ender.charAt(_),C=0;function I(){if(H.test(x[g+1])||x[g+1]===t)do{g+=1}while(g<v&&(H.test(x[g+1])||x[g+1]===t));g<v-1&&r.push(t)}do{if(i.push(e.chars[f]),h(e.chars[f],10)&&(Be.lineOffset=Be.lines(f,Be.lineOffset)),e.chars[f]===A&&e.chars.slice(f-_,f+1).join(t)===e.ender)break;f+=1}while(f<e.end);if(S=i.join(t),!0===u.test(S))return function(){let n=o;f+=1;do{if(i.push(e.chars[f]),"esthetic-ignore-end"===i.slice(i.length-19).join(t)){if(l){let n=e.chars.indexOf("{",f);if(h(e.chars[n+1],37)){let i=e.chars.slice(n,e.chars.indexOf("}",n+1)+1).join(t);d.test(i)&&(e.ender=i)}}f+=1;break}f+=1}while(f<e.end);g=f,_=e.begin.length-1,A=e.begin.charAt(_);do{if("/*"===e.begin&&h(e.chars[g-1],47)&&(h(e.chars[g],42)||h(e.chars[g],47))||"/*"!==e.begin&&e.chars[g]===A&&e.chars.slice(g-_,g+1).join(t)===e.begin)break;g-=1}while(g>e.start);if("/*"===e.begin&&h(e.chars[g],42)?n="*/":"/*"!==e.begin&&(n=e.ender),_=n.length-1,A=n.charAt(_),n!==o||e.chars[f]!==o)do{if(i.push(e.chars[f]),n===o&&e.chars[f+1]===o||e.chars[f]===A&&e.chars.slice(f-_,f+1).join(t)===n)break;f+=1}while(f<e.end);return e.chars[f]===o&&(f-=1),S=i.join(t).replace(Q,t),[S,f]}();if(!0===l&&n.liquid.preserveComment||!1===l&&n.markup.preserveComment||"style"===Be.lexer&&n.style.preserveComment||"script"===Be.lexer&&n.style.preserveComment||n.wrap<1&&!1===/comment\s*%}\n/.test(S)||f===e.end||S.length<=n.wrap&&S.indexOf(o)<0||"/*"===e.begin&&S.indexOf(o)>0&&S.replace(o,t).indexOf(o)>0&&!1===/\n(?!\s*\*)/.test(S)){if(c){x=S.replace(/\r\n/g,o).split(o);for(let e=1,t=x.length-1;e<t;e++)k(x[e].trimStart(),35)&&""!==x[e].trimStart()&&(x[e]="# "+x[e].trimStart());return[x.join(Be.crlf),f]}return[S,f]}if(g=e.start,g>0&&k(e.chars[g-1],10)&&b(e.chars[g-1]))do{g-=1}while(g>0&&k(e.chars[g-1],10)&&b(e.chars[g-1]));let L=e.chars.slice(g,e.start).join(t),T=new RegExp(o+L,"g");x=S.replace(/\r\n/g,o).replace(T,o).split(o),v=x.length,x[0]=x[0].replace(p,t),x[v-1]=x[v-1].replace(d,t),v<2&&(x=x[0].split(s)),x[0]===t?x[0]=e.begin:x.splice(0,0,e.begin),v=x.length;let N=t,P=v-1;for(;P--&&x[P]===t;)N+=o;N!==t&&(N=N.slice(0,n.preserveLine)),g=0;do{if(q=g<v-1?x[g+1].replace(X,t):t,!0===H.test(x[g])||x[g]===t)I();else{let i=x[g].replace(X,t);if(n.wrap>0&&i.length>n.wrap&&i.indexOf(s)>n.wrap)x[g]=i,m=x[g].indexOf(s),r.push(x[g].slice(0,m)),x[g]=x[g].slice(m+1),g-=1;else{if(C=g<1?n.wrap-(e.begin.length+1):n.wrap,"/*"===e.begin&&0!==x[g].indexOf("/*")?x[g]="   ":x[g]=x[g].replace(X,t).replace(Q,t).replace(Z,s),y=x[g].replace(X,t).indexOf(s),m=x[g].length,m>C&&y>0&&y<C){m=C;do{if(m-=1,b(x[g].charAt(m))&&m<=n.wrap)break}while(m>0);oe.test(x[g])&&!1===oe.test(x[g+1])&&x.splice(g+1,0,"1. "),!0===H.test(x[g+1])||x[g+1]===t?(r.push(x[g].slice(0,m)),x[g]=x[g].slice(m+1),j=!0,g-=1):se.test(x[g+1])?(r.push(x[g].slice(0,m)),x[g]=x[g].slice(m+1),O=!0,g-=1):oe.test(x[g+1])?(r.push(x[g].slice(0,m)),x[g]=x[g].slice(m+1),$=!0,g-=1):x[g].replace(X,t).indexOf(s)<n.wrap&&(x[g].length>n.wrap?x[g+1]=x[g].slice(m+1)+Be.crlf+x[g+1]:x[g+1]=x[g].slice(m+1)+s+x[g+1]),!1===j&&!1===O&&!1===$&&(x[g]=x[g].slice(0,m))}else void 0!==x[g+1]&&(x[g].length+q.indexOf(s)>n.wrap&&q.indexOf(s)>0||x[g].length+q.length>n.wrap&&q.indexOf(s)<0)?(r.push(x[g]),0!==n.wrap&&(g+=1),j=!0):g>0&&void 0!==x[g+1]&&x[g+1]!==t&&x[g+1].indexOf(s)<0&&!1===H.test(x[g+1])&&!1===ae.test(x[g+1])?(x[g+1]=`${x[g]} ${x[g+1]}`,j=!0):(r.push(x[g]),j=!0);O=!1,$=!1}}g+=1}while(g<v);if(r.length>0){if(r[r.length-1].length>n.wrap-(e.ender.length+1)?r.push(e.ender):r.push(N+e.ender),c)for(let e=1,t=r.length-1;e<t;e++)k(r[e],35)&&""!==r[e]&&(r[e]="# "+r[e]);S=r.join(Be.crlf)}else x[x.length-1]=x[x.length-1]+e.ender,S=x.join(Be.crlf);return[S,f]}function fe(e){let{wrap:n}=Be.rules,{preserveComment:i}=Be.rules[Be.lexer],r=e.start,a=0,l=t,c=[];do{c.push(e.chars[r]),r+=1}while(r<e.end&&k(e.chars[r],10));if(r===e.end?e.chars.push(o):r-=1,l=c.join(t).replace(G,t),!0===ne.test(l)){let n=o;r+=1;do{c.push(e.chars[r]),r+=1}while(r<e.end&&(k(e.chars[r-1],100)||h(e.chars[r-1],100)&&"esthetic-ignore-end"!==c.slice(c.length-19).join(t)));a=r;do{}while(a>e.start&&h(e.chars[a-1],47)&&(h(e.chars[a],42)||h(e.chars[a],47)));if(h(e.chars[a],42)&&(n="*/"),n!==o||k(e.chars[r],10))do{if(c.push(e.chars[r]),n===o&&h(e.chars[r+1],10))break;r+=1}while(r<e.end&&(n===o||"*/"===n&&(h(e.chars[r-1],42)||h(e.chars[r],47))));return e.chars[r]===o&&(r-=1),l=c.join(t).replace(G,t),[l,r]}return"//"===l||!0===i||(l=l.replace(/(\/\/\s*)/,"// "),n<1||r===e.end-1&&Be.data.begin[Be.count]<1||(a=r+1,function n(){let i=t;do{if(a+=1,h(e.chars[a+1],10))return}while(a<e.end&&b(e.chars[a]));if(e.chars[a]+e.chars[a+1]==="//"){c=[];do{c.push(e.chars[a]),a+=1}while(a<e.end&&k(e.chars[a],10));i=c.join(t),!1===/^\/\/ (?:[*-]|\d+\.)/.test(i)&&!1===/^\/\/\s*$/.test(i)&&(l=`${l} ${i.replace(/(^\/\/\s*)/,t).replace(G,t)}`,r=a-1,n())}}(),function(){let i=[],r={ender:-1,types:"comment",lexer:e.lexer,lines:Be.lineOffset};Be.count>-1?(r.begin=Be.stack.index,r.stack=Be.stack.token,r.token=Be.data.token[Be.count]):(r.begin=-1,r.stack="global",r.token=t);let o=0,a=0;if(l=l.replace(/\s+/g,s).replace(G,t),a=l.length,!(n>a)){do{if(o=n,k(l[o],32)){do{o-=1}while(o>0&&k(l[o],32));if(o<3){o=n;do{o+=1}while(o<a-1&&k(l[o],32))}}i.push(l.slice(0,o)),l=`// ${l.slice(o).replace(U,t)}`,a=l.length}while(n<a);o=0,a=i.length;do{r.token=i[o],Be.push(Be.data,r,t),r.lines=2,Be.lineOffset=2,o+=1}while(o<a)}}())),[l,r]}var ge=Object.assign,ke=Object.defineProperty,me={global:{preset:{description:"Use preset style guide as the base defaults",default:"default",type:"choice",values:[{rule:"default",description:"This is the default and the most unobtrusive."},{rule:"recommended",description:"This style guide is typically suited for most cases"},{rule:"strict",description:"This is a strict ruleset curated by the projects author."},{rule:"warrington",description:"This style guide preset is best suited for Shopify theme developers"},{rule:"prettier",description:"This preset replicates the Prettier style"}]},correct:{default:!1,description:"Automatically correct some sloppiness in code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},crlf:{description:"If line termination should be Windows (CRLF) format. Unix (LF) format is the default.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},endNewline:{description:"Insert an empty line at the end of output.",type:"boolean",default:!1,preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},indentSize:{description:"The number of character values to comprise a single indentation.",type:"number",default:2,preset:{default:2,prettier:2,recommended:2,strict:2,warrington:2}},indentChar:{description:"The string characters to comprise a single indentation. Any string combination is accepted.",type:"string",default:" ",preset:{default:" ",prettier:" ",recommended:" ",strict:" ",warrington:" "}},indentLevel:{default:0,type:"number",description:"How much indentation padding should be applied to beautification? This is typically used internally",preset:{default:0,prettier:0,recommended:0,strict:0,warrington:0}},language:{description:"The language name",type:"choice",default:"auto",values:[{rule:"auto",description:"Detect Language"},{rule:"text",description:"Plain Text"},{rule:"html",description:"HTML"},{rule:"liquid",description:"HTML + Liquid"},{rule:"javascript",description:"JavaScript"},{rule:"jsx",description:"JSX"},{rule:"typescript",description:"TypeScript"},{rule:"tsx",description:"TSX"},{rule:"json",description:"JSON"},{rule:"css",description:"CSS"},{rule:"scss",description:"SCSS"},{rule:"less",description:"LESS"},{rule:"xml",description:"XML"}]},preserveLine:{default:2,description:"The maximum number of consecutive empty lines to retain.",type:"number",preset:{default:2,prettier:2,recommended:3,strict:1,warrington:3}},wrap:{default:0,description:"Character width limit before applying word wrap. A 0 value disables this option. A negative value concatenates script strings.",type:"number",preset:{default:0,prettier:80,recommended:120,strict:0,warrington:100}},wrapFraction:{default:0,description:"Wrap fraction is used on internal structures as a secondary point of control. By default, it will use a 75% metric according to `wrap` defined values.",type:"number",preset:{default:0,prettier:80,recommended:80,strict:80,warrington:0}}},liquid:{commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},delimiterTrims:{default:"preserve",description:"How delimiter whitespace trim dashes should handled on Liquid tokens. You should avoid setting this to force in order to avoid stripping whitespace between text content.",type:"choice",values:[{rule:"preserve",description:"All trim dash occurances of trims intact"},{rule:"never",description:"Removes all trim dash occurances for tags and output tokens"},{rule:"always",description:"Applies trime dashes to all tags and output tokens"},{rule:"tags",description:"Applies trim dashes to tags tokens only"},{rule:"outputs",description:"Applies trim dashes to output object tokens only"},{rule:"multiline",description:"Applies trim dashes to multline token expressions only"}],preset:{default:"preserve",prettier:"preserve",recommended:"preserve",strict:"multiline",warrington:"preserve"}},ignoreTagList:{default:[],description:"A list of liquid tag to ignore",type:"array",preset:{default:[],prettier:["javascript","capture"],recommended:["javascript"],strict:[],warrington:[]}},indentAttribute:{default:!1,description:"Whether or not markup tags with Liquid contained attributes should apply indentation",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!1,warrington:!0}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},normalizeSpacing:{default:!0,description:"Whether or not to normalize the distributed spacing contained in Liquid tokens.",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!0,warrington:!0}},lineBreakSeparator:{default:"default",description:"Controls the placement of Liquid tag separator type characters in newline structures.",type:"choice",values:[{rule:"preserve",description:"Leave line break character intace"},{rule:"before",description:"Place line break character at the start of expressions"},{rule:"after",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"after",recommended:"before",strict:"before",warrington:"after"}},dedentTagList:{default:[],description:"List of tags which will have their inner contents excluded from indentation",type:"array",preset:{default:[],prettier:["schema"],recommended:[],strict:[],warrington:[]}},forceArgument:{default:0,description:"Forces arguments onto newlines. When this value is `0` then arguments will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:3,strict:3,warrington:0}},forceFilter:{default:0,description:"Forces filter pipes onto newlines. When this value is `0` then filters will be forced according to wrap fraction limit.",type:"number",preset:{default:0,prettier:0,recommended:5,strict:4,warrington:0}},delimiterPlacement:{default:"preserve",description:"Controls the placement of Liquid delimiters",type:"choice",values:[{rule:"preserve",description:"Preserve delimiters"},{rule:"default",description:"Use defaults"},{rule:"consistent",description:"Place line break character at the start of expressions"},{rule:"inline",description:"Place line break character at the end of expressions"},{rule:"force-inline",description:"Place line break character at the end of expressions"},{rule:"force-multiline",description:"Place line break character at the end of expressions"}],preset:{default:"preserve",prettier:"default",recommended:"consistent",strict:"force-multiline",warrington:"consistent"}},preserveInternal:{default:!1,description:"Whether or not to preserve the inner contents of tokens",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"single",strict:"single",warrington:"single"}}},markup:{attributeSort:{default:!1,description:"Alphanumerically sort markup attributes. Attribute sorting is ignored on tags that contain attributes template attributes.",type:{array:"A list of attributes to begin sorting order with",boolean:"Whether or not to apply alphanumeric sorting"},preset:{default:!1,prettier:!1,recommended:!0,strict:["id","class","type","name","value"],warrington:!1}},attributeCasing:{default:"preserve",description:"Controls the casing of attribute values and keys.",type:"choice",values:[{rule:"preserve",description:"All tag attribute keys/values are preserved and left intact."},{rule:"lowercase",description:"All tag attribute keys/values are converted to lowercase"},{rule:"lowercase-name",description:"Only attribute keys are converted to lowercase"},{rule:"lowercase-value",description:"Only attribute values are converted to lowercase"}],preset:{default:"preserve",prettier:"preserve",recommended:"lowercase-name",strict:"lowercase-name",warrington:"preserve"}},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!1}},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},delimiterTerminus:{description:"Whether or not ending HTML tag delimiters should be forced onto a newline. This will emulate the style of Prettier's singleAttributePerLine formatting option, wherein the last > delimiter character breaks itself onto a new line",default:"inline",type:"choice",values:[{rule:"inline",description:"Inline the ending delimiter"},{rule:"force",description:"Force the ending delimiter onto its own line"},{rule:"adapt",description:"adapt the delimiter in accordance with structure"}],preset:{default:"inline",prettier:"force",recommended:"adapt",strict:"adapt",warrington:"adapt"}},forceAttribute:{default:!1,description:"If all markup attributes should be indented each onto their own line. This option accepts either a boolean or number value, depending on your preferences you can either force attributes based a count limit, disable forcing or always enable enforcing.",type:{number:"Optionally define an attribute force threshold. When the number of attributes exceeds this limit then they will be forced, otherwise they will be left intact.",boolean:"Whether or not to enforce the rule. A value of true will always force attributes, whereas a value of false will never force attributes."},preset:{default:!1,prettier:1,recommended:2,strict:2,warrington:2}},forceIndent:{default:!1,description:"Will force indentation upon all content and tags without regard for the creation of new text nodes.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!0}},ignoreJS:{default:!0,description:"Whether to ignore embedded regions of tags identified to contain JavaScript",type:"boolean",preset:{default:!0,prettier:!0,recommended:!0,strict:!1,warrington:!1}},ignoreCSS:{default:!1,description:"Whether to ignore embedded regions of tags identified to contain CSS",type:"boolean",preset:{default:!1,prettier:!0,recommended:!1,strict:!1,warrington:!1}},ignoreJSON:{default:!1,description:"Whether HTML <script> tags annotated with a JSON identifiable attribute should be ignored from beautification.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveAttribute:{default:!1,description:"If markup tags should have their insides preserved. This option is only available to markup and does not support child tokens that require a different lexer.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},preserveText:{default:!1,description:"If text in the provided markup code should be preserved exactly as provided. This option eliminates beautification and wrapping of text content.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},lineBreakValue:{default:"preserve",description:"Determines how Æsthetic should handle line break occurance sequences within attribute values",type:"choice",values:[{rule:"preserve",description:"Preserve the supplied value structure sequences"},{rule:"align",description:"Align all line breaks to the starting point of attribute name"},{rule:"indent",description:"Indent all line breaks from the starting point of attribute name"},{rule:"force-preserve",description:"Force encapsulated values onto newlines but preserve inner contents"},{rule:"force-align",description:"Force encapsulated values onto newlines and apply aligned formatting"},{rule:"force-indent",description:"Force encapsulated values onto newlines and apply indentation formatting"}],preset:{default:"preserve",prettier:"indent",recommended:"force-indent",strict:"force-indent",warrington:"force-indent"}},selfCloseSpace:{default:!1,description:'Markup self-closing tags end will end with " />" instead of "/>".',type:"boolean",preset:{default:!1,prettier:!1,recommended:!1,strict:!1,warrington:!1}},selfCloseSVG:{default:!0,description:"Whether or not SVG type tags should be converted to self closing void types.",type:"boolean",preset:{default:!1,prettier:!1,recommended:!0,strict:!0,warrington:!0}},stripAttributeLines:{default:!1,description:"Whether or not newlines contained within tag attributes should be removed or preserved.",type:"boolean",preset:{default:!1,prettier:!0,recommended:!0,strict:!0,warrington:!1}},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}],preset:{default:"none",prettier:"double",recommended:"double",strict:"double",warrington:"double"}}},style:{classPadding:{description:"Inserts new line characters between every CSS code block.",default:!1,type:"boolean"},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},sortSelectors:{default:!1,type:"boolean",description:"If comma separated CSS selectors should present on a single line of code."},sortProperties:{description:"This option will alphabetically sort CSS properties contained within classes.",default:!1,type:"boolean"},noLeadZero:{description:"This will eliminate leading zeros from numbers expressed within values.",default:!1,type:"boolean"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},atRuleSpace:{default:!0,description:"Insert a single whitespace character betwen @ rules.",type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]}},json:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"}},script:{arrayFormat:{description:"Determines if all array indexes should be indented, never indented, or left to the default",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},braceAllman:{default:!1,description:'Determines if opening curly braces will exist on the same line as their condition or be forced onto a new line, otherwise known as "Allman Style" indentation.',type:"boolean"},bracePadding:{default:!1,description:"This will create a newline before and after objects values",type:"boolean"},braceNewline:{default:!1,description:"If true an empty line will be inserted after opening curly braces and before closing curly braces.",type:"boolean"},braceStyle:{default:"none",description:"Emulates JSBeautify's brace_style option using existing Prettify options",type:"choice",values:[{rule:"none",description:"Ignores this option"},{rule:"collapse",description:"Sets formatObject to indent and neverflatten to true."},{rule:"collapse-preserve-inline",description:"Sets formatObject to inline and bracePadding to true"},{rule:"expand",description:"Sets objectIndent to indent and braceNewline + neverflatten to true."}]},caseSpace:{default:!1,type:"boolean",description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation thereby keeping the case on a single line of code."},commentNewline:{default:!1,description:"If a blank new line should be forced above comments.",type:"boolean"},commentIndent:{default:!1,description:"This will determine whether comments should always start at position 0 of each line or if comments should be indented according to the code.",type:"boolean"},elseNewline:{default:!1,type:"boolean",description:'If keyword "else" is forced onto a new line.'},endComma:{description:"If there should be a trailing comma in arrays and objects.",type:"choice",default:"none",values:[{rule:"none",description:"Ignore this option"},{rule:"always",description:"Always ensure there is a tailing comma"},{rule:"never",description:"Remove trailing commas"}]},objectSort:{default:!1,description:"This option will alphabetically sort object properties in JSON objects",type:"boolean"},objectIndent:{description:"This option will alphabetically sort object properties in JSON objects",type:"choice",default:"default",values:[{rule:"default",description:"Default formatting"},{rule:"indent",description:"Always indent each index of an array"},{rule:"inline",description:"Ensure all array indexes appear on a single line"}]},functionSpace:{default:!0,type:"boolean",description:"Inserts a space following the function keyword for anonymous functions."},functionNameSpace:{default:!0,type:"boolean",description:"If a space should follow a JavaScript function name."},methodChain:{default:-1,description:"When to break consecutively chained methods and properties onto separate lines. A negative value disables this option. A value of 0 ensures method chainsare never broken.",type:"number"},preserveComment:{default:!1,description:"Prevent comment reformatting due to option wrap.",type:"boolean"},ternaryLine:{description:"If ternary operators in JavaScript `?` and `:` should remain on the same line.",type:"boolean",default:!1},neverFlatten:{default:!0,description:"If destructured lists in script should never be flattend.",type:"boolean"},noCaseIndent:{description:"If the colon separating a case's expression (of a switch/case block) from its statement should be followed by a space instead of indentation, thereby keeping the case on a single line of code.",default:!1,type:"boolean"},noSemicolon:{description:"Removes semicolons that would be inserted by ASI. This option is in conflict with option `attemptCorrection` and takes precedence over conflicting features. Use of this option is a possible security/stability risk.",default:!1,type:"boolean"},quoteConvert:{description:"If the quotes should be converted to single quotes or double quotes.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"single",description:"Converts double quotes to single quotes"},{rule:"double",description:"Converts single quotes to double quotes"}]},variableList:{description:"If consecutive JavaScript variables should be merged into a comma separated list or if variables in a list should be separated. each — Ensure each reference is a single declaration statement.",type:"choice",default:"none",values:[{rule:"none",description:"Ignores this option"},{rule:"each",description:"Ensure each reference is a single declaration statement"},{rule:"list",description:"Ensure consecutive declarations are a comma separated list"}]},vertical:{description:"If lists of assignments and properties should be vertically aligned",type:"boolean",default:!1}}};function be(e,t,n){if("html"===t){if(!(e in P.html.embed))return!1;let t=P.html.embed[e];if(t.attr.size>0)for(let e of t.attr.values()){if(!n)return e;if(e.attr.has(n[0])&&e.attr.get(n[0]).value.has(n[1]))return e.attr.get(n[0])}return t.attr.has(n[0])?t.attr.get(n[0]).attr.has(n[1])?t.attr.get(n[0]).attr.get(n[1]):t.attr.get(n[0]):t}if("liquid"===t){if(!(e in P.liquid.embed))return!1;let t=P.liquid.embed[e];if(t.args.size>0&&n){let i=n.slice(n.indexOf(e)+e.length).match(/\s*(.*)(?=\s)/)[0];for(let[e,n]of t.args){if(e.has(i))return n;for(let t of e)if(t instanceof RegExp&&t.test(i))return n}}return t}}function ye(e,t){let n,i=h(e[2],45)?3:2,r=e.slice(i);return n="never"===t.delimiterTrims?`{${e[1]}`:"always"===t.delimiterTrims||"outputs"===t.delimiterTrims&&h(e[1],123)||"tags"===t.delimiterTrims&&h(e[1],37)?`{${e[1]}-`:e.slice(0,i),"preserve"===t.delimiterPlacement?n+=/^\s*\n/.test(r)?o:s:"force"===t.delimiterPlacement?n+=o:"inline"===t.delimiterPlacement||"default"===t.delimiterPlacement||"force-multiline"===t.delimiterPlacement?n+=s:"consistent"===t.delimiterPlacement&&(/^\s*\n/.test(r)?n+=o:n+=s),n+r.trim()}function we(e,n){let i,r=h(e[e.length-3],45)?e.length-3:e.length-2,a=e.slice(0,r)||t;return i="never"===n.delimiterTrims?`${e[e.length-2]}}`:"always"===n.delimiterTrims||"outputs"===n.delimiterTrims&&h(e[1],123)||"tags"===n.delimiterTrims&&h(e[1],37)?`-${e[e.length-2]}}`:e.slice(r),"preserve"===n.delimiterPlacement?i=(/\s*\n\s*$/.test(a)?o:s)+i:"force"===n.delimiterPlacement?i=o+i:"inline"===n.delimiterPlacement||"default"===n.delimiterPlacement||"force-multiline"===n.delimiterPlacement?i=s+i:"consistent"===n.delimiterPlacement&&(i=/^\s*\n/.test(a)?o+i:s+i),a.trim()+i}function xe(e,t,n){let i,r,[a,l]=ve(e),c=e.slice(a,l);return"never"===n.delimiterTrims?(i=`{${e[1]}`,r=`${e[e.length-2]}}`):"always"===n.delimiterTrims||"outputs"===n.delimiterTrims&&h(e[1],123)||"tags"===n.delimiterTrims&&h(e[1],37)?(i=`{${e[1]}-`,r=`-${e[e.length-2]}}`):(i=e.slice(0,a),r=e.slice(l)),t||(t=c.trimStart().split(/\s/)[0]||""),"else"===t||"break"===t||"continue"===t||"increment"===t||"decrement"===t||t.startsWith("end")?(i+=s,r=s+r):"preserve"===n.delimiterPlacement?(i+=/^\s*\n/.test(c)?o:s,r=(/\s*\n\s*$/.test(c)?o:s)+r):"force"===n.delimiterPlacement?(i+=o,r=o+r):"inline"===n.delimiterPlacement||"default"===n.delimiterPlacement||"force-multiline"===n.delimiterPlacement?(i+=s,r=s+r):"consistent"===n.delimiterPlacement&&(/^\s*\n/.test(c)?(i+=o,r=o+r):(i+=s,r=s+r)),c=c.trim(),i+c+r}function ve(e){return[h(e[2],45)?3:2,h(e[e.length-3],45)?e.length-3:e.length-2]}function qe(e,t=!0){return t?new RegExp(`{%-?\\s*${e}\\s*-?%}`):new RegExp(`{%-?\\s*${e}`)}function je(e){let t=e.indexOf("{");return h(e[t+1],123)}function Oe(e){let t=e.indexOf("{");if(h(e[t+1],37)){let n;return n=e.slice(t+(h(e[t+2],45)?3:2)).trimStart(),n=n.slice(0,n.search(/[\s=|!<>,.[]|-?[%}]}/)),!n.startsWith("end")&&P.liquid.else.has(n)}return!1}function $e(e){let t=e.indexOf("=");return!!(t>-1&&(h(e[t+1],34)||h(e[t+1],39)))&&/{%-?\s*end[a-z]+/.test(e.slice(t,e.lastIndexOf(e[t+1])))}function Se(e){return!!_e(e)&&/{%-?\s*end\w+/.test(e)}function _e(e,t=!1){let n;if(t)return!!(h(e[0],123)&&h(e[1],37)&&h(e[e.length-2],37)&&h(e[e.length-1],125))&&(n=e.slice(h(e[2],45)?3:2).trimStart(),!h(n,34)&&!h(n,39)&&(n=n.slice(0,n.search(/[\s=|!<"'>,.[]|-?[%}]}/)),!n.startsWith("end")&&P.liquid.tags.has(n)));let i=e.indexOf("{");if(-1===i)return!1;do{if(h(e[i+1],37))return n=e.slice(i+(h(e[i+2],45)?3:2)).trimStart(),n=n.slice(0,n.search(/[\s=|!<>,.[]|-?[%}]}/)),!n.startsWith("end")&&P.liquid.tags.has(n);i=e.indexOf("{",i+1)}while(i>-1);return!1}function Ae(e){let n=e;Array.isArray(e)&&(n=e.join(t));let i=n.indexOf("{");return!!h(n[i+1],37)&&(h(n[i+2],45)?n.slice(i+3).trimStart().startsWith("end"):n.slice(i+2).trimStart().startsWith("end"))}function Ce(e,t){if(1===t)return h(e[0],123)&&(h(e[1],37)||h(e[1],123));if(6===t)return h(e[0],123)&&h(e[1],37);if(7===t)return h(e[0],123)&&h(e[1],123);if(8===t)return h(e[e.length-2],37)&&h(e[e.length-1],125);if(9===t)return h(e[e.length-2],125)&&h(e[e.length-1],125);if(4===t)return/{[{%]/.test(e);if(5===t)return/{[{%]/.test(e)&&/[%}]}/.test(e);if(2===t){let t=e.length;return h(e[t-1],125)&&(h(e[t-2],37)||h(e[t-2],125))}if(3===t){let t=e.length;return h(e[0],123)&&(h(e[1],37)||h(e[1],123))&&h(e[t-1],125)&&(h(e[t-2],37)||h(e[t-2],125))}}function Ie(e){let a,{data:l,rules:c}=Be,u=e||Be.source,p="jsx"===Be.language||"tsx"===Be.language,w=new Set(c.liquid.ignoreTagList),x=q(c.markup.attributeSort)?c.markup.attributeSort.length:-1,v=q(u)?u:u.split(t),O=v.length,$={start:-1,tname:[],index:[]},S=0,_=!1,A=Ie?Be.language:"html",I=0;function L(e,n=t,i){if(n===t&&void 0===i)Be.push(l,e,t);else if(j(n))ge(e,n),Be.push(l,e,t);else if(q(n))for(let i of n)ge(e,i),Be.push(l,e,t);else i?(ge(e,i),Be.push(l,e,n)):console.log("isssue")}function T(e,t=null){return"html"!==Be.language&&"liquid"!==Be.language&&!1===p||/(?:{[=#/]|%[>\]])|\}%[>\]]/.test(e)||!Ce(e,3)?e:xe(e,t,c.liquid)}function N(e,n=t){if(e<1)return n;let i=t,r=v.lastIndexOf(o,e);return r>-1&&(i=u.slice(r+1,e),i.length>0&&i.trim().length<1)?n?i+n:i:n}function E(e,t=v){let n=e,i=1;for(;h(t[n++],10);)i+=1;return i}function R(e,t=-1,n=!1){return!1===n?u.slice(e,t).trimStart():u.slice(e,t)}function B(e){let t=e;do{t-=1}while(h(v[t],92));return t=e-t,t%2==1}function D(e,i=!0){let s=e.indexOf("=");if(s>0){let t=e.indexOf(n);if(s<t&&t>0)return i?[e.slice(0,s),e.slice(s+1)]:[e.slice(0,s),e.slice(s+2,-1)];let o=e.indexOf(r);if(s<o&&o>0)return i?[e.slice(0,s),e.slice(s+1)]:[e.slice(0,s),e.slice(s+2,-1)]}return[e,t]}function J(e){let y={lexer:"markup",lines:Be.lineOffset,stack:"global"!==Be.stack.token?Be.stack.token:"global",begin:Be.stack.index,token:t,types:t,ender:-1},q=t,j=t,W=t,J=t,H=t,U=!1,X=!1,Q=0,Y=!1,ne=!1,ie=!1,se=!1,oe=[];function ae(){return de()}function le(){return se&&!1===X&&"xml"!==W&&(P.html.voids.has(J)?(y.types=W="singleton",k(q[q.length-2],47)&&(y.token=function(e){return!1===c.correct||h(e[e.length-2],47)?e:/\/\s+>$/.test(e)?`${e.slice(0,e.lastIndexOf("/"))}${c.markup.selfCloseSpace?"/>":" />"}`:`${e.slice(0,-1)}${c.markup.selfCloseSpace?"/>":" />"}`}(q))):h(q[q.length-2],47)&&h(q[q.length-1],62)?y.types=W="singleton":y.types=W="start"),function(){if("svg"===J&&($.start=Be.count+1),P.svg.tags.has(J)&&$.start>0)if("start"===y.types)y.types="singleton",$.tname.push(J),$.index.push(Be.count+1);else if("end"===y.types){let e=$.tname.indexOf(J),t=$.tname.lastIndexOf(J);e>-1&&(t===e?(l.types[$.index[t]]="start",$.tname.splice(t,1),$.index.splice(t,1)):l.begin[Be.count]===$.index[e]?(l.types[l.begin[Be.count]]="start",$.tname.splice(e,1),$.index.splice(e,1)):l.types[$.index[t]]="start"),"svg"===J&&($.start=-1)}return function(){if(y.types.indexOf("liquid")<0)return ae();if(y.token===t&&(y.token=q),h(q[0],123)&&h(q[1],37))if(P.liquid.else.has(J))y.types=W="when"===J?"liquid_when":"liquid_else";else if(P.liquid.tags.has(J))y.types=W="liquid_start";else if(J.startsWith("end")){let e=J.slice(3);if(P.liquid.tags.has(e))y.types=W="liquid_end";else{y.stack=e,y.types=W="liquid_end";let t=0;do{if("liquid"===l.types[t]&&l.stack[t]===e){l.types[t]="liquid_start";break}t=l.stack.indexOf(e,t+1)}while(t>-1)}}else y.stack=J;return"double"===c.liquid.quoteConvert?y.token=q=y.token.replace(/'[^"]*?'/g,z(n)):"single"===c.liquid.quoteConvert&&(y.token=q=y.token.replace(/"[^']*?"/g,z(r))),ae()}()}()}function ce(){if(Be.count<1)return le();let i=t;if(re.test(l.token[Be.count])){if(P.html.voids.has(J))return y.token=q.replace(">",oe.map((([e])=>e)).join(s)+">"),y.types="ignore",L(y);W.indexOf("liquid")>-1&&P.liquid.tags.has(J)&&(i=`end${J}`),X=!0,ie=!1}else(function(e,t){return e in P.liquid.embed})(J)&&w.has(J)&&(i=null);if(null!==i&&!1===ie&&!0===X&&(">"===e||"}}"===e||"%}"===e)){let e=[];if(ie=!0,S+=1,S<O){"json_preserve"!==W&&"script_preserve"!==W&&"style_preserve"!==W&&"liquid_json_preserve"!==W&&"liquid_script_preserve"!==W&&"liquid_style_preserve"!==W&&(W="ignore");let s=t,o=0,a=-1,l=t,c=0,u=0,p=!1;do{if(h(v[S],10)&&Be.lines(S),e.push(v[S]),s===t){if(s=h(v[S],34)?n:h(v[S],39)?r:t,h(v[S],123)&&(h(v[S+1],123)||h(v[S+1],37))){if(a=h(v[S+1],37)?v.indexOf("}",S)+1:v.indexOf("}",S)+2,l=R(h(v[S+2],45)?S+3:S+2,a),l.startsWith(J))o+=1;else if(l.startsWith(i))if(o>0)o-=1;else if(h(v[S+1],123)&&(a+=1),h(v[a-2],37)){e.push(...v.slice(S+1,a)),W="liquid_ignore",S=a-1;break}}else if(h(v[S],60)&&!0===se)p=h(v[S+1],47);else if(v[S]===j&&k(v[S-1],47))if(!0===p){if(Q-=1,Q<0)break}else Q+=1}else if(h(v[S],s.charCodeAt(s.length-1))){if(u=0,c=s.length-1,h(s[c],125)){if(R(S+(h(v[S+2],45)?3:2),v.indexOf("%",S+2)).startsWith(i))break}else if(c>-1)do{if(k(v[S-u],s.charCodeAt(c)))break;u+=1,c-=1}while(c>-1);c<0&&(s=t)}S+=1}while(S<O)}if("ignore"===W){Be.is("types","ignore")||(l.types[Be.count]="ignore");let n=Be.iterator+v.slice(Be.iterator,S).join(t).search(V),i=N(n);i===t&&(i=l.token[Be.count].search(V)>0?d(l.token[Be.count].search(V)):t),oe=[],q=i+v.slice(n,S-e.length+1).join(t)+e.join(t),y.types="ignore",y.token=q}else if("liquid_ignore"===W)Be.is("types","ignore")||(l.types[Be.count]="ignore"),q=N(S-q.length-e.length+1,q)+e.join(t),W="ignore",y.types="ignore",y.token=q;else if(!W.startsWith("liquid_")){y.types="start",de(!0);let n=e.lastIndexOf("<"),i=e.slice(0,n).join(t);return V.test(i)?L(y,[{lexer:"markup",types:W,token:i},{lexer:"markup",types:"end",token:e.slice(n).join(t).trim()}]):L(y,[{lexer:"markup",types:"end",token:e.slice(n).join(t).trim()}]),_=!1,a=A,ke()}}return le()}function ue(){if(h(q,60)&&h(q[1],47))return ce();let e=oe.length-1;if(h(q,60))if(e>-1)do{let t=be(J,"html",D(oe[e][0],!1));if(!1!==t){if("json"===t.language&&c.markup.ignoreJSON){W="json_preserve",X=!0;break}if("javascript"===t.language&&c.markup.ignoreJS){W="script_preserve",X=!0;break}if("css"===t.language&&c.markup.ignoreCSS){W="style_preserve",X=!0;break}a=t.language,W="start",_=!0,X=!1;break}e-=1}while(e>-1);else{let e=be(J,"html");!1!==e&&("json"===e.language&&c.markup.ignoreJSON?(W="json_preserve",X=!0):"javascript"===e.language&&c.markup.ignoreJS?(W="script_preserve",X=!0):"css"===e.language&&c.markup.ignoreCSS?(W="style_preserve",X=!0):(a=e.language,W="start",_=!0,X=!1))}else if(_e(q,!0)){let e=be(J,"liquid",q);if(!1!==e){if(w.has(J))return X=!0,ie=!1,ce();_=!0,a=e.language}}return ce()}function de(e=!1){null!==e&&L(y);let i=Be.count,s=J.replace(/\/$/,t),a=c.markup.quoteConvert,l=0,u=0,d=0,f=t,g=t,b=oe.length;function w(){Be.attributes.has(i)&&l+1===b&&m(y.token,62)&&(y.token=y.token+">");let e=y.types.indexOf("liquid_attribute")>-1;if(!0===X||"none"===a||y.types.indexOf("attribute")<0||!1===e&&"single"===a&&y.token.indexOf(n)<0||!1===e&&"double"===a&&y.token.indexOf(r)<0)L(y);else{let i=0,s=!1,o=y.token.split(t),l=y.token.indexOf("="),c=o.length-1;if(k(o[l+1],34)&&k(o[o.length-1],34)&&"single"===a&&!1===e)L(y);else if(k(o[l+1],39)&&k(o[o.length-1],39)&&"double"===a&&!1===e)L(y);else{if(i=l+2,!1===e&&("double"===a?(y.token.slice(l+2,c).indexOf(n)>-1&&(s=!0),o[l+1]=n,o[o.length-1]=n):"single"===a&&(y.token.slice(l+2,c).indexOf(r)>-1&&(s=!0),o[l+1]=r,o[o.length-1]=r)),!0===s||!0===e){e=!1;do{h(o[i-1],123)&&(h(o[i],37)||h(o[i],123))?e=!0:h(o[i],125)&&(h(o[i-1],37)||h(o[i-1],125))&&(e=!1),!0===e?h(o[i],34)&&"double"===a?o[i]=r:h(o[i],39)&&"single"===a&&(o[i]=n):h(o[i],39)&&"double"===a?o[i]=n:h(o[i],34)&&"single"===a&&(o[i]=r),i+=1}while(i<c)}y.token=o.join(t),L(y)}}}function v(){if(Se(oe[l][0]))y.types="liquid_attribute_chain",y.token=oe[l][0];else if(Ae(oe[l][0]))y.token=oe[l][0],y.types="liquid_attribute_end",y.ender=y.begin;else{if(_e(oe[l][0],!0))return y.types="liquid_attribute_start",y.begin=Be.count,y.token=oe[l][0],w(),!0;Oe(oe[l][0])?(y.types="liquid_attribute_else",y.token=oe[l][0]):(y.types="attribute",y.token=oe[l][0])}return w(),!1}if(oe.length<1)return!0!==e?void 0:ke();if(h(oe[oe.length-1][0],47)&&(oe.pop(),q=q.replace(/>$/,"/>")),u=oe.length,d=1,d<u)do{f=oe[d-1][0],h(f[f.length-1],61)&&oe[d][0].indexOf("=")<0&&(oe[d-1][0]=f+oe[d][0],oe.splice(d,1),u-=1,d-=1),d+=1}while(d<u);if((x>0||!0===c.markup.attributeSort)&&function(){if(p||Y||ne)return;if(0===x)return void(oe=C(oe,t,!1));let e=[];d=0,u=0,b=oe.length;do{u=0;do{if(oe.length>0&&(f=oe[u][0].split("=")[0],c.markup.attributeSort[d]===f)){e.push(oe[u]),oe.splice(u,1),b-=1;break}u+=1}while(u<b);d+=1}while(d<x);oe=C(oe,t,!1),oe=e.concat(oe),b=oe.length}(),y.begin=i,y.stack=s,y.types="attribute",l<b)do{if(void 0===oe[l])break;y.lines=oe[l][1],oe[l][0]=oe[l][0].replace(G,t),!0===p&&/^\/[/*]/.test(oe[l][0])?(y.types="comment_attribute",y.token=oe[l][0],w(),l+=1):oe[l][1]<=1&&Se(oe[l][0])&&!$e(oe[l][0])?(y.types="liquid_attribute_chain",y.token=oe[l][0],w(),l+=1):(u=oe[l][0].indexOf("="),d=oe[l][0].indexOf(n),u<0?(Ae(oe[l][0])?(y.token=oe[l][0],y.types="liquid_attribute_end",y.ender=y.begin):_e(oe[l][0],!0)?(y.types="liquid_attribute_start",y.begin=Be.count,y.token=oe[l][0]):Oe(oe[l][0])?(y.types="liquid_attribute_else",y.token=oe[l][0]):je(oe[l][0])?(y.types="liquid_attribute",y.token=oe[l][0]):h(oe[l][0],35)||h(oe[l][0],91)||h(oe[l][0],123)||h(oe[l][0],40)||!0===p?y.token=oe[l][0]:(y.types="liquid_attribute",y.token="preserve"===c.markup.attributeCasing?oe[l][0]:oe[l][0].toLowerCase()),w()):Ce(oe[l][0],6)?v():(f=oe[l][0].slice(0,u),g="force-preserve"===c.markup.lineBreakValue||"force-indent"===c.markup.lineBreakValue||"force-align"===c.markup.lineBreakValue?oe[l][0][u+1]+o+oe[l][0].slice(u+2,-1).trim()+o+oe[l][0][oe[l][0].length-1]:oe[l][0].slice(u+1),"lowercase-name"===c.markup.attributeCasing?(f=f.toLowerCase(),oe[l][0]=f+"="+g):"lowercase-value"===c.markup.attributeCasing?(g=g.toLowerCase(),oe[l][0]=f+"="+g):("lowercase"===c.markup.attributeCasing&&(f=f.toLowerCase(),g=g.toLowerCase()),oe[l][0]=f+"="+g),!0===c.correct&&k(g,60)&&k(g,123)&&k(g,61)&&k(g,34)&&k(g,39)&&(g=n+g+n),!0===p&&/^\s*{/.test(g)?(L(y,"jsx_attribute",{token:`${f}={`,types:"jsx_attribute_start"}),Be.external("jsx",g.slice(1,g.length-1)),y.begin=Be.count,/\s\}$/.test(g)?(g=g.slice(0,g.length-1),g=G.exec(g)[0],y.lines=g.indexOf("\n")<0?1:g.split("\n").length):y.lines=0,y.begin=Be.stack.index,y.stack=Be.stack.token,y.token="}",y.types="jsx_attribute_end",w(),y.types="attribute",y.begin=i,y.stack=s):Ce(f,6)?v():(y.types="attribute",y.token=oe[l][0],w())),l+=1)}while(l<b);return e?void 0:ke()}function fe(n){Be.iterator=S;let i=he({chars:v,end:O,lexer:"markup",begin:H,start:S,ender:e});if(q=i[0],S=i[1],!ee.test(q)){if(h(q[0],123)&&h(q[1],37)&&!1===n){let e=q.indexOf("%}",2)+2,t=q.lastIndexOf("{%");q=T(q.slice(0,e),J)+q.slice(e,t)+T(q.slice(t),J)}return y.token=q,y.types="comment",ue()}if(te.test(q)){let e;e=q.startsWith("\x3c!--")?q.indexOf("--\x3e")+3:pe.test(q)?q.indexOf("%}")+2:q.indexOf("%}",q.indexOf("%}")+2)+2,L(y,[{token:N(Be.iterator,q.slice(0,e)),types:"ignore"},{token:q.slice(e).replace(K,t),types:"ignore",lines:E(e,q)}])}else L(y,{token:N(Be.iterator,q),types:"ignore"}),Be.iterator=S+1}function ge(e){let t=S,n=S+e;do{if(h(v[n],62))return S=n,u.slice(t,n+1);n+=1}while(n<O)}function ke(){if(c.wrap>0&&!0===p){let e=0,t=Be.count,n=0;if(l.types[t].indexOf("attribute")>-1){do{e=e+l.token[t].length+1,t-=1}while("markup"!==l.lexer[t]||l.types[t].indexOf("attribute")>-1);1===l.lines[t]&&(e=e+l.token[t].length+1)}else 1===l.lines[t]&&(e=l.token[t].length+1);if(n=t-1,e>0&&"script_end"!==l.types[n])if(l.types[n].indexOf("attribute")>-1){do{e=e+l.token[n].length+1,n-=1}while("markup"!==l.lexer[n]||l.types[n].indexOf("attribute")>-1);1===l.lines[n]&&(e=e+l.token[n].length+1)}else 1===l.lines[n]&&(e=l.token[n].length+1)}Be.lineOffset=0}return function(){if("---"===e)H="---",W="ignore",ie=!0;else if(h(v[S],60)){if(h(v[S+1],123)&&(h(v[S+2],123)||h(v[S+2],37))){let e=ge(3);return U=!0,Be.stack.push(["liquid_bad",Be.count]),void L(y,{token:e,types:"liquid_start_bad"})}if(h(v[S+1],47)){if(h(v[S+2],123)&&(h(v[S+3],123)||h(v[S+3],37))){let e=ge(3);return void L(y,{token:e,types:"liquid_end_bad"})}W="end",e=">"}else h(v[S+1],33)?(h(v[S+2],100)||h(v[S+2],68))&&(h(v[S+3],111)||h(v[S+3],79))&&(h(v[S+4],99)||h(v[S+4],67))&&(h(v[S+5],116)||h(v[S+5],84))&&(h(v[S+6],121)||h(v[S+6],89))&&(h(v[S+7],112)||h(v[S+7],80))&&(h(v[S+8],101)||h(v[S+8],69))?(e=">",W="doctype",ie=!0):h(v[S+2],45)&&h(v[S+3],45)?(e="--\x3e",H="\x3c!--",W="comment"):h(v[S+2],91)&&67===v[S+3].charCodeAt(0)&&68===v[S+4].charCodeAt(0)&&65===v[S+5].charCodeAt(0)&&84===v[S+6].charCodeAt(0)&&65===v[S+7].charCodeAt(0)&&h(v[S+8],91)&&(e="]]>",W="cdata",ie=!0):h(v[S+1],63)?(e="?>",120===v[S+2].charCodeAt(0)&&109===v[S+3].charCodeAt(0)&&109===v[S+4].charCodeAt(0)?(W="xml",se=!0):(ie=!0,W="liquid")):h(v[S+1],112)&&h(v[S+2],114)&&h(v[S+3],101)&&(h(v[S+4],62)||b(v[S+4]))?(e="</pre>",W="ignore",ie=!0):(se=!0,e=">")}else if(h(v[S],123)){if(p)return _=!0,U=!0,Be.stack.push(["script",Be.count]),void L(y,{token:"{",types:"script_start"});if(h(v[S+1],123))ie=!0,e="}}",W="liquid";else if(h(v[S+1],37)){ie=!0,e="%}",W="liquid";let t=v.indexOf("}",S+2);if(h(v[t-1],37)){let n=u.slice(S+2,t-1);if(h(n,45)?(H="{%-",n=n.slice(1).trimStart()):(H="{%",n=n.trimStart()),J=n.slice(0,n.search(/[\s%}-]/)),h(n[n.length-1],45)?(e="-%}",n=n.slice(0,n.length-1).trimEnd()):(e="%}",n=n.trimEnd()),function(t,n){if("comment"===(t=t.trimStart().split(/\s/)[0])||w.has(t)){let i=u.indexOf("{%",n),r=i;45===v[i+1].charCodeAt(0)&&(r=i+1),r=u.indexOf(`end${t}`,r),r>0&&(r=v.indexOf("}",r),r>0&&37===v[r-1].charCodeAt(0)&&("comment"!==t?(W="ignore",X=!0,H=u.slice(S,n+1),e=u.slice(i,r+1)):(W="comment",H=u.slice(S,n+1),i=u.lastIndexOf("{%",r),e=u.slice(i,r+1))))}}(n,t),h(n,35))return W="comment",j=(e="%}").charAt(e.length-1),fe(!0)}else ie=!0,e="%}",W="liquid"}else ie=!0,e=v[S+1]+"}",W="liquid"}return!0!==ie&&!0===c.markup.preserveAttribute&&(ie=!0),U?ue():(j=e.charAt(e.length-1),"comment"===W&&(h(v[S],60)||h(v[S],123)&&h(v[S+1],37))?fe():S<O?function(){let n=[],r={pipes:[],fargs:[],targs:[],logic:[]},a=0,d=0,w=t,x=0,$=0,_=0,C=0,N=t,z=t,E=0,R=!1,V=!1,U=!1,K=!1,ee=!1,te=NaN,re=[];function ae(){if(f(n,44)){if("when"===J&&r.logic.push(n.length-1),!0===c.correct&&/^,\s*-?[%}]}/.test(u.slice(S)))return n.pop(),S+=1,!0;44===te?r.fargs[r.fargs.length-1].push(n.length-1):58===te?(r.fargs[r.fargs.length-1][0]+=1,r.fargs[r.fargs.length-1].push(n.length-1),te=44):r.targs.push(n.length-1)}else f(n,124)?(r.pipes.push(n.length-1),te=124):f(n,58)&&124===te&&(r.fargs.push([n.length-1]),te=58);if(h(v[S],10)&&"liquid"!==J&&!1===V&&!1===c.liquid.preserveInternal&&n.length>3&&!(h(v[S+1],45)&&h(v[S+2],37)&&h(v[S+3],125)||h(v[S+1],37)&&h(v[S+2],125))?n.pop():!0===c.liquid.normalizeSpacing&&(k(v[S],32)&&(g(n,39)||g(n,34))?k(v[S],44)&&k(v[S],93)?(n.splice(n.length-1,1,s,v[S]),k(v[S+1],32)&&k(v[S+1],61)&&k(v[S+1],125)&&n.push(s)):k(v[S+1],32)&&n.push(s):h(v[S],32)&&h(v[S-1],93)?n.pop():n.length>3&&h(v[S+1],10)&&k(v[S+2],32)?n.push(s):h(v[S],32)&&h(v[S+1],32)?n.pop():g(n,93)&&f(n,32)&&k(v[S],32)&&k(v[S],44)&&k(v[S],46)?n.splice(n.length-1,1,s,v[S]):g(n,32)&&h(v[S],32)&&h(v[S+1],32)?n.pop():h(v[S],44)&&k(v[S+1],32)||h(v[S],58)&&k(v[S+1],32)?n.push(s):h(v[S],32)&&g(n,46)||function(e,...t){let n=e.length-1,i=t.length;for(;i--;)if(!1===h(e[n--],t[i]))return!1;return!0}(n,91,32)?n.pop():k(v[S],32)&&h(v[S+1],124)||h(v[S],124)&&k(v[S+1],32)?n.push(s):h(v[S],32)&&(h(v[S+1],46)||h(v[S+1],93)||h(v[S+1],91)||h(v[S+1],58)||h(v[S+1],44))?n.pop():("assign"===J&&(k(v[S],32)&&h(v[S+1],61)||h(v[S],61)&&k(v[S+1],32))||("if"===J||"unless"===J||"elsif"===J)&&((k(v[S],32)||h(v[S],10))&&(h(v[S+1],33)||h(v[S+1],60)||h(v[S+1],62)||h(v[S+1],61)&&h(v[S+2],61))||h(v[S],61)&&(k(v[S+1],32)||h(v[S+1],10))&&(h(v[S-1],61)||h(v[S-1],60)||h(v[S-1],62)||h(v[S-1],33))||k(v[S+1],32)&&k(v[S+1],61)&&(h(v[S],60)||h(v[S],62))))&&n.push(s)),b(v[S-1]))if(w=u.slice(S),"if"===J||"elsif"===J||"unless"===J){if(b(v[S+2])&&w.startsWith("or"))return r.logic.push(n.length-1),n.pop(),n.push(w.slice(0,2)),S+=2,!0;if(b(v[S+3])&&w.startsWith("and"))return r.logic.push(n.length-1),n.pop(),n.push(w.slice(0,3)),S+=3,!0;if(b(v[S+8])&&w.startsWith("contains"))return r.logic.push(n.length-1),n.pop(),n.push(w.slice(0,8)),S+=8,!0}else if("when"===J&&b(v[S+2])&&w.startsWith("or"))return r.logic.push(n.length-1),n.pop(),n.push(w.slice(0,2)),S+=2,!0;if(h(n[n.length-1],44)&&h(n[n.length-2],44))return M(114,n.join(t),F(n.join(t)));V=!1}function le(e){let n,i=t;if(!0===e?(i=re.join(t),n=D(i),N=t,"data-esthetic-ignore"===n[0]&&(X=!0)):(i=re.join(t),(!1===p||p&&m(i,125))&&(i=i.replace(Z,s)),n=D(i),"data-esthetic-ignore"===n[0]&&(X=!0),p&&h(re[0],123)&&h(re[re.length-1],125)&&(E=0)),h(i[0],123)&&h(i[1],37)&&(ne=!0),i=i.replace(/^\u0020/,t).replace(/\u0020$/,t),re=i.replace(/\r\n/g,o).split(o),re.length<1&&(re[0]=re[0].replace(G,t)),i=T(re.join(Be.crlf),J),!0===c.markup.stripAttributeLines&&C>=1&&(C=1),oe.length>0){let e=oe.length-1;0===I&&(h(i,61)||h(i,45))&&(oe[e][0]=oe[e][0]+i,oe[e][1]=C,i=t)}if(!1===e&&(_e(i)&&(I+=1),Ae(i)&&(I-=1)),i!==t&&i!==s&&oe.push([i,C]),oe.length>0){let[e]=oe[oe.length-1];if(e.indexOf("=“")>0)return M(103,e);if(e.indexOf("=”")>0)return M(103,e)}re=[],C=h(v[S],10)?1:0}if(!Be.error){do{if(h(v[S],10)&&(C=Be.lines(S,C)),"---"!==H||"---"!==e||"ignore"!==W){if(!0===ie||!1===b(v[S])&&k(N,125)||h(N,125)){if(n.push(v[S]),!1===R&&h(v[S-1],123)&&(h(v[S],123)||h(v[S],37)))R=!0;else if(!0===R&&h(v[S],125)){if(h(v[S-1],125)||h(v[S-1],37))R=!1;else if((h(v[S-2],125)||h(v[S-2],37))&&b(v[S-1]))return M(111,n.join(t))}else if(!0===R&&h(v[S],10)&&!1===c.liquid.preserveInternal&&("preserve"===c.liquid.delimiterPlacement||"consistent"===c.liquid.delimiterPlacement))if(h(v[S-1],45)&&h(v[S-3],123)&&(h(v[S-2],123)||h(v[S-2],37))||h(v[S-2],123)&&(h(v[S-1],123)||h(v[S-1],37)))V=!0;else if(!0===/^\s*-?[%}]}/.test(u.slice(S))){for(;!0===b(v[S]);)S+=1,h(v[S],10)&&(C=Be.lines(S,C));n.push(v[S]),V=!0}if("end"===W&&n.length>2&&h(n[0],60)&&h(n[1],47)&&(h(n[n.length-1],47)||h(n[n.length-1],60))){if(!c.correct)return M(106,n.join(t));n.pop(),n.push(">");break}if(h(n[0],60)&&h(n[1],62)&&h(e,62))return L(y,"(empty)",{token:"<>",types:"start"});if(h(n[0],60)&&h(n[1],47)&&h(n[2],62)&&h(e,62))return y.token="</>",y.token="end",L(y)}if("cdata"===W&&h(v[S],62)&&h(v[S-1],93)&&k(v[S-2],93))return M(103,n.join(t));if("comment"===W){if(N=t,v[S]===j&&n.length>e.length+1){if(d=n.length,a=e.length-1,a>-1)do{if(d-=1,k(n[d],e.charCodeAt(a)))break;a-=1}while(a>-1);if(a<0)break}}else if(N===t){if(h(n[0],60)&&h(n[1],33)&&"cdata"!==W){if("doctype"===W&&h(v[S],62))break;if(h(v[S],91)){if(h(v[S+1],60)){W="start";break}if(b(v[S+1]))do{S+=1,h(v[S],10)&&(C=Be.lines(S,C))}while(S<O-1&&b(v[S+1]));if(h(v[S+1],60)){W="start";break}}}if(p&&(h(v[S],123)?E+=1:h(v[S],125)&&(E-=1)),h(v[S],60)&&!0===se&&!1===ie&&n.length>1&&!1===/>{2,3}/.test(e)){Be.error=`Invalid structure detected ${v.slice(S,S+8).join(t)}`;break}if(!1===b(v[S])&&!0===U&&v[S]!==j){if(Q=0,U=!1,N=z,n.pop(),S<O)do{if(h(v[S],10)&&!1===ee&&(C=Be.lines(S,C)),!0===c.markup.preserveAttribute?n.push(v[S]):re.push(v[S]),(k(N,34)||k(N,39))&&(h(v[S-1],123)&&(h(v[S],37)||h(v[S],123))?R=!0:h(v[S],125)&&(h(v[S-1],125)||h(v[S-1],37))&&(R=!1)),!1===p&&!1===ee&&!0===R&&!1===c.markup.preserveAttribute)for(;S<O;){if(S+=1,h(v[S],10)&&(C=Be.lines(S,C)),h(re[0],61)&&(h(re[1],123)||h(re[1],37))&&(h(re[re.length-2],125)||h(re[re.length-2],37))&&h(re[re.length-1],125)){R=!1,N=t,le(!1);break}if(h(re[0],61)&&k(re[1],123)){R=!1,N=t,le(!1);break}if(re.push(v[S]),h(re[0],61)&&h(v[S+1],62)){R=!1,oe[oe.length-1][0]+=re.join(t),re=[],N=t;break}if(k(re[0],61)&&h(v[S],125)&&(h(v[S-1],125)||h(v[S-1],37))){R=!1,N=t,le(!1);break}}if(!1!==p||!h(v[S],60)&&!h(v[S],62)||N!==t&&!h(N,62))if(N===t){if(v[S+1]===j){(f(re,47)||f(re,63)&&"xml"===W)&&(re.pop(),!1===ie||n.pop(),S-=1),re.length>0&&le(!1);break}if(!1===p&&h(v[S],123)&&h(v[S-1],61)?N="}":h(v[S],34)||h(v[S],39)?(N=v[S],!1===ee&&!1===R&&(ee=!0),h(v[S-1],61)&&(h(v[S+1],60)||h(v[S+1],123)&&h(v[S+2],37)||b(v[S+1])&&k(v[S-1],61))&&(Q=S)):h(v[S],40)?(N=")",_=1):p?(h(v[S-1],61)||b(v[S-1]))&&h(v[S],123)?(N="}",$=1):h(v[S],47)&&(h(v[S+1],42)?N="*/":h(v[S+1],47)&&(N=o)):h(n[0],123)&&h(v[S],123)&&(h(v[S+1],123)||h(v[S+1],37))&&(N=h(v[S+1],123)?"}}":v[S+1]+"}"),b(v[S])&&N===t){if(h(re[re.length-2],61)&&(a=S+1,a<O))do{if(!1===b(v[a])){(h(v[a],34)||h(v[a],39))&&(S=a-1,K=!0,re.pop());break}a+=1}while(a<O);if(!0===K)K=!1;else if(0===E||1===E&&h(re[0],123)){re.pop(),re.length>0&&le(!1),U=!0;break}}}else if(h(v[S],40)&&h(N,41))_+=1;else if(h(v[S],41)&&h(N,41)){if(_-=1,0===_&&(N=t,h(v[S+1],e.charCodeAt(0)))){le(!1);break}}else if(!0===p&&(h(N,125)||h(N,10)&&h(v[S],10)||h(N,42)&&h(v[S-1],42)&&h(v[S],47))){if(h(v[S],96)){S+=1;do{if(re.push(v[S]),h(v[S],96))break;S+=1}while(S<v.length)}if(!h(N,125)){z=t,Y=!0,q=re.join(t),q!==s&&oe.push([q,C]),re=[],C=h(N,10)?2:1,N=t;break}if(h(v[S],125)&&v[S]!==N)$+=1;else if(v[S]===N&&($-=1,0===$)){E=0,N=t,q=re.join(t),!1===c.markup.preserveAttribute&&(p?/^\s*$/.test(q)||oe.push([q,C]):(q=q.replace(Z,s),q!==s&&oe.push([q,C]))),re=[],C=1;break}}else if(h(v[Q-1],61)&&h(v[S],123)&&h(v[S+1],37)&&(h(N,34)||h(N,39)))N+="{%",Q=0;else if(h(v[S-1],37)&&h(v[S],125)&&('"{%'===N||"'{%"===N))N=N[0],Q=0;else if(h(v[S],60)&&h(e,62)&&h(v[Q-1],61)&&(h(N,34)||h(N,39)))N+="<",Q=0;else if(!h(v[S],62)||'"<'!==N&&"'<"!==N)if(0===Q&&k(N,62)&&(N.length<2||k(N,34)&&k(N,39))){if(d=0,a=N.length-1,a>-1)do{if(k(v[S-d],N.charCodeAt(a)))break;d+=1,a-=1}while(a>-1);if(a<0&&!1===R&&!0===ee&&(ee=!1,le(!0),v[S+1]===j))break;0===a&&h(v[S],62)}else Q>0&&!1===b(v[S])&&(Q=0);else N=N.charAt(0),Q=0;else if(N===t&&h(v[S],60))N=">",x=1;else if(h(N,62))if(h(v[S],60))x+=1;else if(h(v[S],62)&&(x-=1,0===x)){N=t,Q=0,le(!1);break}S+=1}while(S<O)}else if(!1===h(e,10)&&(h(v[S],34)||h(v[S],39)))N=v[S];else if(S>0&&!0===R&&k(N,34)&&k(N,39)){if(!0===ae())continue}else if("comment"!==W&&k(e,10)&&h(v[S],60)&&h(v[S+1],33)&&h(v[S+2],45)&&h(v[S+3],45)&&"conditional"!==l.types[Be.count])N="--\x3e";else if(h(v[S],123)&&k(n[0],123)&&k(e,10)&&(h(v[S+1],123)||h(v[S+1],37))){if(h(v[S+1],123))N="}}";else if(N=v[S+1]+"}",re.length<1&&(oe.length<1||b(v[S-1]))){n.pop();do{h(v[S],10)&&(C+=1),re.push(v[S]),S+=1}while(S<O&&v[S-1]+v[S]!==N);re.push("}"),oe.push([re.join(t),C]),re=[],C=1,N=t}N===e&&(N=t)}else if(se&&k(e,10)&&k(v[S-1],60)&&b(v[S]))U=!0;else if(se&&p&&h(v[S],47)&&(h(v[S+1],42)||h(v[S+1],47)))U=!0,n[n.length-1]=s,z=h(v[S+1],42)?"*/":o,re.push(v[S]);else if(!1===R&&(v[S]===j||h(e,10)&&h(v[S+1],60))&&(n.length>e.length+1||h(n[0],93))&&(!1===p||0===E)){if(h(e,10)){if(b(n[n.length-1]))do{n.pop(),S-=1}while(b(n[n.length-1]));break}if(d=n.length,a=e.length-1,a>-1)do{if(d-=1,n[d]!==e.charAt(a))break;a-=1}while(a>-1);if(a<0){h(n[d],62)&&h(v[S],62)&&h(v[S-1],125)&&b(v[S+1])&&oe.length>0&&0===oe[oe.length-1][1]&&(oe[oe.length-1][1]=h(v[S+1],32)?1:2);break}}}else if(h(v[S],N.charCodeAt(N.length-1))&&k(v[S-1],92)&&(!0===p&&h(e,125)&&!1===B(S)||!1===p||k(e,125))){if(d=0,a=N.length-1,a>-1)do{if(k(v[S-d],N.charCodeAt(a)))break;d+=1,a-=1}while(a>-1);a<0&&(N=t)}S+=1}else{if(n.push(v[S]),S>3&&h(v[S],45)&&h(v[S-1],45)&&h(v[S-2],45))break;S+=1}}while(S<O);if(Q=0,J||(J=F(n.join(t))),!1===X)if("liquid"===W){if(q=function(e,n,r,{wrapFraction:a,liquid:{forceFilter:l,forceArgument:c,lineBreakSeparator:u,delimiterTrims:p,delimiterPlacement:d,preserveInternal:f}}){let g,k,[m,b]=ve(e);if("never"===p?(g=`{${e[1]}`,k=`${e[e.length-2]}}`):"always"===p||"outputs"===p&&h(e[1],123)||"tags"===p&&h(e[1],37)?(g=`{${e[1]}-`,k=`-${e[e.length-2]}}`):"preserve"===p?(g=e.slice(0,m).join(t),k=e.slice(b).join(t)):(g=`{${e[1]}`,k=`${e[e.length-2]}}`),"else"===n||"break"===n||"continue"===n||"increment"===n||"decrement"===n||n.startsWith("end"))return g+=s,k=s+k,g+e.slice(m,b).join(t).trim()+k;if("preserve"===d?(g+=h(e[m],10)?o:s,k=(h(e[b-1],10)?o:s)+k):"force"===d?(g+=o,k=o+k):"inline"===d||"default"===d?(g+=s,k=s+k):"consistent"===d&&h(e[m],10)?(g+=o,k=o+k):(g+=s,k=s+k),"liquid"===n||!0===f)return g+e.slice(m,b).join(t).trim()+k;if(a>0&&e.length>=a&&r.logic.length>0&&("if"===n||"elsif"===n||"unless"===n||"when"===n)){"multiline"===p&&(g=`{${e[1]}-`+g[g.length-1],k=k[0]+`-${e[e.length-2]}}`),"force-multiline"===d&&(g=g.trimEnd()+o,k=o+k.trimStart());let n=r.logic.length;for(let i=0;i<n;i++){let n=r.logic[i];e[n]=o+e[n],h(e[n-1],32)&&(e[n-1]=t)}return g+e.slice(m,b).join(t).trim()+k}let y=r.pipes.length;if(y>0){if(l>0&&y>=l||0===l&&a>0&&e.length>a){"multiline"===p&&(g=`{${e[1]}-`+g[g.length-1],k=k[0]+`-${e[e.length-2]}}`),"force-multiline"===d&&(g=g.trimEnd()+o,k=o+k.trimStart());for(let n=0;n<y;n++){let s=r.pipes[n];if(h(e[s-1],32)&&(e[s-1]=t),e[s]=o+e[s],0===n){let n=s-1;if(h(e[n-1],32))do{e[n--]=t}while(h(e[n],32))}if(r.fargs[n]&&(c>0&&r.fargs[n].length>=c||0===c&&a>0&&e.slice(r.fargs[n][0],r.fargs[n][r.fargs[n].length-1]).length>a)){let t=r.fargs[n].length;for(let s=0;s<t;s++){let t=r.fargs[n][s];"after"===u?e[h(e[t-1],44)?t-1:t]=0===s?o+"  ":i+o+" ":"before"===u?h(e[t-1],44)?e[t-1]=0===s?"  "+o:o+"  "+i:e[t]=0===s?o+"  ":o+"  "+i:e[t]=o+"  "+e[t]}}}}return g+e.slice(m,b).join(t).trim()+k}if(r.targs.length>=c){"multiline"===p&&(g=`{${e[1]}-`+g[g.length-1],k=k[0]+`-${e[e.length-2]}}`);for(let n=0;n<r.targs.length;n++){let s=r.targs[n];"after"===u?(h(e[s+1],32)&&(e[s+1]=t),h(e[s-1],32)&&(e[s-1]=t),e[s]=h(e[s],44)?i+o:o):"before"===u&&(h(e[s-1],44)?e[s-1]=o+i:e[s]=o+i)}}return g+e.slice(m,b).join(t).trim()+k}(n,J,r,c),c.liquid.normalizeSpacing&&(q=q.replace(/\] \[/g,"][").replace(/(\])(\w+:)/,"$1 $2"),"render"===J&&q.indexOf("]as")>-1&&(q=q.replace(/\]as(?=\s+)/,"] as"))),"liquid"===J)return function(){let e=q.indexOf("liquid")+6,n=t,i=t,r=1;L(y,{token:ye(q.slice(0,e),c.liquid),types:"liquid_start",stack:"liquid"});let s=q.slice(e).split(o),a=s.pop().trim(),l=h(a[a.length-3],45)?a.length-3:a.length-2,u=a.slice(0,l),p=a.slice(l);0!==u.length&&s.push(u),e=0;do{n=s[e].trim(),i=n.split(/\s/)[0],i.startsWith("end")?(y.token=n,y.types="liquid_end",y.lines=r,L(y),r=1):i.startsWith("#")?(y.token=n,y.types="liquid",y.lines=r<=1?2:r,L(y),r=1):i.startsWith("comment")||P.liquid.tags.has(i)?(y.token=n,y.types="liquid_start",y.lines=r,L(y),r=1):P.liquid.else.has(i)?(y.token=n,y.types="when"===i?"liquid_when":"liquid_else",y.lines=r,L(y),r=1):P.liquid.singleton.has(i)?(y.token=n,y.types="liquid",y.lines=r<=1?2:r,L(y),r=1):n.trim().length>0&&(y.token=n,y.types="content",y.lines=r,L(y),r=1),e+=1,r+=1}while(e<s.length);"default"===c.liquid.delimiterPlacement||"force-multiline"===c.liquid.delimiterPlacement||"preserve"===c.liquid.delimiterPlacement&&/\n-?%}$/.test(q)||"consistent"===c.liquid.delimiterPlacement&&/^{%-?\n/.test(q)?L(y,{token:p,types:"liquid_end",lines:2}):Be.replace({token:we(Be.current.token+p,c.liquid)})}()}else q=n.join(t);else q=n.join(t);return"xml"===J?A="xml":A===t&&"html"===J&&(A="html"),y.token=q,y.types=W,!1===ie&&!1===p&&(q=q.replace(Z,s)),ue()}}():ue())}()}function H(){let e=[],n=S,i=!0===p&&h(l.token[Be.count],123),r=t,d=Be.lineOffset,f=t;!0===_&&(f=!0===i?"script":Be.stack.index>-1?F(l.token[Be.stack.index]):F(l.token[l.begin[Be.count]]));let g={begin:Be.stack.index,ender:-1,lexer:"markup",lines:d,stack:F(Be.stack.token)||"global",token:t,types:"content"};function m(){let e=S-1,t=0;if(k(v[S-1],92))return!1;if(e>-1)do{if(k(v[e],92))break;t+=1,e-=1}while(e>-1);return t%2==1}if(S<O){let n=t,w=t,x=t,q=0;do{if(h(v[S],10)&&(d=Be.lines(S,d)),!0===_){if("liquid_start"===l.types[Be.count]){let e=`end${f}`,i=u.indexOf(`end${f}`,S);if(i>-1){let r=i;do{if(!1===b(v[r])&&h(v[r],37)&&h(v[r-1],123)){r-=2;break}}while(v[r--]);if(n=v.slice(r+1,v.indexOf("%",i+e.length)+2).join(t),qe(e).test(n)){d=1,x=v.slice(S,r).join(t).replace(G,t),S=r+n.length,Be.external(a,x);do{h(v[r],10)&&(d+=1)}while(b(v[r--]));L(g,{token:T(n),types:"liquid_end",lines:d});break}}}if(w===t){if(h(v[S],47))h(v[S+1],42)?w="*":h(v[S+1],47)?w="/":!p&&"script"===f&&k(v[S-1],60)&&"([{!=,;.?:&<>".indexOf(v[S-1])>-1&&(w="r");else if(!1===m()&&(h(v[S],34)||h(v[S],39)||h(v[S],96)))w=v[S];else if(h(v[S],123)&&!0===i)q+=1;else if(h(v[S],125)&&!0===i){if(0===q){x=e.join(t).replace(U,t).replace(G,t),Be.external(a,x),Be.stack.update(Be.stack.index+1),"end"===l.types[Be.count]&&"script"===l.lexer[l.begin[Be.count]-1]&&(L(g,{lexer:"script",types:"separator",token:!0===c.correct?";":"x;"}),g.lexer="markup"),L(g,{token:"}",types:"script_end"}),Be.stack.pop();break}q-=1}if("script"===f){if(n=v.slice(S+1,S+9).join(t).toLowerCase(),"</script"===n){if(x=e.join(t).trimEnd(),e.length<1)break;le.test(x)&&ce.test(x)?(L(g,{token:"\x3c!--",types:"comment"}),x=x.replace(le,t).replace(ce,t),Be.external("javascript",x),L(g,{token:"--\x3e"})):Be.external(a,x);break}}else if("style"===f&&h(v[S+1],60)&&h(v[S+2],47)&&(n=v.slice(S+1,S+8).join(t).toLowerCase(),"</style"===n)){if(x=e.join(t).trimEnd(),e.length<1)break;le.test(x)&&ce.test(x)?(L(g,{token:"\x3c!--",types:"comment"}),x=x.replace(le,t).replace(ce,t),Be.external("css",x),L(g,{token:"--\x3e"})):Be.external(a,x);break}}else w===v[S]&&!1===m()&&(h(w,34)||h(w,39)||h(w,96)||h(w,42)&&h(v[S+1],47))?w=t:h(w,96)&&h(v[S],36)&&h(v[S+1],123)&&!1===m()?w="}":h(w,125)&&h(v[S],125)&&!1===m()?w="`":h(w,47)&&(h(v[S],10)||h(v[S],13))||"r"===w&&h(v[S],47)&&!1===m()?w=t:h(w,47)&&h(v[S],62)&&h(v[S-1],45)&&h(v[S-2],45)&&(n=u.slice(S+1,S+11).toLowerCase(),n=n.slice(0,n.length-2),"script"===f&&"</script"===n&&(w=t),n=n.slice(0,n.length-1),"style"===f&&"</style"===n&&(w=t))}if(1==("liquid_start"===l.types[Be.count]&&0===l.token[Be.count].indexOf("<!")&&l.token[Be.count].indexOf("<![")<0&&91===l.token[Be.count].charCodeAt(l.token[Be.count].length-1))&&h(v[S],93)){S-=1,d=0,r=e.join(t).replace(G,t),L(g,{token:r});break}if(!1===_&&e.length>0&&(h(v[S],60)&&k(v[S+1],61)&&!1===y(v[S+1])&&!1===b(v[S+1])||h(v[S],91)&&h(v[S+1],37)||h(v[S],123)&&(!0===p||h(v[S+1],123)||h(v[S+1],37)))){if(S-=1,d=0,r="comment"===Be.stack.token?e.join(t):e.join(t).replace(G,t),g.token=r,c.wrap>0&&!1===c.markup.preserveText){let n=function(){if(h(r[i],32))return a.push(r.slice(0,i)),r=r.slice(i+1),o=r.length,void(i=c.wrap);do{i-=1}while(i>0&&k(r[i],32));if(i>0)a.push(r.slice(0,i)),r=r.slice(i+1),o=r.length,i=c.wrap;else{i=c.wrap;do{i+=1}while(i<o&&k(r[i],32));a.push(r.slice(0,i)),r=r.slice(i+1),o=r.length,i=c.wrap}},i=c.wrap,o=r.length,a=[];if("<a>"===l.token[l.begin[Be.count]]&&"<li>"===l.token[l.begin[l.begin[Be.count]]]&&0===l.lines[l.begin[Be.count]]&&0===Be.lineOffset&&r.length<c.wrap){L(g);break}if(o<c.wrap){L(g);break}if(Be.lineOffset<1&&Be.count>-1){let e=Be.count;do{if(i-=l.token[e].length,l.types[e].indexOf("attribute")>-1&&(i-=1),l.lines[e]>0&&l.types[e].indexOf("attribute")<0)break;e-=1}while(e>0&&i>0);i<1&&(i=r.indexOf(s))}r=e.join(t).replace(U,t).replace(G,t).replace(Z,s);do{n()}while(i<o);r!==t&&k(r,32)&&a.push(r),r=a.join(Be.crlf),r=t+r+t}else{let e=r.indexOf(o);e>-1&&(L(g,{token:r.slice(0,e)}),r=r.slice(e),K.test(r)?g.lines=1:(g.lines=2,r=r.replace(U,t)))}d=0,L(g,{token:r});break}e.push(v[S]),S+=1}while(S<O)}if(S>n&&S<O)if(b(v[S])){let e=S;Be.lineOffset=Be.lineOffset+1;do{h(v[e],10)&&(Be.lineNumber=Be.lineNumber+1,Be.lineOffset=Be.lineOffset+1),e-=1}while(e>n&&b(v[e]))}else Be.lineOffset=0;else(S!==n||S===n&&!1===_)&&(r=e.join(t).replace(G,t),d=0,g.token!==r&&(L(g,{token:r}),Be.lineOffset=0));_=!1}function X(){Be.lineOffset=1;do{if(h(v[S],10)&&(Be.lineIndex=S,Be.lineOffset=Be.lineOffset+1,Be.lineNumber=Be.lineNumber+1),!1===b(v[S+1]))break;S+=1}while(S<O)}("html"===Be.language||"liquid"===Be.language)&&(A="html");do{if(Be.error)return l;if(b(v[S])?X():h(v[S],60)||h(v[S],123)&&(p||h(v[S+1],123)||h(v[S+1],37))?J(t):h(v[S],45)&&h(v[S+1],45)&&h(v[S+2],45)?J("---"):H(),S+=1,S===O&&Be.pairs.size>0&&Be.pairs.has(Be.stack.index)){console.log(Be.pairs);let e=Be.pairs.get(Be.stack.index);2===e.type&&W(105,e)}}while(S<O);return l}function Le(e){return 1===e?Ie():3===e?function(){let{data:e,rules:i,source:a}=Be,l=a.split(t),c=a.length,u=[],p=[],d=0,f=t,g=t;function m(t){Be.push(e,{begin:Be.stack.index,ender:-1,lexer:"style",lines:Be.lineOffset,stack:Be.stack.token,token:g,types:f},t)}function w(e){let t=e;do{e-=1}while(h(l[e],92)&&e>0);return(t-e)%2==1}function x(o){let a=o.replace(/\s*!important/," !important").split(t),l=/-?transition$/.test(e.token[Be.count-2]),c=[],u=/(\s|\(|,)-?0+\.?\d+([a-z]|\)|,|\s)/g,p=/(\s|\(|,)-?\.?\d+([a-z]|\)|,|\s)/g,d=0,f=0,g=t,m=a.length,b=[];function y(e){return!0===i.style.noLeadZero?e.replace(/^-?\D0+(\.|\d)/,(e=>e.replace(/0+/,t))):/0*\./.test(e)?e.replace(/0*\./,"0."):/0+/.test(/\d+/.exec(e)[0])?/^\D*0+\D*$/.test(e)?e.replace(/0+/,"0"):e.replace(/\d+/.exec(e)[0],/\d+/.exec(e)[0].replace(/^0+/,t)):e}function w(e){return e.replace(",",", ")}function x(e){return`${e} `}function v(){let e=d-1,t=e;if(e<1)return!0;do{t-=1}while(t>0&&h(a[t],92));return(e-t)%2==1}if(d<m)do{b.push(a[d]),(k(a[d-1],92)||!1===v())&&(g===t?h(a[d],34)?(g=n,f+=1):h(a[d],39)?(g=r,f+=1):h(a[d],40)?(g=")",f+=1):h(a[d],91)&&(g="]",f+=1):h(a[d],40)&&h(g,41)||h(a[d],91)&&h(g,93)?f+=1:a[d]===g&&(f-=1,0===f&&(g=t))),g===t&&h(a[d],32)&&(b.pop(),c.push(b.join(t)),b=[]),d+=1}while(d<m);if(c.push(b.join(t)),m=c.length,d=0,d<m)do{!0===i.style.noLeadZero&&!0===/^-?0+\.\d+[a-z]/.test(c[d])?c[d]=c[d].replace(/0+\./,"."):!1===i.style.noLeadZero&&/^-?\.\d+[a-z]/.test(c[d])?c[d]=c[d].replace(".","0."):u.test(c[d])||p.test(c[d])?c[d]=c[d].replace(u,y).replace(p,y):/^(0+([a-z]{2,3}|%))$/.test(c[d])&&!1===l?c[d]="0":/^(0+)/.test(c[d])?(c[d]=c[d].replace(/0+/,"0"),/\d/.test(c[d].charAt(1))&&(c[d]=c[d].substr(1))):/^url\((?!('|"))/.test(c[d])&&41===c[d].charCodeAt(c[d].length-1)&&(g=c[d].charAt(c[d].indexOf("url(")+4),"@"!==g&&k(g,40)&&k(g,60)&&("double"===i.style.quoteConvert?c[d]=c[d].replace(/url\(/,'url("').replace(/\)$/,'")'):c[d]=c[d].replace(/url\(/,"url('").replace(/\)$/,"')"))),/^(\+|-)?\d+(\.\d+)?(e-?\d+)?\D+$/.test(c[d])&&(P.css.units.has(c[d].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,t))||(c[d]=c[d].replace(/(\+|-)?\d+(\.\d+)?(e-?\d+)?/,x))),/^\w+\(/.test(c[d])&&")"===c[d].charAt(c[d].length-1)&&(0!==c[d].indexOf("url(")||0===c[d].indexOf("url(")&&c[d].indexOf(s)>0)&&(c[d]=c[d].replace(/,\S/g,w)),d+=1}while(d<m);return g=c.join(s),g.charAt(0)+g.slice(1).replace(/\s*(\/|\+|\*)\s*(\d|\$)/,(function(e){return e=e.replace(/\s*/g,t),/\/\d/.test(e)&&0===o.indexOf("url(")?e:` ${e.charAt(0)} ${e.charAt(1)}`}))}function v(){let o=[],a=[],p=i.style.quoteConvert,v=d,q=0,j=t,O=null,$=!1;function S(){if(a.push(l[v]),b(l[v+1]))do{v+=1}while(v<c&&b(l[v+1]))}if(v<c)do{if(h(l[v],34)||h(l[v],39)?(null===O&&(O=!1),o[o.length-1]!==l[v]||!k(l[v-1],92)&&!1!==w(v-1)?k(o[o.length-1],34)&&k(o[o.length-1],39)&&(k(l[v-1],92)||!1===w(v-1))?(o.push(l[v]),"double"===p?l[v]=n:"single"===p&&(l[v]=r)):h(l[v-1],92)&&"none"!==p?!0===w(v-1)&&("double"===p&&h(l[v],39)||"single"===p&&h(l[v],34))&&a.pop():"double"===p&&h(l[v],34)?l[v]='\\"':"single"===p&&h(l[v],39)&&(l[v]="\\'"):(o.pop(),"double"===p?l[v]=n:"single"===p&&(l[v]=r)),a.push(l[v])):k(l[v-1],92)||!1===w(v-1)?h(l[v],40)?(null===O&&(O=!0),o.push(")"),S()):h(l[v],91)?(O=!1,o.push("]"),S()):(h(l[v],35)||h(l[v],64))&&h(l[v+1],123)?(O=!1,a.push(l[v]),v+=1,o.push("}"),S()):l[v]===o[o.length-1]?(a.push(l[v]),o.pop()):a.push(l[v]):a.push(l[v]),"map"===Be.stack.token&&0===o.length&&(h(l[v+1],44)||h(l[v+1],41))){if(!h(l[v+1],41)||!h(e.token[Be.count],40))break;Be.pop(e),Be.stack.pop(),a.splice(0,0,"(")}if(h(l[v+1],58)){if(q=v,b(l[q]))do{q-=1}while(b(l[q]));j=l.slice(q-6,q+1).join(t),(j.indexOf("filter")===j.length-6||j.indexOf("progid")===j.length-6)&&(j="filter")}if(0===o.length){if(h(l[v+1],59)&&!0===w(v+1)||h(l[v+1],58)&&k(l[v],58)&&k(l[v+2],58)&&"filter"!==j&&"progid"!==j||h(l[v+1],123)||h(l[v+1],125)||h(l[v+1],47)&&(h(l[v+2],42)||h(l[v+2],47))){if(q=a.length-1,b(a[q]))do{q-=1,v-=1,a.pop()}while(b(a[q]));break}if(h(l[v+1],44))break}v+=1}while(v<c);d=v,"map"===Be.stack.token&&h(a[0],40)&&(u[u.length-1]=u[u.length-1]-1),g=a.join(t).replace(/\s+/g,s).replace(/^\s/,t).replace(/\s$/,t),!0===O&&(P.css.atrules(g)&&!0===i.style.atRuleSpace?e.token[Be.count]=e.token[Be.count].replace(/\s*\(/g," (").replace(/\s*\)\s*/g,") ").replace(/,\(/g,", ("):g=g.replace(/\s+\(/g,"(").replace(/\s+\)/g,")").replace(/,\(/g,", (")),"colon"===f&&"start"===e.types[Be.count-1]?P.css.pseudoClasses.has(g)&&(e.token[Be.count]=g=":"+g,f="pseudo",$=!0):Be.count>-1&&0===e.token[Be.count].indexOf("extend(")?f="pseudo":!0===O&&!1===y(g.charAt(0))&&!1===/^rgba?\(/.test(g)&&0!==g.indexOf("url(")&&(g.indexOf(s)<0||g.indexOf(s)>g.indexOf("("))&&")"===g.charAt(g.length-1)?(h(e.token[Be.count],58)?f="value":(g=g.replace(/,\u0020?/g,", "),f="function"),g=x(g)):Be.count>-1&&r.indexOf(e.token[Be.count].charAt(0))>-1&&"variable"===e.types[Be.count]?f="item":h(a[0],64)||"$"===a[0]?("colon"!==e.types[Be.count]||"css"!==i.language||"property"!==e.types[Be.count-1]&&"variable"!==e.types[Be.count-1]?Be.count>-1&&(f="item",j=e.token[Be.count],v=j.indexOf("("),h(j[j.length-1],41)&&v>0&&(j=j.slice(v+1,j.length-1),e.token[Be.count]=e.token[Be.count].slice(0,v+1)+x(j)+")")):f="value",g=x(g)):f="item",!1===$?m(t):$=!1}function q(n){let r=Be.count,o=0,a=t,c=[];function u(){if(!(Be.count<0)){if(r>0&&("comment"===e.types[r]||"ignore"===e.types[r]))do{r-=1,c.push(e.token[r])}while(r>0&&"style"===e.lexer[r]&&("comment"===e.types[r]||"ignore"===e.types[r]));if(o=r-1,o>0&&("comment"===e.types[o]||"ignore"===e.types[o]))do{o-=1}while(o>0&&"style"===e.lexer[r]&&("comment"===e.types[o]||"ignore"===e.types[o]));o<0&&(o=0),r<0&&(r=0),a=e.token[r][0]}}function p(e){return e.replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ")}function g(n){let o=n,a=e.begin[o];if(e.token[n]=e.token[n].replace(/\s*&/," &").replace(/\s*&\s*{/," & {").replace(/\s*>\s*/g," > ").replace(/\s*\+\s*/g," + ").replace(/:\s+/g,": ").replace(/^\s+/,t).replace(/\s+$/,t).replace(/\s+::\s+/,"::"),k(e.token[o],44)&&"comment"!==e.types[o]&&(e.types[o]="selector"),h(e.token[o-1],44)||h(e.token[o-1],58)||"comment"===e.types[o-1]||"pseudo"===e.types[o-1])if("colon"!==e.types[o-1]||"selector"!==e.types[o]&&"at_rule"!==e.types[o]||"template"!==e.types[o-2]&&"liquid_start"!==e.types[o-2]&&"liquid_else"!==e.types[o-2]&&"liquid_end"!==e.types[o-2])if("pseudo"===e.types[o-1])e.token[o-1]=`${e.token[o-1]}${e.token[o]}`,e.types[o-1]="selector",Be.splice({data:e,howmany:1,index:o});else if("comment"===e.types[o-2])e.token[o-1]=p(`${e.token[o-1]}${e.token[o]}`),e.types[o-1]="selector",Be.splice({data:e,howmany:1,index:o});else do{if(o-=1,e.begin[o]!==a)break;if(h(e.token[o],59))break;k(e.token[o],44)&&"comment"!==e.types[o]&&(e.types[o]="selector"),":"===e.token[o]&&k(e.token[o-1],59)&&(e.token[o-1]=p(`${e.token[o-1]}:${e.token[o+1]}`),Be.splice({data:e,howmany:2,index:o}))}while(o>0);else e.token[o-1]=":"+e.token[o]+s,e.types[o-1]="selector",Be.splice({data:e,howmany:1,index:o});if(o=Be.count,!0===i.style.sortSelectors&&h(e.token[o-1],44)){let t=[e.token[o]];do{if(o-=1,"comment"===e.types[o]||"ignore"===e.types[o])do{o-=1}while(o>0&&("comment"===e.types[o]||"ignore"===e.types[o]));h(e.token[o],44)&&(o-=1),t.push(e.token[o])}while(o>0&&(h(e.token[o-1],44)||"selector"===e.types[o-1]||"comment"===e.types[o-1]||"ignore"===e.types[o-1]));t.sort(),o=Be.count,e.token[o]=t.pop();do{if(o-=1,"comment"===e.types[o]||"ignore"===e.types[o])do{o-=1}while(o>0&&("comment"===e.types[o]||"ignore"===e.types[o]));h(e.token[o],44)&&(o-=1),e.token[o]=t.pop()}while(o>0&&(h(e.token[o-1],44)||"selector"===e.types[o-1]||"comment"===e.types[o-1]||"ignore"===e.types[o-1]))}r=Be.count,u()}u(),"start"===n&&("value"===e.types[r]||"variable"===e.types[r])&&(e.types[r]="item"),"style"!==e.lexer[Be.count-1]||o<0?"colon"===n?h(a,36)||h(a,64)?e.types[r]="variable":"global"!==e.stack[r]&&("comment"!==e.types[r]||"ignore"!==e.types[r])&&(e.types[r]="property"):"style"===e.lexer[r]&&(e.types[r]="selector",g(r)):"start"===n&&"function"===e.types[r]&&"style"===e.lexer[r]?(e.types[r]="selector",g(r)):"item"===e.types[r]&&"style"===e.lexer[r]&&("start"===n?(g(r),e.types[r]="selector",":"===e.token[r]&&(e.types[o]="selector"),e.token[r].indexOf("=“")>0?Be.error=`Invalid Quote (“, \\201c) used on line number ${Be.lineNumber}`:e.token[r].indexOf("=”")>0&&(Be.error=`Invalid Quote (”, \\201d) used on line number ${Be.lineNumber}`)):"end"===n?(h(a,36)||h(a,64)?e.types[r]="variable":e.types[r]="value",e.token[r]=x(e.token[r])):"separator"===n?"colon"===e.types[o]||h(e.token[o],44)||h(e.token[o],123)?(k(l[d],59)&&("selector"===e.types[o]||"at_rule"===e.types[o]||h(e.token[o],123))?(e.types[r]="selector",g(r)):h(e.token[r],36)||h(e.token[r],64)?e.types[r]="variable":e.types[r]="value",e.token[r]=x(e.token[r]),"“"===e.token[r].charAt(0)?Be.error=`Invalid Quote (“, \\201c) used on line number ${Be.lineNumber}`:"”"===e.token[r].charAt(0)&&(Be.error=`Invalid (”, \\201d) used on line number ${Be.lineNumber}`)):h(a,36)||h(a,64)?e.types[r]="variable":"value"===e.types[o]||"variable"===e.types[o]?(e.token[o]=e.token[o]+e.token[r],Be.pop(e)):e.types[r]="value":"colon"===n?h(a,36)||h(a,64)?e.types[r]="variable":e.types[r]="property":h(e.token[o],64)&&("variable"!==e.types[o-2]&&"property"!==e.types[o-2]||"separator"===e.types[o-1])?(e.types[o]="variable",f="variable",e.token[o]=x(e.token[o])):"comment"===n&&(h(a,46)||h(a,35))&&(e.types[r]="selector"))}function j(){let t=Be.count;do{t-=1}while(t>0&&"comment"===e.types[t]);";"!==e.token[t]&&Be.splice({data:e,howmany:0,index:t+1,record:{begin:Be.stack.index,ender:-1,lexer:"style",lines:Be.lineOffset,stack:Be.stack.token,token:";",types:"separator"}})}function O(o,a){let u=[],k=t,y=t,w=0,x=o.length;function v(n){let r=Be.count>0?e.types[Be.count-1]:e.types[Be.count];"item"===f&&("colon"===r?e.types[Be.count]="value":q(r)),h(l[d+1],32),f=n,g=xe(g,y,i.liquid),f.indexOf("start")>-1||f.indexOf("else")>-1?m(g):m(t)}if(p[p.length-1]=!0,d<c)do{if(u.push(l[d]),k===t){if(h(l[d],34))k=n;else if(h(l[d],39))k=r;else if(h(l[d],47))h(l[d+1],47)?k="/":h(l[d+1],42)&&(k="*");else if(l[d+1]===a.charAt(0)){do{w+=1,d+=1,u.push(l[d])}while(d<c&&w<a.length&&l[d+1]===a.charAt(w));if(w===a.length){if(k=u.join(t),b(k.charAt(x)))do{x+=1}while(b(k.charAt(x)));w=x;do{w+=1}while(w<a.length&&!b(k.charAt(w)));if(w===k.length&&(w-=a.length),"{%"===o&&(y=F(k)),"item"===f&&"colon"===e.types[Be.count-1]&&("property"===e.types[Be.count-2]||"variable"===e.types[Be.count-2]))return f="value",e.types[Be.count]="value",void(!0===Number.isNaN(Number(e.token[Be.count]))&&")"!==e.token[Be.count].charAt(e.token[Be.count].length-1)?e.token[Be.count]=e.token[Be.count]+k:e.token[Be.count]=e.token[Be.count]+s+k);if(g=k,"{%"===o){let e=Array.from(P.liquid.tags),t=e.length-1;if(y=y.slice(0,y.indexOf(s)),y.indexOf("(")>0&&(y=y.slice(0,y.indexOf("("))),P.liquid.else.has(y))return void v("liquid_else");if(t=e.length-1,t>-1)do{if(y===e[t])return void v("liquid_start");if(y==="end"+e[t])return void v("liquid_end");t-=1}while(t>-1)}else if("{{"===o){let e=k.slice(2),t=e.length,n=0;do{n+=1}while(n<t&&!1===b(e.charAt(n))&&40!==e.charCodeAt(x));if(e=e.slice(0,n),h(e[e.length-2],125)&&(e=e.slice(0,e.length-2)),"end"===e)return void v("liquid_end")}return void v("liquid")}w=0}}else k===l[d]&&(h(k,34)||h(k,39)||h(k,47)&&(h(l[d],13)||h(l[d],10))||h(k,42)&&h(l[d+1],47))&&(k=t);d+=1}while(d<c)}function $(e){let n;e?(n=fe({chars:l,start:d,end:c,lexer:"style",begin:"//",ender:o}),g=n[0],f=ne.test(g)?"ignore":"comment"):(n=he({chars:l,start:d,end:c,lexer:"style",begin:"/*",ender:"*/"}),g=n[0],f=ie.test(g)?"ignore":"comment"),m(t),d=n[1]}function S(){let n=Be.lineOffset,i={data:{margin:[t,t,t,t,!1],padding:[t,t,t,t,!1]},last:{margin:0,padding:0},removes:[]},r=Be.stack.index;function o(n){if(e.token[a-2]===n){let r=e.token[a].replace(/\s*!important\s*/g,t).split(s),o=r.length;e.token[a].indexOf("!important")>-1&&(i.data[n[4]]=!0),o>3?(i.data[n][0]===t&&(i.data[n][0]=r[0]),i.data[n][1]===t&&(i.data[n][1]=r[1]),i.data[n][2]===t&&(i.data[n][2]=r[2]),i.data[n][3]===t&&(i.data[n][3]=r[3])):o>2?(i.data[n][0]===t&&(i.data[n][0]=r[0]),i.data[n][1]===t&&(i.data[n][1]=r[1]),i.data[n][2]===t&&(i.data[n][2]=r[2]),i.data[n][3]===t&&(i.data[n][3]=r[1])):o>1?(i.data[n][0]===t&&(i.data[n][0]=r[0]),i.data[n][1]===t&&(i.data[n][1]=r[1]),i.data[n][2]===t&&(i.data[n][2]=r[0]),i.data[n][3]===t&&(i.data[n][3]=r[1])):(i.data[n][0]===t&&(i.data[n][0]=r[0]),i.data[n][1]===t&&(i.data[n][1]=r[0]),i.data[n][2]===t&&(i.data[n][2]=r[0]),i.data[n][3]===t&&(i.data[n][3]=r[0]))}else if(e.token[a-2]===`${n}-bottom`)i.data[n][2]===t&&(i.data[n][2]=e.token[a]);else if(e.token[a-2]===`${n}-left`)i.data[n][3]===t&&(i.data[n][3]=e.token[a]);else if(e.token[a-2]===`${n}-right`)i.data[n][1]===t&&(i.data[n][1]=e.token[a]);else{if(e.token[a-2]!==`${n}-top`)return;i.data[n][0]===t&&(i.data[n][0]=e.token[a])}i.removes.push([a,n]),i.last[n]=a}let a=Be.count,l=!1;do{a-=1,e.begin[a]===r?"value"===e.types[a]&&"property"===e.types[a-2]&&(0===e.token[a-2].indexOf("margin")?o("margin"):0===e.token[a-2].indexOf("padding")&&o("padding")):(l=!0,a=e.begin[a])}while(a>r);(function(){let n=0,s=t,o=/^(0+([a-z]+|%))/,a=i.removes.length,c=i.data.margin[0]!==t&&i.data.margin[1]!==t&&i.data.margin[2]!==t&&i.data.margin[3]!==t,u=i.data.padding[0]!==t&&i.data.padding[1]!==t&&i.data.padding[2]!==t&&i.data.padding[3]!==t;function p(a){if(!0===o.test(i.data[a][0])&&(i.data[a][0]="0"),!0===o.test(i.data[a][1])&&(i.data[a][1]="0"),!0===o.test(i.data[a][2])&&(i.data[a][2]="0"),!0===o.test(i.data[a][3])&&(i.data[a][3]="0"),s=i.data[a][0]===i.data[a][1]&&i.data[a][0]===i.data[a][2]&&i.data[a][0]===i.data[a][3]?i.data[a][0]:i.data[a][0]===i.data[a][2]&&i.data[a][1]===i.data[a][3]&&i.data[a][0]!==i.data[a][1]?`${i.data[a][0]} ${i.data[a][1]}`:i.data[a][1]===i.data[a][3]&&i.data[a][0]!==i.data[a][2]?`${i.data[a][0]} ${i.data[a][1]} ${i.data[a][2]}`:`${i.data[a][0]} ${i.data[a][1]} ${i.data[a][2]} ${i.data[a][3]}`,!0===i.data[a[4]]&&(s=`${s.replace(" !important",t)} !important`),i.last[a]>Be.count){n=r<1?1:r+1;do{if(e.begin[n]===r&&"value"===e.types[n]&&0===e.token[n-2].indexOf(a)){i.last[a]=n;break}n+=1}while(n<Be.count)}e.token[i.last[a]]=s,e.token[i.last[a]-2]=a}if(a>1&&(!0===c||!0===u))do{i.removes[n][0]!==i.last.margin&&i.removes[n][0]!==i.last.padding&&(!0===c&&"margin"===i.removes[n][1]||!0===u&&"padding"===i.removes[n][1])&&Be.splice({data:e,howmany:"separator"===e.types[i.removes[n][0]+1]?4:3,index:i.removes[n][0]-2}),n+=1}while(n<a-1);!0===c&&p("margin"),!0===u&&p("padding"),!0===l&&(r<0?Be.error="Brace mismatch. There appears to be more closing braces than starting braces.":I(r,Be.count+1))})(),Be.lineOffset=n}function _(){Be.lineOffset=1;do{if(h(l[d],10)&&(Be.lineIndex=d,Be.lineOffset=Be.lineOffset+1,Be.lineNumber=Be.lineNumber+1),!1===b(l[d+1]))break;d+=1}while(d<c)}do{b(l[d])?_():h(l[d],47)&&h(l[d+1],42)?$(!1):h(l[d],47)&&h(l[d+1],47)?$(!0):h(l[d],123)&&h(l[d+1],37)?O("{%","%}"):h(l[d],123)&&h(l[d+1],123)?O("{{","}}"):h(l[d],123)||h(l[d],40)&&h(e.token[Be.count],58)&&"variable"===e.types[Be.count-1]?(q("start"),f="start",g=l[d],h(l[d],40)?(m("map"),u.push(0)):"at_rule"===e.types[Be.count]||"selector"===e.types[Be.count]||"variable"===e.types[Be.count]?h(e.token[Be.count],64)?(e.types[Be.count]="at_rule",m(e.token[Be.count])):m(e.token[Be.count]):"colon"===e.types[Be.count]?m(e.token[Be.count-1]):m("block"),p.push(!1)):h(l[d],125)||")"===l[d]&&"map"===Be.stack.token&&0===u[u.length-1]?h(l[d],125)&&h(e.token[Be.count-1],123)&&"item"===e.types[Be.count]&&void 0!==e.token[Be.count-2]&&64===e.token[Be.count-2].charCodeAt(e.token[Be.count-2].length-1)?(e.token[Be.count-2]=e.token[Be.count-2]+"{"+e.token[Be.count]+"}",Be.pop(e),Be.pop(e),Be.stack.pop()):(h(l[d],41)&&u.pop(),q("end"),h(l[d],125)&&k(e.token[Be.count],59)&&("value"===e.types[Be.count]||"function"===e.types[Be.count]||"variable"===e.types[Be.count]&&(h(e.token[Be.count-1],58)||h(e.token[Be.count-1],59))?(g=!0===i.correct?";":"x;",f="separator",m(t)):"comment"===e.types[Be.count]&&j()),p.pop(),g=l[d],f="end",h(l[d],125)&&S(),!0===i.style.sortProperties&&h(l[d],125)&&A(e),m(t)):h(l[d],59)||h(l[d],44)?("selector"===e.types[Be.count-1]||"at_rule"===e.types[Be.count-1]||"function"!==e.types[Be.count]&&h(e.token[Be.count-1],125)?q("start"):q("separator"),"separator"!==e.types[Be.count]&&!0===w(d)&&(g=l[d],f="separator",m(t))):Be.count>-1&&h(l[d],58)&&"end"!==e.types[Be.count]?(q("colon"),g=":",f="colon",m(t)):("map"===Be.stack.token&&h(l[d],40)&&(u[u.length-1]=u[u.length-1]+1),v()),d+=1}while(d<c);return!0===i.style.sortProperties&&A(e),e}():2===e?function(){let e,i,s,{data:a,references:l,rules:c,source:u}=Be,p="json"===Be.language?c.json:c.script,d=q(u)?u:u.split(t),f=d.length,g=[],m=[],w=[],x=[0,t],v=[!1],j={count:[],index:[],word:[]},O=-1,$=0,S=t,_=t,C=[],L=0,T=-1,N=-1,P=[],F=["autoescape","block","capture","case","comment","embed","filter","for","form","if","macro","paginate","raw","sandbox","spaceless","tablerow","unless","verbatim"];function z(){j.count.pop(),j.index.pop(),j.word.pop(),O-=1}function E(e=t){let n={begin:Be.stack.index,ender:-1,lexer:"script",lines:Be.lineOffset,stack:Be.stack.token,token:S,types:_};Be.push(a,n,e)}function M(e,n){let i=!0===n?$:$+1,r=t;if(("number"!=typeof e||e<1)&&(e=1),h(d[$],47)&&(h(d[$+1],47)?r=o:h(d[$+1],42)&&(r="/")),i<f)do{if(!1===b(d[i])){if(h(d[i],47)&&(r===t?h(d[i+1],47)?r=o:h(d[i+1],42)&&(r="/"):h(r,47)&&h(d[i-1],42)&&(r=t)),r===t&&d[i-1]+d[i]!=="*/")return d.slice(i,i+e).join(t)}else h(r,10)&&h(d[i],10)&&(r=t);i+=1}while(i<f);return t}function W(e){let t=e;do{e-=1}while(h(d[e],92)&&e>0);return(t-e)%2==1}function R(e){let n=M(1,!1),i=0===Be.stack.length?t:Be.stack.token,r={begin:a.begin[Be.count],ender:a.begin[Be.count],lexer:a.lexer[Be.count],lines:a.lines[Be.count],stack:a.stack[Be.count],token:a.token[Be.count],types:a.types[Be.count]};if(te.test(S)||"start"===_||"type_start"===_||"json"===Be.language||h(n,123)||h(r.token,59)||h(r.token,44)||"class"===r.stack||"map"===r.stack||"attribute"===r.stack||"generic"===a.types[r.begin-1]||"initializer"===i||h(r.token,125)&&"global"===a.stack[r.begin-1]&&"operator"!==a.types[r.begin-1]&&r.stack===a.stack[Be.count-1]||"array"===r.stack&&k(r.token,93)||h(a.token[a.begin[Be.count]],123)&&"data_type"===r.stack||void 0!==r.types&&r.types.indexOf("liquid")>-1&&r.types.indexOf("template_string")<0||h(n,59)&&!1===e||"script"!==a.lexer[Be.count-1]&&($<f&&f===u.length-1||f<u.length-1))return;let s=0;if(h(r.token,125)&&("function"===r.stack||"if"===r.stack||"else"===r.stack||"for"===r.stack||"do"===r.stack||"while"===r.stack||"switch"===r.stack||"class"===r.stack||"try"===r.stack||"catch"===r.stack||"finally"===r.stack||"block"===r.stack)){if("function"!==r.stack||"data_type"!==a.stack[r.begin-1]&&"type"!==a.types[r.begin-1])s=a.begin[r.begin-1];else{s=r.begin;do{s-=1}while(s>0&&k(a.token[s],41)&&"arguments"!==a.stack[s]);s=a.begin[s]}if(!h(a.token[s],40))return;if(s-=1,"function"===a.token[s-1]&&(s-=1),"object"===a.stack[s-1]||"switch"===a.stack[s-1]||k(a.token[s-1],61)&&k(a.token[s-1],58)&&"return"!==a.token[s-1])return}if(!("comment"===r.types||"method"===i||"paren"===i||"expression"===i||"array"===i||"object"===i||"switch"===i&&"method"!==r.stack&&h(a.token[a.begin[Be.count]],40)&&"return"!==a.token[a.begin[Be.count]-1]&&"operator"!==a.types[a.begin[Be.count]-1]||"expression"===a.stack[Be.count]&&("while"!==a.token[a.begin[Be.count]-1]||"while"===a.token[a.begin[Be.count]-1]&&"do"!==a.stack[a.begin[Be.count]-2])||n!==t&&"=<>+*?|^:&%~,.()]".indexOf(n)>-1&&!1===e)){if("comment"===r.types){s=Be.count;do{s-=1}while(s>0&&"comment"===a.types[s]);if(s<1)return;r.token=a.token[s],r.types=a.types[s],r.stack=a.stack[s]}void 0===r.token||"start"===r.types||"separator"===r.types||"operator"===r.types&&"++"!==r.token&&"--"!==r.token||"x}"===r.token||"var"===r.token||"let"===r.token||"const"===r.token||"else"===r.token||0===r.token.indexOf("#!/")||"instanceof"===r.token||"method"===r.stack&&("function"===a.token[r.begin-1]||"function"===a.token[r.begin-2])||("list"===p.variableList&&(j.index[O]=Be.count),S=!0===c.correct?";":"x;",_="separator",s=Be.lineOffset,Be.lineOffset=0,E(),Be.lineOffset=s,X())}}function B(){let e=Be.count;if("comment"===a.types[e])do{e-=1}while(e>0&&"comment"===a.types[e]);"from"===a.token[e]&&(e-=2),"x;"===a.token[e]&&Be.splice({data:a,howmany:1,index:e})}function D(){let e=Be.count;do{e-=1}while(e>-1&&"x}"===a.token[e]);if("else"===a.stack[e])return E();e+=1,Be.splice({data:a,howmany:0,index:e,record:{begin:a.begin[e],ender:-1,lexer:"script",lines:Be.lineOffset,stack:a.stack[e],token:S,types:_}}),E()}function J(){let e=[d[$]],n=0,i=h(e[0],46),r=/zz/;if($<f-2&&"0"===d[$]&&("x"===d[$+1]?r=/[0-9a-fA-F]/:"o"===d[$+1]?r=/[0-9]/:"b"===d[$+1]&&(r=/0|1/),r.test(d[$+2]))){e.push(d[$+1]),n=$+1;do{n+=1,e.push(d[n])}while(r.test(d[n+1]));return $=n,e.join(t)}if(n=$+1,n<f)do{if(!(y(d[n])||h(d[n],46)&&!1===i))break;e.push(d[n]),h(d[n],46)&&(i=!0),n+=1}while(n<f);if(n<f-1&&(y(d[n-1])||y(d[n-2])&&(h(d[n-1],45)||h(d[n-1],43)))&&("e"===d[n]||"E"===d[n])&&(e.push(d[n]),(h(d[n+1],45)||h(d[n+1],43))&&(e.push(d[n+1]),n+=1),i=!1,n+=1,n<f))do{if(!(y(d[n])||h(d[n],46)&&!1===i))break;e.push(d[n]),h(d[n],46)&&(i=!0),n+=1}while(n<f);return $=n-1,e.join(t)}function V(){let e=0,n=0,i=f,r=t,s=["=","<",">","+","*","?","|","^",":","&","%","~"],o=s.length;if(T>-1&&ee(),h(d[$],47)&&Be.count>-1&&("word"!==_&&"reference"!==_||"typeof"===S||"return"===S||"else"===S)&&"number"!==_&&"string"!==_&&"end"!==_)return"return"===S||"typeof"===S||"else"===S||"word"!==_?(S=function(){let e=0,n=0,i=$+1,r=!1,s=f,o=["/"];if(i<s)do{if(o.push(d[i]),(k(d[i-1],92)||h(d[i-2],92))&&(h(d[i],91)&&(r=!0),h(d[i],93)&&(r=!1)),h(d[i],47)&&!1===r){if(!h(d[i-1],92))break;if(n=0,e=i-1,e>0)do{if(!h(d[e],92))break;n+=1,e-=1}while(e>0);if(n%2==0)break}i+=1}while(i<s);return"g"===d[i+1]||"i"===d[i+1]||"m"===d[i+1]||"y"===d[i+1]||"u"===d[i+1]?(o.push(d[i+1]),d[i+2]===d[i+1]||"g"!==d[i+2]&&"i"!==d[i+2]&&"m"!==d[i+2]&&"y"!==d[i+2]&&"u"!==d[i+2]?$=i+1:(o.push(d[i+2]),d[i+3]===d[i+1]||d[i+3]===d[i+2]||"g"!==d[i+3]&&"i"!==d[i+3]&&"m"!==d[i+3]&&"y"!==d[i+3]&&"u"!==d[i+3]?$=i+2:(o.push(d[i+3]),d[i+4]===d[i+1]||d[i+4]===d[i+2]||d[i+4]===d[i+3]||"g"!==d[i+4]&&"i"!==d[i+4]&&"m"!==d[i+4]&&"y"!==d[i+4]&&"u"!==d[i+4]?$=i+3:(o.push(d[i+4]),d[i+5]===d[i+1]||d[i+5]===d[i+2]||d[i+5]===d[i+3]||d[i+5]===d[i+4]||"g"!==d[i+5]&&"i"!==d[i+5]&&"m"!==d[i+5]&&"y"!==d[i+5]&&"u"!==d[i+5]?$=i+4:(o.push(d[i+4]),$=i+5))))):$=i,o.join(t)}(),_="regex"):(S="/",_="operator"),E(),"regex";if(h(d[$],63)&&("+-*/.?".indexOf(d[$+1])>-1||h(d[$+1],58)&&s.join(t).indexOf(d[$+2])<0)&&(h(d[$+1],46)&&!1===y(d[$+2])?r="?.":h(d[$+1],63)&&(r="??"),r===t))return"?";if(h(d[$],58)&&"+-*/".indexOf(d[$+1])>-1)return":";if($<f-1){if(k(d[$],60)&&h(d[$+1],60))return d[$];if(h(d[$],33)&&h(d[$+1],47))return"!";if(h(d[$],45)&&(v[v.length-1]=!1,h(d[$+1],45)?r="--":h(d[$+1],61)?r="-=":h(d[$+1],62)&&(r="->"),r===t))return"-";if(h(d[$],43)&&(v[v.length-1]=!1,h(d[$+1],43)?r="++":h(d[$+1],61)&&(r="+="),r===t))return"+";if(h(d[$],61)&&k(d[$+1],61)&&k(d[$+1],33)&&k(d[$+1],62))return v[v.length-1]=!1,"="}if(h(d[$],59))if("typescript"===Be.language)if("arguments"===a.stack[Be.count])"?"===a.token[Be.count]&&(Be.pop(a),r="?:",$-=1),v[v.length-1]=!0;else if(!h(S,41)||"function"!==a.token[a.begin[Be.count]-1]&&"function"!==a.token[a.begin[Be.count]-2]){if("reference"===_){e=Be.count;let t=!1;do{if(a.begin[e]===a.begin[Be.count]){if(e<Be.count&&":"===a.token[e]&&"type"!==a.types[e+1]&&(t=!0),"?"===a.token[e]&&!1===t||";"===a.token[e]||"x;"===a.token[e])break;if("var"===a.token[e]||"let"===a.token[e]||"const"===a.token[e]||"type"===a.types[e]){v[v.length-1]=!0;break}}else{if("type_end"===a.types[e]){v[v.length-1]=!0;break}e=a.begin[e]}e-=1}while(e>a.begin[Be.count])}}else v[v.length-1]=!0;else"["===a.token[Be.count-1]&&("word"===a.types[Be.count]||"reference"===a.types[Be.count])&&(Be.stack.update("attribute"),a.stack[Be.count]="attribute");if(r===t)if(h(d[$+1],43)&&h(d[$+2],43)||h(d[$+1],45)&&h(d[$+2],45))r=d[$];else{let a=[d[$]];if(e=$+1,e<i)do{if(h(d[e],43)&&h(d[e+1],43)||h(d[e],45)&&h(d[e+1],45))break;if(n=0,n<o)do{if(d[e]===s[n]){a.push(s[n]);break}n+=1}while(n<o);if(n===o)break;e+=1}while(e<i);r=a.join(t)}if($+=r.length-1,"=>"===r&&h(S,41)){e=Be.count,i=a.begin[e];do{a.begin[e]===i&&(a.stack[e]="method"),e-=1}while(e>i-1)}return r}function H(){let e=[d[$]];if($+=1,$<f)do{if(e.push(d[$]),h(d[$],96)&&(k(d[$-1],92)||!W($-1))||h(d[$-1],36)&&h(d[$],123)&&(k(d[$-2],92)||!W($-2)))break;$+=1}while($<f);return e.join(t)}function Z(){let e=0,n=!1,i=!1,r=0,s=0,o=0,l=t,c=t,u=t,p=[],g=v[v.length-1],m="0123456789=<>+-*?|^:&.,;%(){}[]~";function w(){h(S,40)&&Be.stack.update("paren",Be.count),Be.external("html",p.join(t))}if(T>-1&&ee(),c=Be.count>0?a.token[Be.count-1]:t,u=Be.count>0?a.types[Be.count-1]:t,l=M(1,!1),"jsx"!==Be.language&&"tsx"!==Be.language&&!1===y(l)&&("function"===S||"=>"===c||"void"===c||"."===c||"return"===S||"operator"===_||"arguments"===a.stack[Be.count]||"type"===_&&"type"===c||"reference"===_&&("operator"===u||"function"===c||"class"===c||"new"===c)||"type"===_&&"operator"===u)){let n=[],i=0,r=0;e=$;do{if(n.push(d[e]),h(d[e],60))i+=1;else if(h(d[e],62)&&(i-=1,i<1))break;e+=1}while(e<f);if(r=$,$=e,l=M(1,!1),h(d[e],62)&&(!0===g||"=>"===c||"."===c||"operator"!==u||"operator"===u&&(h(l,40)||h(l,61))))return _="generic",S=n.join(t).replace(/^<\s+/,"<").replace(/\s+>$/,">").replace(/,\s*/g,", "),void E();$=r}if(e=Be.count,"comment"===a.types[e])do{e-=1}while(e>0&&"comment"===a.types[e]);if(!1===g&&">"!==M(1,!1)&&(k(d[$],60)&&m.indexOf(d[$+1])>-1||"++"===a.token[e]||"--"===a.token[e]||!0===b(d[$+1])||!0===y(d[$+1])&&("operator"===_||"string"===_||"number"===_||"reference"===_||"word"===_&&"return"!==S)))return _="operator",S=V(),E();if("typescript"!==Be.language&&("return"===a.token[e]||"operator"===a.types[e]||"start"===a.types[e]||"separator"===a.types[e]||"jsx_attribute_start"===a.types[e]||h(a.token[e],125)&&"global"===Be.stack.token)){_="markup",Be.language="jsx";do{if(p.push(d[$]),h(d[$],123))s+=1,n=!0;else if(h(d[$],125))s-=1,0===s&&(n=!1);else if(h(d[$],60)&&!1===n){if(h(d[$+1],60))do{p.push(d[$]),$+=1}while($<f&&h(d[$+1],60));r+=1,h(M(1,!1),47)&&(i=!0)}else if(h(d[$],62)&&!1===n){if(h(d[$+1],62))do{p.push(d[$]),$+=1}while(h(d[$+1],62));if(r-=1,!0===i?o-=1:k(d[$-1],47)&&(o+=1),0===r&&0===s&&o<1){if(l=M(2,!1),k(l,60))return w();if(!(h(l,60)&&m.indexOf(l.charAt(1))<0&&!1===b(l.charAt(1))))return w();e=$+1;do{if(e+=1,h(d[e],62)||b(d[e-1])&&m.indexOf(d[e])<0)break;if(m.indexOf(d[e])>-1)return w()}while(e<f)}i=!1}$+=1}while($<f);return w()}_="operator",S=V(),E()}function U(){let n=!0,i="+",r=t,s=t,o=t,l=t,u=0,p=0,f=0,g=[];function m(){p=a.begin[p]-1,"end"===a.types[p]?m():h(a.token[p-1],46)&&b()}function b(){p-=2,"end"===a.types[p]?m():h(a.token[p-1],46)&&b()}function y(){let e=0;if(e<g.length)do{Be.push(a,g[e],t),e+=1}while(e<g.length)}function w(e){return{begin:a.begin[e],ender:a.ender[e],lexer:a.lexer[e],lines:a.lines[e],stack:a.stack[e],token:a.token[e],types:a.types[e]}}if(r=a.token[Be.count],s=a.token[Be.count-1],o=a.token[Be.count-2],"++"!==r&&"--"!==r&&"++"!==s&&"--"!==s&&(p=Be.count,"end"===a.types[p]?m():h(a.token[p-1],46)&&b()),"++"===a.token[p-1]||"--"===a.token[p-1]){if("startendoperator".indexOf(a.types[p-2])>-1)return;if(f=p,f<Be.count+1){do{g.push(w(f)),f+=1}while(f<Be.count+1);Be.splice({data:a,howmany:Be.count-p,index:p})}}else{if(!1===c.correct||"++"!==r&&"--"!==r&&"++"!==s&&"--"!==s)return;if(l=M(1,!1),"++"!==r&&"--"!==r||!(h(d[$],59)||h(l,59)||h(d[$],125)||h(l,125)||h(d[$],41)||h(l,41))){if(!(h(o,91)||h(o,59)||h(o,123)||h(o,125)||h(o,40)||h(o,41)||h(o,44)||"return"===o||"x;"===o))return;if("++"===r||"--"===r){if(h(o,91)||h(o,40)||h(o,44)||"return"===o)return;"--"===r&&(i="-"),n=!1}else("--"===s||"--"===r)&&(i="-")}else{if(i=a.stack[Be.count],"array"===i||"method"===i||"object"===i||"paren"===i||"notation"===i||"while"===a.token[a.begin[Be.count]-1]&&"while"!==i)return;f=Be.count;do{if(f-=1,"return"===a.token[f])return;if("end"===a.types[f])do{f=a.begin[f]-1}while("end"===a.types[f]&&f>0)}while(f>0&&(h(a.token[f],46)||"word"===a.types[f]||"reference"===a.types[f]||"end"===a.types[f]));if(h(a.token[f],44)&&k(d[$],59)&&k(l,59)&&k(d[$],125)&&k(l,125)&&k(d[$],41)&&k(l,41))return;if("operator"===a.types[f]){if("switch"!==a.stack[f]||!h(a.token[f],58))return;do{if(f-=1,"start"===a.types[f]){if(u-=1,u<0)break}else"end"===a.types[f]&&(u+=1);if(h(a.token[f],63)&&0===u)return}while(f>0)}n=!1,i="--"===r?"-":"+"}if(!1===n&&(e=Be.pop(a)),p=Be.count,"end"===a.types[p]?m():h(a.token[p-1],46)&&b(),f=p,f<Be.count+1)do{g.push(w(f)),f+=1}while(f<Be.count+1)}!0===n?(Be.splice({data:a,howmany:1,index:p-1}),S="=",_="operator",E(),y(),S=i,_="operator",E(),S="1",_="number",E()):(S="=",_="operator",E(),y(),S=i,_="operator",E(),S="1",_="number",E()),S=a.token[Be.count],_=a.types[Be.count],h(l,125)&&k(d[$],59)&&R(!1)}function G(e,i,s){let l,u=0,g=!1,m=!1,y=[e],w=i.split(t),x=w.length,v=$,q=$+e.length,j=p.quoteConvert;function O(){let e=0;if(y=[],_=s,u=$,"string"===s&&b(d[u+1])){e=1;do{u+=1,h(d[u],10)&&(e+=1)}while(u<f&&!0===b(d[u+1]));Be.lineOffset=e}}function A(){let p=t;if(h(e,34)&&"single"===j?(y[0]=r,y[y.length-1]=r):h(e,39)&&"double"===j?(y[0]=n,y[y.length-1]=n):!0===g&&(p=y[y.length-1],y.pop(),y.pop(),y.push(p)),$=u,i===o&&($-=1,y.pop()),S=y.join(t),(h(e,34)||h(e,39)||"{{"===e||"{%"===e)&&(S=function(e){if("javascript"!==Be.language&&"typescript"!==Be.language&&"jsx"!==Be.language&&"tsx"!==Be.language){let t=e=>e.replace(/\s*$/," "),n=e=>e.replace(/^\s*/," ");return/\{(#|\/|(%>)|(%\]))/.test(e)||/\}%(>|\])/.test(e)||(e=(e=e.replace(/\{((\{+)|%-?)\s*/g,t)).replace(/\s*((\}\}+)|(-?%\}))/g,n)),e}return e}(S)),"{%"===e||"{{"===e)return l=function(e){let n=2,i=0,r=t,s=e.slice(0,2),o=e.length;if(h(e[2],45)&&(n+=1),!0===b(e.charAt(n)))do{n+=1}while(!0===b(e.charAt(n))&&n<o);i=n;do{i+=1}while(!1===b(e.charAt(i))&&"("!==e.charAt(i)&&i<o);if(i===o&&(i=e.length-2),r=e.slice(n,i),"else"===r||"{%"===s&&("elseif"===r||"when"===r||"elif"===r||"elsif"===r))return["liquid_else",`liquid_${r}`];if("{{"===s)return"end"===r?["liquid_end",t]:"define"===r||"form"===r||"if"===r||"unless"===r||"range"===r||"with"===r?["liquid_start",`liquid_${r}`]:["liquid",t];if(i=F.length-1,i>-1)do{if(r===F[i]&&"block"!==r)return["liquid_start",`liquid_${r}`];if(r==="end"+F[i])return["liquid_end",t];i-=1}while(i>-1);return["liquid",t]}(S),_=l[0],void E(l[1]);if("string"===s){if(_="string","json"===Be.language)S=S.replace(/\\u[\dA-F]{4}/gi,(e=>String.fromCharCode(parseInt(e.replace(/\\u/g,""),16))));else if(0===e.indexOf("#!"))S=S.slice(0,S.length-1),Be.lineOffset=2;else if(("object"!==Be.stack.token||"object"===Be.stack.token&&k(M(1,!1),58)&&k(a.token[Be.count],44)&&k(a.token[Be.count],123))&&(S.length>c.wrap&&c.wrap>0||0!==c.wrap&&h(a.token[Be.count],43)&&(h(a.token[Be.count-1],46)||h(a.token[Be.count-1],39)))){let e=S,i=t,s="double"===j?n:"single"===j?r:e.charAt(0),o=c.wrap,l=/u[0-9a-fA-F]{4}/,u=/x[0-9a-fA-F]{2}/;if(e=e.slice(1,e.length-1),h(a.token[Be.count],43)&&(h(a.token[Be.count-1],46)||h(a.token[Be.count-1],39))&&(Be.pop(a),s=a.token[Be.count].charAt(0),e=a.token[Be.count].slice(1,a.token[Be.count].length-1)+e,Be.pop(a)),e.length>o&&o>0)do{i=e.slice(0,o),h(i[o-5],92)&&l.test(e.slice(o-4,o+1))?i=i.slice(0,o-5):h(i[o-4],92)&&l.test(e.slice(o-3,o+2))?i=i.slice(0,o-4):h(i[o-3],92)&&(l.test(e.slice(o-2,o+3))||u.test(e.slice(o-2,o+1)))?i=i.slice(0,o-3):h(i[o-2],92)&&(l.test(e.slice(o-1,o+4))||u.test(e.slice(o-1,o+2)))?i=i.slice(0,o-2):h(i[o-1],92)&&(i=i.slice(0,o-1)),i=s+i+s,e=e.slice(i.length-2),S=i,_="string",E(t),Be.lineOffset=0,S="+",_="operator",E(t)}while(e.length>o);S=e===t?s+s:s+e+s,_="string"}}else _=/\{\s*\?>$/.test(S)?"liquid_start":s;S.length>0&&E(t)}if(T>-1&&ee(),h(d[$-1],92)&&!0===W($-1)&&(h(d[$],34)||h(d[$],39))){if(Be.pop(a),!h(a.token[0],123))return h(d[$],34)?(y=['\\"'],void A()):(y=["\\'"],void A());h(d[$],34)?(e=n,i='\\"',y=[n]):(e=r,i="\\'",y=[r]),g=!0}if(u=q,u<f)do{if(k(a.token[0],123)&&k(a.token[0],91)&&"none"!==j&&(h(d[u],34)||h(d[u],39))?(h(d[u-1],92)?!0===W(u-1)&&("double"===j&&h(d[u],39)||"single"===j&&h(d[u],34))&&y.pop():"double"===j&&h(d[u],34)&&h(d[$],39)?d[u]=n:"single"===j&&h(d[u],39)&&h(d[$],34)&&(d[u]=r),y.push(d[u])):u>v?(m=!0,h(d[u],123)&&h(d[u+1],37)&&d[u+2]!==e?(A(),G("{%","%}","liquid"),O()):h(d[u],123)&&h(d[u+1],123)&&d[u+2]!==e?(A(),G("{{","}}","liquid"),O()):(m=!1,y.push(d[u]))):y.push(d[u]),"json"!==Be.language&&"javascript"!==Be.language&&(h(e,34)||h(e,39))&&(!0===m||u>v)&&k(d[u-1],92)&&k(d[u],34)&&k(d[u],39)&&(h(d[u],10)||u===f-1)){Be.error="Unterminated string in script on line number "+Be.lineNumber;break}if(d[u]===w[x-1]&&(k(d[u-1],92)||!1===W(u-1))&&(1===x||y[u-q]===w[0]&&y.slice(u-q-x+2).join(t)===i))break;u+=1}while(u<f);A()}function X(){let n=t,r=M(5,!1),s=Be.count,o=Be.lineOffset;if(!("json"===Be.language||m.length<1||"x"!==m[m.length-1].charAt(0)||!1===/^x?(;|\}|\))$/.test(S)||"do"===a.stack[Be.count]&&"while"===r&&h(a.token[Be.count],125))){if(h(S,59)&&"x{"===a.token[s-1])return n=a.token[a.begin[s-2]-1],"do"===a.token[s-2]||h(a.token[s-2],41)&&"ifforwhilecatch".indexOf(n)>-1?(e=Be.pop(a),S=!0===c.correct?"}":"x}",_="end",i=Be.stack.entry,E(),m.pop(),void(Be.lineOffset=o)):(e=Be.pop(a),S=!0===c.correct?"}":"x}",_="end",i=Be.stack.entry,E(),m.pop(),S=";",_="end",Be.push(a,e,t),void(Be.lineOffset=o));if(S=!0===c.correct?"}":"x}",_="end","x}"!==a.token[Be.count]){if("else"===r&&"if"===a.stack[Be.count]&&(h(a.token[Be.count],59)||"x;"===a.token[Be.count]))return i=Be.stack.entry,E(),m.pop(),void(Be.lineOffset=o);do{if(i=Be.stack.entry,E(),m.pop(),"do"===a.stack[Be.count])break}while("x{"===m[m.length-1]);Be.lineOffset=o}}}function Q(){let e=Be.count;if("object"===a.stack[e]&&!0===p.objectSort)S=",",_="separator",B(),E();else{do{e-=1}while(e>0&&"comment"===a.types[e-1]);Be.splice({data:a,howmany:0,index:e,record:{begin:a.begin[e],ender:-1,lexer:"script",lines:Be.lineOffset,stack:a.stack[e],token:",",types:"separator"}}),E()}}function Y(t){let n=!1,r=!1,s=M(1,!1),o=h(a.token[Be.count],40)?Be.count:a.begin[Be.count];if(T>-1&&ee(),w.length>0&&(0===w[w.length-1]?w.pop():w[w.length-1]=w[w.length-1]-1),(h(t,41)||"x)"===t||h(t,93))&&(!0===c.correct&&U(),B()),(h(t,41)||"x)"===t)&&R(!1),O>-1&&(h(t,125)&&("list"===p.variableList&&0===j.count[O]||"x;"===a.token[Be.count]&&"each"===p.variableList)&&z(),j.count[O]=j.count[O]-1,j.count[O]<0&&z()),h(S,44)&&"initializer"!==a.stack[Be.count]&&(h(t,93)&&h(a.token[Be.count-1],91)||h(t,125))&&(e=Be.pop(a)),h(t,41)||"x)"===t?(S=t,g.length>0&&(C=g[g.length-1],C.length>1&&k(s,123)&&("if"===C[0]||"for"===C[0]||"with"===C[0]||"while"===C[0]&&void 0!==a.stack[C[1]-2]&&"do"!==a.stack[C[1]-2])&&(n=!0))):h(t,93)?S="]":h(t,125)&&(k(S,44)&&!0===c.correct&&U(),Be.stack.length>0&&"object"!==Be.stack.token&&R(!0),!0===p.objectSort&&"object"===Be.stack.token&&A(a),"comment"===_&&(S=a.token[Be.count],_=a.types[Be.count]),S="}"),_="data_type"===Be.stack.token?"type_end":"end",g.pop(),i=Be.stack.entry,h(t,41)&&!0===c.correct&&o-Be.count<2&&(h(a.token[Be.count],40)||"number"===a.types[Be.count])&&("Array"===a.token[o-1]||"Object"===a.token[o-1])&&"new"===a.token[o-2]&&(function(){let t=0,n="Array"===a.token[o-1],i=n?"[":"{",r=n?"]":"}",s=n?"array":"object";if(!0===n&&"number"===a.types[Be.count]&&(t=Number(a.token[Be.count]),e=Be.pop(a)),e=Be.pop(a),e=Be.pop(a),e=Be.pop(a),Be.stack.pop(),S=i,_="start",E(s),t>0){S=",",_="separator";do{E(),t-=1}while(t>0)}S=r,_="end",E()}(),r=!0),"x{"===m[m.length-1]&&h(t,125)?(X(),m.pop(),"try"!==a.stack[Be.count]&&k(s,58)&&k(s,59)&&"?"!==a.token[a.begin[$]-1]&&X(),S="}"):m.pop(),void 0!==p.endComma&&"none"!==p.endComma&&"array"===Be.stack.token||"object"===Be.stack.token||"data_type"===Be.stack.token)if("always"===p.endComma&&k(a.token[Be.count],44)){let e=Be.stack.index,t=Be.count;do{if(a.begin[t]===e){if(h(a.token[t],44))break}else t=a.begin[t];t-=1}while(t>e);if(t>e){let e=_,t=S;S=",",_="separator",E(),S=t,_=e}}else"never"===p.endComma&&h(a.token[Be.count],44)&&Be.pop(a);!1===r&&(E(),h(S,125)&&"object"!==a.stack[Be.count]&&"class"!==a.stack[Be.count]&&"data_type"!==a.stack[Be.count]&&(l.pop(),X())),!0===n&&(S=!0===c.correct?"{":"x{",_="start",E(C[0]),m.push("x{"),C[1]=Be.count),v.pop(),"data_type"!==Be.stack.token&&(v[v.length-1]=!1)}function K(e){let n=Be.count,i=t,r=t,s=t,o=!1;if(m.push(e),!h(e,123)||"type"!==a.types[Be.count]&&"type_end"!==a.types[Be.count]&&"generic"!==a.types[Be.count])h(e,91)&&"type_end"===a.types[Be.count]?v.push(!0):v.push(v[v.length-1]);else{let e=0;"type_end"===a.types[Be.count]&&(n=a.begin[Be.count]),e=n;do{if(n-=1,a.begin[n]!==e&&-1!==a.begin[n]||h(a.token[n],58))break}while(n>a.begin[n]);h(a.token[n],58)&&"arguments"===a.stack[n-1]?(v.push(!1),o=!0):v.push(v[v.length-1]),n=Be.count}if(T>-1&&(ee(),n=Be.count),O>-1&&(j.count[O]=j.count[O]+1),"function"===a.token[n-1]?g.push(["function",n+1]):g.push([S,n+1]),S=e,_=!0===v[v.length-1]?"type_start":"start",h(e,40)||"x("===e?B():h(e,91)&&(N>-1?(a.begin[N-1]===a.begin[a.begin[n]-1]||"x("===a.token[a.begin[n]])&&(N=-1,!0===c.correct?Y(")"):Y("x)"),B(),S="{",_="start"):h(S,41)&&B(),"comment"===_&&h(a.token[n-1],41)&&(S=a.token[n],a.token[n]="{",_=a.types[n],a.types[n]="start")),i=(()=>{let e=Be.count;if("comment"===a.types[e])do{e-=1}while(e>0&&"comment"===a.types[e]);return a.token[e]})(),r=void 0===a.stack[n]?t:(()=>{let e=Be.count;if("comment"===a.types[e])do{e-=1}while(e>0&&"comment"===a.types[e]);return a.token[a.begin[e]-1]})(),h(S,123)&&("word"===a.types[n]||h(a.token[n],93))){let e=n;if(h(a.token[e],93))do{e=a.begin[e]-1}while(h(a.token[e],93));do{if("start"===a.types[e]||"end"===a.types[e]||"operator"===a.types[e])break;e-=1}while(e>0);h(a.token[e],58)&&"arguments"===a.stack[e-1]&&(s="function",l.push(P),P=[])}if("type_start"===_)s="data_type";else if(s!==t||!h(S,123)&&"x{"!==S)h(S,91)?s="array":(h(S,40)||"x("===S)&&(s="function"===i||"function"===a.token[n-1]||"function*"===a.token[n-1]||"function"===a.token[n-2]?"arguments":h(a.token[n-1],46)||h(a.token[a.begin[n]-2],46)||"generic"===a.types[n]||h(a.token[n],125)&&"function"===a.stack[n]?"method":"if"===i||"for"===i||"class"===i||"while"===i||"catch"===i||"finally"===i||"switch"===i||"with"===i?"expression":"word"===a.types[n]||"property"===a.types[n]||"reference"===a.types[n]?"method":"paren");else{if("else"===i||"do"===i||"try"===i||"finally"===i||"switch"===i)s=i;else if(0===w[w.length-1]&&"return"!==i)w.pop(),s="class";else if("class"===a.token[n-1])s="class";else if(h(a.token[n],93)&&h(a.token[n-1],91))s="array";else if("word"!==a.types[n]&&"reference"!==a.types[n]||"word"!==a.types[n-1]&&"reference"!==a.types[n-1]&&("?"!==a.token[n-1]||"word"!==a.types[n-2]&&"reference"!==a.types[n-2])||"in"===a.token[n]||"export"===a.token[n-1]||"import"===a.token[n-1])if("method"!==a.stack[n]||"end"!==a.types[n]||"word"!==a.types[a.begin[n]-1]&&"reference"!==a.types[a.begin[n]-1]||"new"!==a.token[a.begin[n]-2])if(!h(S,123)||!h(i,41)&&"x)"!==i||"word"!==a.types[a.begin[n]-1]&&"reference"!==a.types[a.begin[n]-1]&&"]"!==a.token[a.begin[n]-1])if(h(S,123)&&(h(i,59)||"x;"===i))s="block";else if(h(S,123)&&h(a.token[n],58)&&"switch"===a.stack[n])s="block";else if("import"===a.token[n-1]||"import"===a.token[n-2]||"export"===a.token[n-1]||"export"===a.token[n-2])s="object";else if(!h(i,41)||"function"!==C[0]&&"if"!==C[0]&&"for"!==C[0]&&"class"!==C[0]&&"while"!==C[0]&&"switch"!==C[0]&&"catch"!==C[0])if("notation"===a.stack[n])s="function";else if("number"!==a.types[n]&&"string"!==a.types[n]&&"word"!==a.types[n]&&"reference"!==a.types[n]||"word"!==a.types[n-1]&&"reference"!==a.types[n-1]||"for"===a.token[a.begin[n]-1])if(Be.stack.length>0&&k(a.token[n],58)&&"object"===Be.stack.token&&(h(a.token[a.begin[n]-2],123)||h(a.token[a.begin[n]-2],44)))s="function";else if("markup"===a.types[C[1]-1]&&"function"===a.token[C[1]-3])s="function";else if("=>"===i)s="function";else if(!0===o||"type_end"===a.types[Be.count]&&"arguments"===a.stack[a.begin[Be.count]-2])s="function";else if(!h(i,41)||"method"!==a.stack[n]||"word"!==a.types[a.begin[n]-1]&&"property"!==a.types[a.begin[n]-1]&&"reference"!==a.types[a.begin[n]-1])if(h(S,123)&&"word"===a.types[n]&&"return"!==a.token[n]&&"in"!==a.token[n]&&"import"!==a.token[n]&&"const"!==a.token[n]&&"let"!==a.token[n]&&a.token[n]!==t)s="block";else if(h(S,123)&&"if|else|for|while|function|class|switch|catch|finally".indexOf(a.stack[n])>-1&&("x}"===a.token[n]||h(a.token[n],125)))s="block";else if("arguments"===a.stack[n])s="function";else if("generic"===a.types[n])do{if(n-=1,"function"===a.token[n]||"arguments"===a.stack[n]){s="function";break}if("interface"===a.token[n]){s="map";break}if(h(a.token[n],59)){s="object";break}}while(n>a.begin[Be.count]);else s="object";else s="function";else s="function";else s=C[0];else s="if"===r?"if":"for"===r?"for":"while"===r?"while":"class"===r?"class":"switch"===r||"switch"===a.token[a.begin[n]-1]?"switch":"catch"===r?"catch":"function";else s="initializer";else s="map";"object"!==s&&"class"!==s&&("function"===s?(l.push(P),P=[]):l.push([]))}E(s),w.length>0&&(w[w.length-1]=w[w.length-1]+1)}function ee(){let e=T,n=1,r=t,s=t,o=S,u=_,f=[];function g(){m.push("x{"),Be.splice({data:a,howmany:1,index:Be.count-3})}function b(e,t,n){let i=a.begin[e],r=0;do{if(a.token[e]===t&&"word"===a.types[e])if(!0===n)a.types[e]="reference";else if(a.begin[e]>i&&"{"===a.token[a.begin[e]]&&"object"!==a.stack[e]&&"class"!==a.stack[e]&&"data_type"!==a.stack[e])if("function"===a.stack[e])a.types[e]="reference";else{r=a.begin[e];do{if("function"===a.stack[r]){a.types[e]="reference";break}r=a.begin[r]}while(r>i)}e-=1}while(e>i)}do{f.push(d[e]),h(d[e],92),e+=1}while(e<$);if("“"===S.charAt(0)?Be.error=`Quote looking character (“, \\u201c) used instead of actual quotes on line number ${Be.lineNumber}`:"”"===S.charAt(0)&&(Be.error=`Quote looking character (”, \\u201d) used instead of actual quotes on line number ${Be.lineNumber}`),r=f.join(t),T=-1,Be.count>0&&"function"===r&&h(a.token[Be.count],40)&&(h(a.token[Be.count-1],123)||"x{"===a.token[Be.count-1])&&(a.types[Be.count]="start"),Be.count>1&&"function"===r&&h(S,40)&&(h(a.token[Be.count-1],125)||"x}"===a.token[Be.count-1]))if(h(a.token[Be.count-1],125)){if(e=Be.count-2,e>-1)do{if("end"===a.types[e]?n+=1:("start"===a.types[e]||"end"===a.types[e])&&(n-=1),0===n)break;e-=1}while(e>-1);if(h(a.token[e],123)&&h(a.token[e-1],41)){if(n=1,e-=2,e>-1)do{if("end"===a.types[e]?n+=1:("start"===a.types[e]||"end"===a.types[e])&&(n-=1),0===n)break;e-=1}while(e>-1);"function"!==a.token[e-1]&&"function"!==a.token[e-2]&&(a.types[Be.count]="start")}}else a.types[Be.count]="start";if(!0===c.correct&&("Object"===r||"Array"===r)&&h(d[$+1],40)&&h(d[$+2],41)&&h(a.token[Be.count-1],61)&&"new"===a.token[Be.count])"Object"===r?(a.token[Be.count]="{",S="}",a.stack[Be.count]="object",Be.stack.update("object")):(a.token[Be.count]="[",S="]",a.stack[Be.count]="array",Be.stack.update("array")),a.types[Be.count]="start",_="end",d[$+1]=t,d[$+2]=t,$+=2;else{if(n=Be.count,e=n,"none"===p.variableList||"var"!==r&&"let"!==r&&"const"!==r)O>-1&&r!==j.word[O]&&Be.count===j.index[O]&&h(a.token[j.index[O]],59)&&S!==j.word[O]&&"list"===p.variableList&&z();else{if("comment"===a.types[n])do{n-=1}while(n>0&&"comment"===a.types[n]);if("list"===p.variableList&&O>-1&&j.index[O]===n&&r===j.word[O])return S=",",_="separator",a.token[n]=S,a.types[n]=_,j.count[O]=0,j.index[O]=n,void(j.word[O]=r);O+=1,j.count.push(0),j.index.push(n),j.word.push(r),n=e}if("from"===r&&"x;"===a.token[Be.count]&&h(a.token[Be.count-1],125)&&B(),"while"===r&&"x;"===a.token[Be.count]&&h(a.token[Be.count-1],125)){let e=0,t=Be.count-2;if(t>-1)do{if("end"===a.types[t]?e+=1:"start"===a.types[t]&&(e-=1),e<0)return void(h(a.token[t],123)&&"do"===a.token[t-1]&&B());t-=1}while(t>-1)}if("comment"===u){let e=Be.count;do{e-=1}while(e>0&&"comment"===a.types[e]);u=a.types[e],o=a.token[e]}if(s=M(2,!1),"void"===r)_=":"===o&&"arguments"===a.stack[Be.count-1]?"type":"word";else if("object"!==Be.stack.token&&"class"!==Be.stack.token&&"data_type"!==Be.stack.token||!(h(a.token[Be.count],123)||h(a.token[a.begin[Be.count]],123)&&h(a.token[Be.count],44)||"liquid_end"===a.types[Be.count]&&(h(a.token[a.begin[Be.count]-1],123)||h(a.token[a.begin[Be.count]-1],44))))if(!0===v[v.length-1]||("typescript"===Be.language||"flow"===Be.language)&&"type"===o)_="type";else if(l.length>0&&("function"===o||"class"===o||"const"===o||"let"===o||"var"===o||"new"===o||"void"===o))_="reference",l[l.length-1].push(r),"javascript"!==Be.language&&"jsx"!==Be.language&&"typescript"!==Be.language&&"tsx"!==Be.language||"var"!==o&&("function"!==o||"operator"===a.types[Be.count-1]||"start"===a.types[Be.count-1]||"end"===a.types[Be.count-1])?b(Be.count,r,!1):b(Be.count,r,!0);else if("arguments"===Be.stack.token&&"operator"!==_)_="reference",P.push(r);else if(!h(o,44)||"method"===a.stack[Be.count]||"expression"===a.stack[Be.count]&&"for"!==a.token[a.begin[Be.count]-1])if("object"!==Be.stack.token||"object"===Be.stack.token&&","!==S&&"{"!==S){let e=l.length,t=0;if(e>0){do{if(e-=1,t=l[e].length,t>0){do{if(t-=1,r===l[e][t])break}while(t>0);if(r===l[e][t])break}}while(e>0);_=l[e][t]===r&&"."!==o?"reference":"word"}else _="word"}else _="word";else{let e=Be.count,t=Be.stack.index;do{if(a.begin[e]===t){if(";"===a.token[e]||"var"===a.token[e]||"let"===a.token[e]||"const"===a.token[e]||"type"===a.token[e])break}else"end"===a.types[e]&&(e=a.begin[e]);e-=1}while(e>t);l.length>0&&"var"===a.token[e]?(_="reference",l[l.length-1].push(r),"javascript"===Be.language||"jsx"===Be.language||"typescript"===Be.language||"tsx"===Be.language?b(e,r,!0):b(e,r,!1)):l.length>0&&("let"===a.token[e]||"const"===a.token[e]||"type"===a.token[e]&&("typescript"===Be.language||"tsx"===Be.language))?(_="reference",l[l.length-1].push(r),b(e,r,!1)):_="word"}else _="return"===r||"break"===r?"word":"property";S=r,"from"===r&&"}"===a.token[Be.count]&&B()}if(E(),"class"===r&&w.push(0),"do"===r&&(s=M(1,!0),"{"!==s&&(S=!0===c.correct?"{":"x{",_="start",m.push("x{"),E("do"))),"else"===r){s=M(2,!0);let e=Be.count-1;if("comment"===a.types[e])do{e-=1}while(e>0&&"comment"===a.types[e]);"x}"===a.token[e]&&("else"===a.token[Be.count]?"if"!==a.stack[Be.count-1]&&"comment"!==a.types[Be.count-1]&&"else"!==a.stack[Be.count-1]?(m.pop(),Be.splice({data:a,howmany:0,index:Be.count-1,record:{begin:a.begin[a.begin[a.begin[Be.count-1]-1]-1],ender:-1,lexer:"script",lines:0,stack:"if",token:!0===c.correct?"}":"x}",types:"end"}}),Be.stack.length>1&&(Be.stack.splice(Be.stack.length-2,1),Be.stack.update(Be.count))):("x}"===a.token[Be.count-2]&&"if"!==i[0]&&"else"===a.stack[Be.count]||"}"===a.token[Be.count-2]&&"if"===a.stack[Be.count-2]&&"if"===i[0]&&"if"!==a.token[i[1]-1]&&"x{"===a.token[a.begin[Be.count-1]])&&g():"x}"===a.token[Be.count]&&"if"===a.stack[Be.count]&&g()),"if"!==s&&k(s,123)&&(S=!0===c.correct?"{":"x{",_="start",m.push("x{"),E("else"))}("for"===r||"if"===r||"switch"===r||"catch"===r)&&"."!==a.token[Be.count-1]&&(s=M(1,!0),"("!==s&&(N=Be.count,!0===c.correct?K("("):K("x(")))}function ne(){Be.lineOffset=1;do{if(h(d[$],10)&&(Be.lineIndex=$,Be.lineOffset=Be.lineOffset+1,Be.lineNumber=Be.lineNumber+1),!1===b(d[$+1]))break;$+=1}while($<f)}do{b(d[$])?(T>-1&&ee(),ne(),Be.lineOffset>1&&L<Be.count&&k(d[$+1],59)&&k(d[$+1],125)&&(R(!1),L=Be.count)):h(d[$],123)&&h(d[$+1],37)?G("{%","%}","liquid"):h(d[$],123)&&h(d[$+1],123)?G("{{","}}","liquid"):h(d[$],60)&&h(d[$+1],33)&&h(d[$+2],45)&&h(d[$+3],45)?G("\x3c!--","--\x3e","comment"):h(d[$],60)?Z():h(d[$],47)&&($===f-1||h(d[$+1],42))?(R(!1),T>-1&&ee(),s=he({chars:d,end:f,lexer:"script",begin:"/*",start:$,ender:"*/"}),$=s[1],"var"===a.token[Be.count]||"let"===a.token[Be.count]||"const"===a.token[Be.count]?(e=Be.pop(a),E(),Be.push(a,e,t),0===a.lines[Be.count-2]&&(a.lines[Be.count-2]=a.lines[Be.count]),a.lines[Be.count]=0):s[0]!==t&&(S=s[0],_=te.test(S)?"ignore":"comment",2===S.indexOf("# sourceMappingURL=")&&(x[0]=Be.count+1,x[1]=S),Be.push(a,{begin:Be.stack.index,ender:-1,lexer:"script",lines:Be.lineOffset,stack:Be.stack.token,token:S,types:_},t)),/\/\*\s*global\s+/.test(a.token[Be.count])&&a.types.indexOf("word")<0&&(l[0]=a.token[Be.count].replace(/\/\*\s*global\s+/,t).replace("*/",t).replace(/,\s+/g,",").split(","))):(Be.count<0||a.lines[Be.count]>0)&&h(d[$],35)&&h(d[$+1],33)&&(h(d[$+2],47)||h(d[$+3],91))?G("#!"+d[$+2],o,"string"):h(d[$],47)&&($===f-1||h(d[$+1],47))?(R(!1),X(),T>-1&&ee(),s=fe({chars:d,end:f,lexer:"script",begin:"//",start:$,ender:o}),$=s[1],s[0]!==t&&(S=s[0],_=te.test(S)?"ignore":"comment",2===S.indexOf("# sourceMappingURL=")&&(x[0]=Be.count+1,x[1]=S),Be.push(a,{begin:Be.stack.index,ender:-1,lexer:"script",lines:Be.lineOffset,stack:Be.stack.token,token:S,types:_},t))):h(d[$],96)||h(d[$],125)&&"template_string"===Be.stack.token?(T>-1&&ee(),S=H(),h(S,125)&&"${"===S.slice(S.length-2)?(_="template_string_else",E("template_string")):"${"===S.slice(S.length-2)?(_="template_string_start",E("template_string")):h(S[0],125)?(_="template_string_end",E()):(_="string",E())):h(d[$],34)||h(d[$],39)?G(d[$],d[$],"string"):h(d[$],45)&&$<f-1&&k(d[$+1],61)&&k(d[$+1],45)&&("number"===_||"word"===_||"reference"===_)&&"return"!==S&&("word"===_||"reference"===_||"number"===_||h(S,41)||h(S,93))?(T>-1&&ee(),S="-",_="operator",E()):-1===T&&("0"!==d[$]||"0"===d[$]&&"b"!==d[$+1])&&(y(d[$])||$!==f-2&&h(d[$],45)&&h(d[$+1],46)&&y(d[$+2])||$!==f-1&&(h(d[$],45)||h(d[$],46))&&y(d[$+1]))?(T>-1&&ee(),"end"===_&&h(d[$],45)?(S="-",_="operator"):(S=J(),_="number"),E()):h(d[$],58)&&h(d[$+1],58)?(T>-1&&ee(),!0===c.correct&&U(),B(),$+=1,S="::",_="separator",E()):h(d[$],44)?(T>-1&&ee(),!0===c.correct&&U(),!0===v[v.length-1]&&a.stack[Be.count].indexOf("type")<0&&(v[v.length-1]=!1),"comment"===_?Q():O>-1&&0===j.count[O]&&"each"===p.variableList?(B(),S=";",_="separator",E(),S=j.word[O],_="word",E(),j.index[O]=Be.count):(S=",",_="separator",B(),E())):h(d[$],46)?(T>-1&&ee(),v[v.length-1]=!1,h(d[$+1],46)&&h(d[$+2],46)?(S="...",_="operator",$+=2):(B(),S=".",_="separator"),b(d[$-1])&&(Be.lineOffset=1),E()):h(d[$],59)?(T>-1&&ee(),!0===v[v.length-1]&&a.stack[Be.count].indexOf("type")<0&&(v[v.length-1]=!1),0===w[w.length-1]&&w.pop(),O>-1&&0===j.count[O]&&("each"===p.variableList?z():j.index[O]=Be.count+1),!0===c.correct&&U(),S=";",_="separator","x}"===a.token[Be.count]?D():E(),X()):h(d[$],40)||h(d[$],91)||h(d[$],123)?K(d[$]):h(d[$],41)||h(d[$],93)||h(d[$],125)?Y(d[$]):T<0&&"object"===a.stack[Be.count]&&h(d[$],42)&&k(d[$+1],61)&&!1===y(d[$+1])&&!1===b(d[$+1])?T=$:h(d[$],61)||h(d[$],38)||h(d[$],60)||h(d[$],62)||h(d[$],43)||h(d[$],45)||h(d[$],42)||h(d[$],47)||h(d[$],33)||h(d[$],63)||h(d[$],124)||h(d[$],94)||h(d[$],58)||h(d[$],37)||h(d[$],94)?(S=V(),"regex"===S?S=a.token[Be.count]:h(S,42)&&"function"===a.token[Be.count]?a.token[Be.count]="function*":(_="operator",k(S,33)&&"++"!==S&&"--"!==S&&B(),E())):T<0&&d[$]!==t&&(T=$),O>-1&&Be.count===j.index[O]+1&&h(a.token[j.index[O]],59)&&S!==j.word[O]&&"comment"!==_&&"list"===p.variableList&&z(),$+=1}while($<f);return T>-1&&ee(),(k(a.token[Be.count],125)&&h(a.token[0],123)||k(a.token[0],123))&&(k(a.token[Be.count],93)&&h(a.token[0],91)||k(a.token[0],91))&&R(!1),x[0]===Be.count&&(S=o+x[1],_="string",E()),"x;"===a.token[Be.count]&&(h(a.token[Be.count-1],125)||h(a.token[Be.count-1],93))&&0===a.begin[Be.count-1]&&Be.pop(a),p.objectSort&&a.begin.length>0&&I(0,Be.count+1),a}():void 0}function Te(e){return 1===e?function(){let{rules:e}=Be,{lineBreakValue:n}=e.markup,i=Be.start,r=-1,a=0,l=0,c=0,u=isNaN(e.indentLevel)?0:e.indentLevel,p=Be.data,m=Be.ender<1||Be.ender>p.token.length?p.token.length:Be.ender+1,y={},w="jsx"===e.language||"tsx"===e.language,x=new Map,v=Be.start>0?Array(Be.start).fill(0,0,Be.start):[],q=function(){do{"markup"===p.lexer[i]?(A(i,"doctype")&&(v[i-1]=u),I(i,"attribute")>-1?B():A(i,"comment")?(r<0&&(r=i),E()):!1===A(i,"comment")&&(l=N(),(A(l,"end")||A(l,"liquid_end")&&!1===A(i,"liquid_else"))&&(u>-1&&(u-=1),(C(i,"</ol>")||C(i,"</ul>")||C(i,"</dl>"))&&z()),A(i,"script_end")&&A(l,"end")?p.lines[l]<1?v.push(-20):p.lines[l]>1?v.push(u):v.push(-10):(!1===e.markup.forceIndent||!0===e.markup.forceIndent&&A(l,"script_start"))&&(A(i,"content")||A(i,"singleton")||A(i,"liquid"))?(c+=p.token[i].length,p.lines[l]>0&&A(l,"script_start")?v.push(-10):e.wrap>0&&!1===A(i,"singleton")&&(I(i,"liquid")<0||l<m&&I(i,"liquid")>-1&&I(l,"liquid")<0)?M():l<m&&(I(l,"end")>-1||I(l,"start")>-1)&&(p.lines[l]>0||I(i,"liquid_")>-1)?v.push(u):0===p.lines[l]?v.push(-20):1===p.lines[l]?v.push(-10):v.push(u)):A(i,"start")||A(i,"liquid_start")?(u+=1,A(l,"liquid_when")&&!1===e.liquid.dedentTagList.includes("case")&&(u+=1),!0===w&&C(i+1,"{")?0===p.lines[l]?v.push(-20):p.lines[l]>1?v.push(u):v.push(-10):A(i,"start")&&A(l,"end")?"liquid"===p.stack[i]||I(l-1,"comment")>-1?v.push(u):v.push(-20):A(i,"start")&&A(l,"script_start")?v.push(-10):!0===e.markup.forceIndent?v.push(u):0===p.lines[l]&&(A(l,"content")||A(l,"singleton")||A(i,"start")&&A(l,"liquid"))?v.push(-20):v.push(u)):!1===e.markup.forceIndent&&0===p.lines[l]&&(A(l,"content")||A(l,"singleton"))||A(i+2,"script_end")?v.push(-20):A(i,"liquid_when")?(v[i-1]=u-1,v.push(u)):A(i,"liquid_else")&&A(l,"liquid_end")?(u-=1,v[i-1]=u,v.push(u)):A(i,"liquid_else")&&A(l,"liquid_else")?(v[i-1]=u-1,v.push(u-1)):A(i,"liquid_else")&&(A(l,"content")||A(l,"liquid"))?(v[i-1]=u-1,v.push(u)):!0===e.markup.forceIndent&&(A(i,"content")&&(A(l,"liquid")||A(l,"content"))||A(i,"liquid")&&(A(l,"content")||A(l,"liquid")))?p.lines[l]<1?v.push(-20):p.lines[l]>1?v.push(u):v.push(-10):A(i,"liquid_start_bad")?(u+=1,v.push(u)):A(l,"liquid_end_bad")?(u-=1,v.push(u)):C(i,"{% endcase %}")&&!1===e.liquid.dedentTagList.includes("case")?(v[i-1]--,u-=1):A(l,"liquid_else")&&v[i-1]===u?v.push(u-1):A(i,"liquid_else")&&v[i-1]===u&&!1===e.markup.forceIndent?(v[i-1]=u-1,v.push(u)):A(a,"liquid_start")&&A(l,"liquid_end")&&0===p.lines[l]?v[i-1]=-20:v.push(u)),!1===A(i,"content")&&!1===A(i,"singleton")&&!1===A(i,"liquid")&&!1===A(i,"attribute")&&(c=0)):(c=0,W()),i+=1}while(i<m);return v}(),j=function(){let n=[e.indentChar],i=e.indentSize-1,r=0;if(r<i)do{n.push(e.indentChar),r+=1}while(r<i);return n.join(t)}(),O=[];function A(e,t){return p.types[e]===t}function C(e,t){return p.token[e]===t}function I(e,n){return e>-1&&(p.types[e]||t).indexOf(n)}function L(n,r=!0){let s=[],o=e.preserveLine+1,a=Math.min(p.lines[i+1]-1,o),l=0;if(n<0&&(n=0),r)do{s.push(Be.crlf),l+=1}while(l<a);if(n>0){l=0;do{s.push(j),l+=1}while(l<n)}return s.join(t)}function T(){let r,a=p.lines[i+1];r=A(i,"comment")&&(h(p.token[i][1],37)&&!1===e.liquid.preserveComment||k(p.token[i][1],37)&&!1===e.markup.preserveComment)?p.token[i].split(Be.crlf).map((e=>e.trimStart())):p.token[i].split(Be.crlf);let l=A(i,"attribute"),c=r.length-1,u=q[i-1]>-1?l?q[i-1]+1:q[i-1]:(()=>{let e=i-1,t=e>-1&&I(e,"start")>-1;if(q[i]>-1&&A(i,"attribute"))return q[i]+1;do{if(e-=1,q[e]>-1)return A(i,"content")&&!1===t?q[e]:q[e]+1;I(e,"start")>-1&&(t=!0)}while(e>0);return-2===e?0:1})(),d=0;p.lines[i+1]=0;do{A(i,"comment")?(0===d&&(h(p.token[i][1],37)&&!0===e.liquid.commentNewline||!1===h(p.token[i][1],37)&&!0===e.markup.commentNewline)&&(0===e.preserveLine||O.length>0&&O[O.length-1].lastIndexOf(o)+1<2)&&O.push(L(u)),r[d]!==t?(d>0&&(h(p.token[i][1],37)&&!0===e.liquid.commentIndent||!1===h(p.token[i][1],37)&&!0===e.markup.commentIndent)&&O.push(j),r[d+1].trimStart()!==t?O.push(r[d],L(u)):O.push(r[d],o)):r[d+1].trimStart()===t?O.push(o):O.push(L(u))):l?"align"===n||"force-align"===n?O.push(r[d].trim(),L(q[i])):"indent"===n||"force-indent"===n?O.push(r[d].trim(),L(u)):(O.push(r[d]),"force-preserve"!==n||d+1!==c&&0!==d?O.push(Be.crlf):O.push(L(q[i]))):O.push(r[d],L(u)),d+=1}while(d<c);if(l&&k(r[c],60)&&x.get(i-1)>=2&&f(r[c],62)&&"inline"!==e.markup.delimiterTerminus){x.delete(i-1);let t=L(q[i-1]-1);O[O.length-1]===t&&O.push(e.indentChar.repeat(e.indentSize)),A(i-1,"singleton")&&g(r[c],47)?O.push(r[c].slice(0,-2),t,"/>"):O.push(r[c].slice(0,-1),t,">")}else O.push(r[c]);p.lines[i+1]=a,A(i,"comment")&&(A(i+1,"liquid_end")||A(i-1,"liquid_end"))?O.push(L(q[i])):-10===q[i]?O.push(s):O.push(L(q[i]))}function N(){l>0&&(a=l-1);let e=i+1,t=0;if(A(e,void 0))return e-1;if(A(e,"comment")||i<m-1&&I(e,"attribute")>-1)do{if(A(e,"jsx_attribute_start")){t=e;do{if(A(e,"jsx_attribute_end")&&p.begin[e]===t)break;e+=1}while(e<m)}else if(!1===A(e,"comment")&&I(e,"attribute")<0)return e;e+=1}while(e<m);return e}function P(){let n=/(?!=)\/?>$/,r=p.token[i],o=n.exec(r);if(null===o)return;let a=i+1,l=!1,c=!0===e.markup.selfCloseSpace&&"/>"===o[0]?s:t;p.token[i]=r.replace(n,t);do{if(A(a,"jsx_attribute_end")&&p.begin[p.begin[a]]===i)l=!1;else if(p.begin[a]===i){if(A(a,"jsx_attribute_start"))l=!0;else if(I(a,"attribute")<0&&!1===l)break}else if(!1===l&&(p.begin[a]<i||I(a,"attribute")<0))break;a+=1}while(a<m);A(a-1,"comment_attribute")&&(c=L(q[a-2]-1)),p.token[a-1]=`${p.token[a-1]}${c}${o[0]}`,A(a,"comment")}function F(){if(!1===A(i,"end")&&k(p.token[i],60)&&x.get(p.begin[i])>=2&&f(p.token[i],62)){x.delete(p.begin[i]);let e=L(q[i-1]-1).replace(/\n+/,o),t=`${p.token[i].slice(0,-1)}${e}>`;A(p.begin[i],"singleton")&&h(p.token[i][p.token[i].length-2],47)?p.token[i]=`${p.token[i].slice(0,-2)}${e}/>`:p.token[i]=t}}function z(){let e=p.begin[i],t=i;do{if(t-=1,!C(t,"</li>")||!C(t-1,"</a>")||p.begin[p.begin[t]]!==e||p.begin[t-1]!==p.begin[t]+1)return;t=p.begin[t]}while(t>e+1);t=i;do{t-=1,A(t+1,"attribute")?v[t]=-10:!1===C(t,"</li>")&&(v[t]=-20)}while(t>e+1)}function E(){let t=i,n=!1;if(0===p.lines[i+1]&&!1===e.markup.forceIndent){do{if(p.lines[t]>0){n=!0;break}t-=1}while(t>r);t=i}else n=!0;if(!0===n){A(p.begin[t]-1,"liquid")&&(v[p.begin[t]-1]=u);do{v.push(u),t-=1}while(t>r);v[i]=u,(A(t,"attribute")||A(t,"liquid_attribute")||A(t,"jsx_attribute_start")||A(t,"start"))&&!1===A(i+1,"comment")&&!1===A(i+1,"start")&&!1===p.types[i+1].startsWith("liquid")||A(i+1,"liquid_end")?v[t]=u+1:A(i+1,"liquid_else")&&(v[t]=u-1)}else{do{v.push(-20),t-=1}while(t>r);v[t]=-20}r=-1}function M(){let n=u;if(!0!==e.markup.forceIndent&&!0!==e.markup.forceAttribute){if(l<m&&(I(l,"end")>-1||I(l,"start")>-1)&&p.lines[l]>0?(v.push(u),n+=1,i>0&&A(i,"singleton")&&I(i-1,"attribute")>-1&&A(p.begin[i-1],"singleton")&&(p.begin[i]<0||A(p.begin[i-1],"singleton")&&p.begin[p.ender[i]-1]!==i?v[i-1]=u:v[i-1]=u+1)):i>0&&A(i,"singleton")&&I(i-1,"attribute")>-1?(v[i-1]=u,c=p.token[i].length,v.push(-10)):0===p.lines[l]?v.push(-20):(0===e.wrap||i<m-2&&void 0!==p.token[i]&&void 0!==p.token[i+1]&&void 0!==p.token[i+2]&&p.token[i].length+p.token[i+1].length+p.token[i+2].length+1>e.wrap&&I(i+2,"attribute")>-1||void 0!==p.token[i]&&void 0!==p.token[i+1]&&p.token[i].length+p.token[i+1].length>e.wrap)&&(A(i+1,"singleton")||A(i+1,"liquid"))?v.push(u):(c+=1,v.push(-10)),i>0&&I(i-1,"attribute")>-1&&p.lines[i]<1&&(v[i-1]=-20),c>e.wrap){let r=i,o=Math.max(p.begin[i],0);if(A(i,"content")&&!1===e.markup.preserveText){let a=0,l=p.token[i].replace(/\s+/g,s).split(s);do{if(r-=1,!(v[r]<0))break;a+=p.token[r].length,-10===v[r]&&(a+=1)}while(r>0);r=0,o=l.length;do{l[r].length+a>e.wrap?(l[r]=Be.crlf+l[r],a=l[r].length):(l[r]=` ${l[r]}`,a+=l[r].length),r+=1}while(r<o);h(l[0],32)?p.token[i]=l.join(t).slice(1):(v[i-1]=n,p.token[i]=l.join(t).replace(Be.crlf,t)),p.token[i].indexOf(Be.crlf)>0&&(c=p.token[i].length-p.token[i].lastIndexOf(Be.crlf))}else{do{if(r-=1,v[r]>-1)return c=p.token[i].length,void(p.lines[i+1]>0&&(c+=1));if(I(r,"start")>-1)return void(c=0);if(p.lines[r+1]>0&&(!1===A(r,"attribute")||A(r,"attribute")&&A(r+1,"attribute"))&&(!1===A(r,"singleton")||A(r,"attribute")&&A(r+1,"attribute"))){c=p.token[i].length,p.lines[i+1]>0&&(c+=1);break}}while(r>o);v[r]=n}}}else v.push(u)}function W(){let e=i;"script_start"===p.types[e-1]&&h(p.token[e-1],123)&&(v[e-1]=-20);do{if("markup"===p.lexer[i+1]&&p.begin[i+1]<e&&!1===A(i+1,"start")&&!1===A(i+1,"singleton"))break;v.push(0),i+=1}while(i<m);y[e]=i,"script_end"===p.types[i+1]&&"}"===p.token[i+1]?v.push(-20):(p.types[i+1],v.push(u-1)),l=N(),"markup"===p.lexer[l]&&p.stack[i].indexOf("attribute")<0&&("end"===p.types[l]||"liquid_end"===p.types[l])&&(u-=1)}function R(n){let i=p.token[n].replace(/\s+/g,s).split(s),r=i.length,o=1,a=i[0].length;do{a+i[o].length>e.wrap?(a=i[o].length,i[o]=Be.crlf+i[o]):(i[o]=` ${i[o]}`,a+=i[o].length),o+=1}while(o<r);p.token[n]=i.join(t)}function B(){let t=i-1,r=i,s=!1,o=!1,a=I(t+1,"end"),d=p.token[t].length+1,h=0,f=(()=>{if(I(i,"start")>0){let e=i;do{if(A(e,"end")&&p.begin[e]===i&&e<m-1&&I(e+1,"attribute")>-1){s=!0;break}e+=1}while(e<m)}else i<m-1&&I(i+1,"attribute")>-1&&(s=!0);return A(l,"end")||A(l,"liquid_end")?A(t,"singleton")?u+2:u+1:A(t,"singleton")?u+1:u})();if(!1===s&&A(i,"comment_attribute"))return v.push(u),void(v[t]="singleton"===p.types[t]?u+1:u);function g(t){!1===e.markup.forceAttribute?v.push(-10):!0===e.markup.forceAttribute||t>=e.markup.forceAttribute?!0===e.liquid.indentAttribute?(A(i-1,"liquid_attribute_start")&&(v[i-1]=f+h),v.push(f+h)):v.push(f):v.push(-10)}f<1&&(f=1),a=0;do{a+=1}while(I(i+a,"attribute")>-1&&(!1===A(i+a,"end")||!1===A(i+a,"singleton")||!1===A(i+a,"start")||!1===A(i+a,"comment")));("force-preserve"===n||"force-align"===n||"force-indent"===n)&&($(e.markup.forceAttribute)&&!1===e.markup.forceAttribute||S(e.markup.forceAttribute)&&a<=e.markup.forceAttribute)&&(a=1/0);do{if(c=c+p.token[i].length+1,p.types[i].indexOf("attribute")>0)A(i,"comment_attribute")?v.push(f):I(i,"start")>0&&I(i,"liquid")<0?(o=!0,i<m-2&&p.types[i+2].indexOf("attribute")>0?(v.push(-20),i+=1,y[i]=i):(t===i-1&&!1===s?w?v.push(-20):v.push(f):w?v.push(-20):v.push(f+1),"markup"!==p.lexer[i+1]&&(i+=1,W()))):!0===e.liquid.indentAttribute?A(i,"liquid_attribute_start")?(h>0?v.push(f+h):v.push(f),h+=1):A(i,"liquid_attribute_else")?v[i-1]=f+h-1:A(i,"liquid_attribute_end")?(h-=1,v[i-1]=f+h):g(a):I(i,"end")>0&&!1===A(i,"liquid_attribute_end")?(-20!==v[i-1]&&(v[i-1]=v[p.begin[i]]-1),"markup"!==p.lexer[i+1]?v.push(-20):v.push(f)):I(i,"liquid_attribute")>-1?(d=d+p.token[i].length+1,!0===e.markup.preserveAttribute?v.push(-10):!0===e.markup.forceAttribute||e.markup.forceAttribute>=1||!0===o||i<m-1&&I(i+1,"attribute")>-1?g(a):v.push(-10)):v.push(f);else if(A(i,"attribute"))d=d+p.token[i].length+1,!0===e.markup.preserveAttribute?v.push(-10):!0===e.markup.forceAttribute||e.markup.forceAttribute>=1||!0===o||i<m-1&&I(i+1,"attribute")>-1?g(a):v.push(-10);else if(p.begin[i]<t+1)break;i+=1}while(i<m);if(i-=1,I(i,"liquid")<0&&I(i,"end")>-1&&I(i,"attribute")>0&&!1===A(t,"singleton")&&v[i-1]>0&&!0===s&&(v[i-1]=v[i-1]-1),-20!==v[i]&&(!0===w&&I(t,"start")>-1&&A(i+1,"script_start")?v[i]=f:C(i,"/")&&10!==v[i-1]?v[i-1]=-10:v[i]=v[t]),!0===e.markup.forceAttribute)c=0,v[t]=f,a>=2&&"force"===e.markup.delimiterTerminus&&x.set(t,a);else if(e.markup.forceAttribute>=1)if(a>=e.markup.forceAttribute){v[t]=f;let n=i-1;do{(A(n,"liquid")&&-10===v[n]||A(n,"attribute")&&-10===v[n])&&(v[n]=f),n-=1}while(n>t);("force"===e.markup.delimiterTerminus&&a>=2||"adapt"===e.markup.delimiterTerminus&&a===1/0)&&x.set(t,a)}else v[t]=-10;else v[t]=-10;if(!0===e.markup.preserveAttribute||C(t,"<%xml%>")||C(t,"<?xml?>"))c=0;else if(r=i,r>t+1){if(!1===e.markup.selfCloseSpace&&(d-=1),d>e.wrap&&e.wrap>0&&!1===e.markup.forceAttribute){v[t]=f,c=p.token[i].length,r-=1;do{p.token[r].length>e.wrap&&b(p.token[r])&&R(r),(I(r,"liquid")>-1&&-10===v[r]||A(r,"attribute")&&-10===v[r])&&(v[r]=f),r-=1}while(r>t)}}else e.wrap>0&&A(i,"attribute")&&p.token[i].length>e.wrap&&b(p.token[i])&&R(i)}function D(){let e=p.token[i].split(o),t=e.length,n=0,r=o;i-1>0||2===e[0].length||e[0].length,r+=L(q[i-1],!1)+"  ";do{if(0===n){if(n+1===t-1&&(2===e[n+1].length||3===e[n+1].length)){r.length>1&&(r=r.slice(0,-2)),O.push(e[n],r,e[n+1]);break}O.push(e[n],r)}else n===t-1?O.push(e[n]):(n+1===t-1&&(2===e[n+1].length||3===e[n+1].length)&&(r=r.slice(0,-2)),O.push(e[n],r));n+=1}while(n<t)}return function(){i=Be.start;let n=e.indentLevel;do{if("markup"===p.lexer[i])(A(i,"start")||A(i,"singleton")||A(i,"xml"))&&i<m-1&&I(i,"attribute")<0&&!1===_(p.types[i+1])&&I(i+1,"attribute")>-1&&P(),!1===_(p.token[i])&&p.token[i].indexOf(Be.crlf)>0&&(A(i,"content")&&!1===e.markup.preserveText||A(i,"comment")||A(i,"attribute"))?T():A(i,"comment")&&!1===e.markup.preserveComment&&(h(p.token[i][1],37)&&!0===e.liquid.commentNewline||!1===h(p.token[i][1],37)&&!0===e.markup.commentNewline)&&(0===e.preserveLine||O.length>0&&O[O.length-1].lastIndexOf(o)+1<2)?O.push(L(q[i]),O.pop(),p.token[i],L(q[i])):I(i,"_preserve")>-1?O.push(p.token[i]):A(i+1,"ignore")&&A(i+2,"ignore")?(O.push(p.token[i],L(q[i]).replace(Y,t),p.token[i+1],d(p.lines[i+2]-1==0?1:p.lines[i+2]-1,o)),i+=1):(n=q[i],"force"===e.markup.delimiterTerminus&&F(),/\n/.test(p.token[i])&&I(i,"liquid")>-1&&!A(i,"liquid_end")?D():O.push(p.token[i]),-10===q[i]&&i<m-1?O.push(s):q[i]>-1&&I(i+1,"_preserve")<0&&O.push(L(q[i])));else{Be.start=i,Be.ender=y[i],n>0&&e.liquid.dedentTagList.includes(p.stack[i])&&(O.splice(O.length-1,1,L(q[i]-1)),n-=1);let t=Be.external(n);"jsx"!==e.language||"template_string_end"!==p.types[i-1]&&"jsx_attribute_start"!==p.types[i-1]&&"script_start"!==p.types[i-1]?(O.push(t),(e.markup.forceIndent||q[Be.iterator]>-1&&i in y&&y[i]>i)&&(i=Be.iterator,O.push(L(q[i])))):O.push(t),i!==Be.iterator&&(i=Be.iterator)}i+=1}while(i<m);return Be.iterator=m-1,(O[0]===Be.crlf||h(O[0],32))&&(O[0]=t),!0===e.endNewline?O.join(t).replace(/\s*$/,Be.crlf):O.join(t).trimEnd()}()}():3===e?function(){let e=[],{data:n,rules:i,crlf:r}=Be,o=Be.ender>0?Be.ender+1:n.token.length,a=i.preserveLine+1,l=i.indentChar.repeat(i.indentSize),c=i.indentLevel,u=Be.start,p=[t,t];function d(e,t){return n.types[e]===t}function g(i){let s=[],c=u===o-1?1:n.lines[u+1]-1>a?a:n.lines[u+1]>1?n.lines[u+1]-1:1,p=0;i<0&&(i=0);do{s.push(r),p+=1}while(p<c);if(i>0){p=0;do{s.push(l),p+=1}while(p<i)}e.push(s.join(t))}do{(d(u+1,"end")||d(u+1,"liquid_end")||d(u+1,"liquid_else"))&&(c-=1),d(u,"liquid")&&n.lines[u]>0?(e.push(n.token[u]),k(n.token[u+1],59)&&!1===P.css.units.has(n.token[u+1])&&g(c)):d(u-1,"selector")&&d(u,"liquid")&&d(u+1,"selector")?(e.push(n.token[u]),f(n.token[u-1],45)&&(h(n.token[u+1],46)||h(n.token[u+1],35)||h(n.token[u+1],38))&&e.push(s)):d(u,"liquid_else")?(e.push(n.token[u]),c+=1,g(c)):d(u,"start")||d(u,"liquid_start")?(c+=1,e.push(n.token[u]),!1===d(u+1,"end")&&!1===d(u+1,"liquid_end")&&g(c)):h(n.token[u],59)||d(u,"end")||d(u,"liquid_end")||d(u,"comment")?(e.push(n.token[u]),d(u+1,"value")?1===n.lines[u+1]?e.push(s):n.lines[u+1]>1&&g(c):!1===d(u+1,"separator")?!1===d(u+1,"comment")||d(u+1,"comment")&&n.lines[u+1]>1?g(c):e.push(s):d(u,"comment")&&!1===d(u+1,"comment")&&n.lines[u]>1&&g(c)):h(n.token[u],58)?(e.push(n.token[u]),!1===d(u+1,"selector")&&k(n.token[u+1],44)&&e.push(s)):d(u,"selector")||d(u,"at_rule")?(!0===i.style.classPadding&&d(u-1,"end")&&n.lines[u]<3&&g(c),n.token[u].indexOf("and(")>0?(n.token[u]=n.token[u].replace(/and\(/,"and ("),e.push(n.token[u])):n.token[u].indexOf("when(")>0?(p=n.token[u].split("when("),e.push(p[0].replace(/\s+$/,t)),g(c+1),e.push(`when (${p[1]}`)):e.push(n.token[u]),d(u+1,"start")&&e.push(s)):h(n.token[u],44)?(d(u+1,"value")&&g(c),e.push(n.token[u]),d(u+1,"selector")||d(u+1,"property")?g(c):e.push(s)):"map"===n.stack[u]&&h(n.token[u+1],41)&&u-n.begin[u]>5?(e.push(n.token[u]),g(c)):"x;"===n.token[u]?g(c):(d(u,"variable")||d(u,"function"))&&!0===i.style.classPadding&&d(u-1,"end")&&n.lines[u]<3?(e.push(r),e.push(n.token[u])):k(n.token[u],59)&&e.push(n.token[u]),u+=1}while(u<o);return Be.iterator=o-1,(e[0]===Be.crlf||h(e[0],32))&&(e[0]=t),!0===i.endNewline?e.join(t).replace(/\s*$/,Be.crlf):e.join(t).replace(/\s+$/,t)}():2===e?function(){let{data:e,rules:n}=Be,i="json"===Be.language?n.json:n.script,r=0,a={},l="script",c=Be.ender<1||Be.ender>e.token.length?e.token.length:Be.ender+1,u=(()=>{let s=Be.start,u=n.indentLevel,p=!1,d=!1,f=t,g=t,m=e.types[0],b=e.token[0],y=[-1],w=[],x=Be.start>0?Array(Be.start).fill(0,0,Be.start):[],v=[],q=[[]],j=[],O=[],$=[],S=[!1],A=[],C=[];function I(){L(!1,!1);let n=!0===i.commentIndent?u:0;if(!1===p&&/\/\u002a\s*global\s/.test(e.token[s])){let n=e.token[s].replace(/\/\u002a\s*global\s+/,t).replace(/\s*\u002a\/$/,t).split(","),i=n.length;do{i-=1,n[i]=n[i].replace(/\s+/g,t),n[i]!==t&&Be.stack.push([n[i],-1])}while(i>0)}if("comment"===e.types[s-1]||"comment"===e.types[s+1])x[s-1]=n;else{if(e.lines[s]<2){let t=s+1;if("comment"===e.types[t])do{t+=1}while(t<c&&"comment"===e.types[t]);if(s<c-1&&"block"!==e.stack[t]&&(h(e.token[t],123)||"x{"===e.token[t])){let n=Be.stack.length;if(e.begin.splice(s,0,e.begin[t]),e.ender.splice(s,0,e.ender[t]),e.lexer.splice(s,0,e.lexer[t]),e.lines.splice(s,0,e.lines[t]),e.stack.splice(s,0,e.stack[t]),e.token.splice(s,0,e.token[t]),e.types.splice(s,0,e.types[t]),n>0)do{if(n-=1,Be.stack[n][1]===t)Be.stack[n][1]=s;else if(Be.stack[n][1]<s)break}while(n>0);t+=1,e.begin.splice(t,1),e.ender.splice(t,1),e.lexer.splice(t,1),e.lines.splice(t,1),e.stack.splice(t,1),e.token.splice(t,1),e.types.splice(t,1),n=s+1;do{e.begin[n]=s,e.stack[n]=e.stack[t],n+=1}while(n<t);n+=1;do{if(e.begin[n]===e.begin[t]&&(e.begin[n]=s,"end"===e.types[n]))break;n+=1}while(n<c-1);e.begin[t]=s,s-=1}else x[s-1]=-10,"paren"===e.stack[s]||"method"===e.stack[s]?x.push(u+2):x.push(u),!0===i.commentIndent&&x[s]>-1&&e.lines[s]<3&&(e.lines[s]=3);return void("comment"!==e.types[s+1]&&(p=!0))}h(e.token[s-1],44)?x[s-1]=n:h(b,61)&&"comment"!==e.types[s-1]&&!0===/^\/\*{2}\s*@[A-Za-z_]+/.test(g)?x[s-1]=-10:h(b,123)&&"comment"!==e.types[s-1]&&e.lines[0]<2?"function"===e.stack[s]?x[s-1]=n:x[s-1]=/\n/.test(g)?n:-10:x[s-1]=n}"comment"!==e.types[s+1]&&(p=!0),h(e.token[e.begin[s]],40)?x.push(u+1):x.push(u),x[s]>-1&&e.lines[s]<3&&("comment"===e.types[s-1]&&g.startsWith("//")?e.lines[s]=2:e.lines[s]=3),!0===i.commentNewline&&!1===g.startsWith("//")&&e.lines[s]>=3&&(e.lines[s]=2)}function L(t,n){let r=s-1,o=!0===t?0:1,a=void 0===q[q.length-1]?[]:q[q.length-1],l=!1===n&&"array"===e.stack[s]&&!0===t&&k(g,91);if(!(!1===O[O.length-1]||"array"===e.stack[s]&&"inline"===i.arrayFormat||"object"===e.stack[s]&&"inline"===i.objectIndent)){O[O.length-1]=!1;do{if("end"===e.types[r]?o+=1:"start"===e.types[r]&&(o-=1),"global"===e.stack[r])break;if(0===o){if("class"===e.stack[s]||"map"===e.stack[s]||!1===l&&(!1===t&&"("!==e.token[r]&&"x("!==e.token[r]||!0===t&&h(e.token[r],44)))"liquid_start"===e.types[r+1]?e.lines[r]<1?x[r]=-20:x[r]=u-1:a.length>0&&a[a.length-1]>-1?x[r]=u-1:x[r]=u;else if("array"===e.stack[s]&&"operator"===e.types[s]&&(h(e.token[r],44)&&(x[r]=u),r===e.begin[s]))break;if(!1===t)break}if(o<0){"liquid_start"===e.types[r+1]||"template_string_start"===e.types[r+1]?e.lines[r]<1?x[r]=-20:x[r]=u-1:a.length>0&&a[a.length-1]>-1?x[r]=u-1:x[r]=u;break}r-=1}while(r>-1)}}function T(){let t=_(q[q.length-1])?[]:q[q.length-1];function r(){let t=s,n=!1,i=e.begin[t];do{if(t-=1,"markup"===e.lexer[t]){n=!0;break}e.begin[t]!==i&&(t=e.begin[t])}while(t>i);if(!0===n){t=s;do{t-=1,e.begin[t]!==i?t=e.begin[t]:h(e.token[t],44)&&(x[t]=u+1)}while(t>i);x[i]=u+1,x[s-1]=u}else x[s-1]=-20}if(h(g,41)&&h(e.token[s+1],46)&&k(e.token[t[0]],58)&&t[t.length-1]>-1){let t=e.begin[s],n=!1,i=!1;do{t-=1}while(t>0&&x[t]<-9);n=x[t]===u,t=s+1;do{if(t+=1,h(e.token[t],123)){i=!0;break}if(e.begin[t]===e.begin[s+1]&&("separator"===e.types[t]||"end"===e.types[t]))break}while(t<c);!1===n&&!0===i&&q.length>1&&(q[q.length-2].push(e.begin[s]),u+=1)}if("separator"!==m&&z(),h(e.token[s+1],58)&&("object"===e.stack[s]||"array"===e.stack[s])&&L(!0,!1),h(e.token[e.begin[s]-1],44)&&(h(e.token[s+1],125)||h(e.token[s+1],93))&&("object"===e.stack[s]||"array"===e.stack[s])&&L(!0,!1),"attribute"!==e.stack[s]&&(k(g,41)&&"x)"!==g&&("markup"!==e.lexer[s-1]||"markup"===e.lexer[s-1]&&"return"!==e.token[s-2])&&(u-=1),h(g,125)&&"switch"===e.stack[s]&&!1===i.noCaseIndent&&(u-=1)),h(g,125)||"x}"===g){if("comment"!==e.types[s-1]&&"{"!==b&&"x{"!==b&&"end"!==m&&"string"!==m&&"number"!==m&&"separator"!==m&&"++"!==b&&"--"!==b&&(s<2||";"!==e.token[s-2]||"x;"!==e.token[s-2]||"break"===b||"return"===b)){let t=s-1,n=!1,i=e.begin[s],r=w.length;do{if(e.begin[t]===i){if((h(e.token[t],61)||h(e.token[t],59)||"x;"===e.token[t])&&(n=!0),h(e.token[t],46)&&x[t-1]>-1){O[O.length-1]=!1,x[i]=u+1,x[s-1]=u;break}if(t>0&&"return"===e.token[t]&&(")"===e.token[t-1]||"x)"===e.token[t-1]||"{"===e.token[t-1]||"x{"===e.token[t-1]||"}"===e.token[t-1]||"x}"===e.token[t-1]||";"===e.token[t-1]||"x;"===e.token[t-1])){u-=1,x[s-1]=u;break}if(h(e.token[t],58)&&0===v.length||h(e.token[t],44)&&!1===n)break;if(0===t||"{"===e.token[t-1]||"x{"===e.token[t-1]||"for"===e.token[t]||"if"===e.token[t]||"do"===e.token[t]||"function"===e.token[t]||"while"===e.token[t]||"var"===e.token[t]||"let"===e.token[t]||"const"===e.token[t]||"with"===e.token[t]){!1===w[r-1]&&r>1&&(s===c-1||")"!==e.token[s+1]&&"x)"!==e.token[s+1])&&"object"!==e.stack[s]&&(u-=1);break}}else t=e.begin[t];t-=1}while(t>i)}y.pop()}if(!1===i.bracePadding&&"}"!==g&&"markup"!==m&&"liquid"!==m&&(x[s-1]=-20),!0===i.bracePadding&&"start"!==m&&";"!==b&&(x[e.begin[s]]<-9||!0===O[O.length-1]))x[e.begin[s]]=-10,x[s-1]=-10,x.push(-20);else if("attribute"===e.stack[s])x[s-1]=-20,x.push(u);else if("array"===e.stack[s]&&(t.length>0||!0===j[j.length-1]))N(),O[O.length-1]=!1,x[e.begin[s]]=u+1,x[s-1]=u,x.push(-20);else if(t.length>0&&("object"===e.stack[s]||0===e.begin[s]&&h(g,125)))N(),O[O.length-1]=!1,x[e.begin[s]]=u+1,x[s-1]=u,x.push(-20);else if(")"===g||"x)"===g){let i=")"===g&&k(b,40)&&C.length>0?C.pop()+1:0,o="if"===e.token[e.begin[s]-1]?(()=>{let t=s;do{if(t-=1,")"===e.token[t]&&x[t-1]>-1)return i}while(t>e.begin[s]);return i+5})():i;if(i>0&&("jsx"!==Be.language||"jsx"===Be.language&&"render"!==e.token[e.begin[s]-1])){let t=n.wrap,r=e.begin[s],a=C.length,l=s-2;if(o>t){x[e.begin[s]]=u+1,x[s-1]=u;do{e.begin[l]===r?"&&"===e.token[l]||"||"===e.token[l]?x[l]=u+1:x[l]>-1&&"comment"!==e.types[l]&&"."!==e.token[l+1]&&(x[l]=x[l]+1):x[l]>-1&&"."!==e.token[l+1]&&(x[l]=x[l]+1),l-=1}while(l>r)}else a>0&&(C[a-1]=C[a-1]+i)}else if(")"===g&&s>e.begin[s]+2&&e.lexer[e.begin[s]+1]===l&&"function"!==e.token[e.begin[s]+1]){let i=e.begin[s]<0?0:e.begin[s],r=n.wrap,o=t.length,a=0,l=0,p=0,d=0,f=0,g=!1,m=!1,y=u+1,v=!1,q=!1,j=!1;if(x[i]<-9){l=i;do{l+=1}while(l<s&&x[l]<-9);d=l;do{a+=e.token[l].length,-10===x[l]&&(a+=1),"("===e.token[l]&&p>0&&p<r-1&&d===s&&(p=-1),")"===e.token[l]?f-=1:"("===e.token[l]&&(f+=1),l===i&&f>0&&(p=a),l-=1}while(l>i&&x[l]<-9);if("."===e.token[l+1]&&(y=x[l]+1),a>r-1&&r>0&&k(b,40)&&-1!==p&&!1===O[O.length-2]&&("if"===e.token[i-1]&&!0===w[w.length-1]||"if"!==e.token[i-1])&&(x[i]=y,"for"===e.token[i-1])){l=i;do{l+=1,h(e.token[l],59)&&e.begin[l]===i&&(x[l]=y)}while(l<s)}}l=s,a=0;do{l-=1,"function"===e.stack[l]?l=e.begin[l]:e.begin[l]===i?(h(e.token[l],63)?j=!0:h(e.token[l],44)&&!1===g?(g=!0,a>=r&&r>0&&(v=!0)):"markup"===e.types[l]&&!1===q&&(q=!0),x[l]>-9&&k(e.token[l],44)&&"markup"!==e.types[l]?a=0:(-10===x[l]&&(a+=1),a+=e.token[l].length,a>=r&&r>0&&(!0===g||!0===q)&&(v=!0))):x[l]>-9?a=0:(a+=e.token[l].length,a>=r&&r>0&&(!0===g||!0===q)&&(v=!0))}while(l>i&&!1===v);if(!1===g&&h(e.token[e.begin[s]+1],96))x[e.begin[s]]=-20,x[s-1]=-20;else if((!0===g||!0===q)&&a>=r&&r>0||x[i]>-9){if(!0===j){if(y=x[i],h(e.token[i-1],91)){l=s;do{if(l+=1,"end"===e.types[l]||h(e.token[l],44)||h(e.token[l],59))break}while(l<c);h(e.token[l],93)&&(y-=1,m=!0)}}else o>0&&t[o-1]>l&&(y-=o);O[O.length-1]=!1,l=s;do{if(l-=1,e.begin[l]===i)if(e.token[l].indexOf("=")>-1&&"operator"===e.types[l]&&e.token[l].indexOf("!")<0&&e.token[l].indexOf("==")<0&&"<="!==e.token[l]&&e.token[l].indexOf(">")<0){a=l;do{if(a-=1,e.begin[a]===i&&(";"===e.token[a]||","===e.token[a]||a===i))break}while(a>i)}else h(e.token[l],44)?x[l]=y:x[l]>-9&&!1===m&&("for"!==e.token[i-1]||"?"===e.token[l+1]||":"===e.token[l+1])&&("("!==e.token[e.begin[s]]||"+"!==e.token[l])&&(x[l]=x[l]+1);else x[l]>-9&&!1===m&&(x[l]=x[l]+1)}while(l>i);x[i]=y,x[s-1]=y-1}else x[s-1]=-20;"+"===e.token[e.begin[s]-1]&&x[e.begin[s]]>-9&&(x[e.begin[s]-1]=-10)}else"jsx"===Be.language||"tsx"===Be.language?r():x[s-1]=-20;x.push(-20)}else if(!0===O[O.length-1])h(g,93)&&e.begin[s]-1>0&&"["===e.token[e.begin[e.begin[s]-1]]&&(O[O.length-2]=!1),e.begin[s]<x.length&&(x[e.begin[s]]=-20),"jsx"===Be.language||"tsx"===Be.language?r():h(g,93)&&x[e.begin[s]]>-1?x[s-1]=x[e.begin[s]]-1:x[s-1]=-20,x.push(-20);else if("comment"===e.types[s-1]&&"//"===e.token[s-1].substring(0,2))"x}"===e.token[s-2]&&(x[s-3]=u+1),x[s-1]=u,x.push(-20);else if(m.indexOf("liquid")<0&&"comment"!==e.types[s-1]&&(h(b,123)&&h(g,125)||h(b,91)&&h(g,93)))x[s-1]=-20,x.push(-20);else if(h(g,93)){if(!0===w[w.length-1]&&!1===O[O.length-1]&&"inline"!==i.arrayFormat||h(b,93)&&x[s-2]===u+1?(x[s-1]=u,x[e.begin[s]]=u+1):-10===x[s-1]&&(x[s-1]=-20),"function"===e.token[e.begin[s]+1])x[s-1]=u;else if(!1===w[w.length-1]){(h(b,125)||"x}"===b)&&(x[s-1]=u);let t=s-1,n=1;do{if(h(e.token[t],93)&&(n+=1),h(e.token[t],91)&&(n-=1,0===n)){if(t>0&&(h(e.token[t+1],123)||h(e.token[t+1],91)||"x{"===e.token[t+1])){x[t]=u+1;break}if(k(e.token[t+1],91)||!1===d){x[t]=-20;break}break}1===n&&"+"===e.token[t]&&x[t]>1&&(x[t]=x[t]-1),t-=1}while(t>-1)}else("jsx"===Be.language||"tsx"===Be.language)&&r();if("inline"===i.arrayFormat){let t=s,n=e.begin[s];do{if(t-=1,"end"===e.types[t])break}while(t>n);t>n?(x[e.begin[s]]=u+1,x[s-1]=u):(x[e.begin[s]]=-20,x[s-1]=-20)}else x[e.begin[s]]>-1&&(x[s-1]=x[e.begin[s]]-1);x.push(-20)}else h(g,125)||"x}"===g||!0===w[w.length-1]?(h(g,125)&&"x}"===b&&"else"===e.token[s+1]?(x[s-2]=u+2,x.push(-20)):x.push(u),x[s-1]=u):x.push(-20);"comment"===e.types[s-1]&&(x[s-1]=u),N(),d=w[w.length-1],w.pop(),q.pop(),j.pop(),$.pop(),A.pop(),O.pop(),S.pop()}function N(){let t=0,n=q[q.length-1];if(void 0!==n){if(t=n.length-1,t<1&&n[t]<0&&(h(g,59)||"x;"===g||h(g,41)||"x)"===g||h(g,125)||"x}"===g))return void n.pop();if(!(t<0||n[t]<0)){if(h(g,58)){if(k(e.token[n[t]],63))do{n.pop(),t-=1,u-=1}while(t>-1&&n[t]>-1&&k(e.token[n[t]],63));n[t]=s,x[s-1]=u}else do{n.pop(),t-=1,u-=1}while(t>-1&&n[t]>-1);("array"===e.stack[s]||h(g,44))&&n.length<1&&n.push(-1)}}}function F(){let t=s;do{if(e.lexer[s+1]===l&&e.begin[s+1]<t||"return"===e.token[t-1]&&"end"===e.types[s]&&e.begin[s]===t)break;x.push(0),s+=1}while(s<c);a[t]=s,x.push(u-1)}function z(){let t=s-1,n=e.begin[s];if(!(u<1))do{if(n!==e.begin[t])t=e.begin[t];else if("separator"===e.types[t]||"operator"===e.types[t]){"."===e.token[t]&&x[t-1]>0&&("if"===e.token[n-1]?u-=2:u-=1);break}t-=1}while(t>0&&t>n)}function E(){let r=_(q[q.length-1])?[]:q[q.length-1];function o(){let t=e.token[s+1],i=0,o=0,a=s,l="+"===g?u+2:u,c=0;if(n.wrap<1)x.push(-10);else{do{if(a-=1,h(e.token[e.begin[s]],40)&&(a===e.begin[s]&&(c=i),h(e.token[a],44)&&e.begin[a]===e.begin[s]&&!0===w[w.length-1])||i>n.wrap-1||x[a]>-9||"operator"===e.types[a]&&"="!==e.token[a]&&"+"!==e.token[a]&&e.begin[a]===e.begin[s]||(i+=e.token[a].length,a===e.begin[s]&&"["===e.token[a]&&i<n.wrap-1)||"."===e.token[a]&&x[a]>-9)break;-10===x[a]&&(i+=1)}while(a>0);if(c>0&&(c+=t.length),i+=t.length,o=a,i>n.wrap-1&&x[a]<-9)do{o-=1}while(o>0&&x[o]<-9);if("."===e.token[o+1]&&e.begin[s]<=e.begin[o]?l+=1:"operator"===e.types[o]&&(l=x[o]),o=t.length,!(i+o<n.wrap))return!h(e.token[e.begin[s]],40)||":"!==e.token[r[0]]&&"?"!==e.token[r[0]]?"method"===e.stack[s]?(x[e.begin[s]]=u,l=!0===w[w.length-1]?u+3:u+1):("object"===e.stack[s]||"array"===e.stack[s])&&L(!0,!1):l=u+3,("var"===e.token[a]||"let"===e.token[a]||"const"===e.token[a])&&(i-=n.indentSize*n.indentChar.length*2),a=c>0?n.wrap-c:n.wrap-i,a>0&&a<5?(x.push(l),void(('"'===e.token[s].charAt(0)||"'"===e.token[s].charAt(0))&&(s+=1,x.push(-10)))):"("!==e.token[e.begin[s]]||c>n.wrap-1||0===c?(c>0&&(i=c),i-t.length<n.wrap-1&&('"'===t.charAt(0)||"'"===t.charAt(0))?(s+=1,i+=3,i-t.length>n.wrap-4?void x.push(l):void x.push(-10)):void x.push(l)):void x.push(-10);x.push(-10)}}if(z(),r.length>0&&r[r.length-1]>-1&&"array"===e.stack[s]&&(j[j.length-1]=!0),":"!==g&&("("!==e.token[e.begin[s]]&&"x("!==e.token[e.begin[s]]&&O.length>0&&L(!0,!1),"?"!==g&&"."===e.token[r[r.length-1]])){let t=0,n=s,i=e.begin[n];do{if(e.begin[n]===i){if("{"===e.token[n+1]||"["===e.token[n+1]||"function"===e.token[n])break;if(h(e.token[n],44)||h(e.token[n],59)||"end"===e.types[n]||h(e.token[n],58)){r.pop(),u-=1;break}if("?"===e.token[n]||h(e.token[n],58)){"."===e.token[r[r.length-1]]&&t<2&&(r[r.length-1]=i+1);break}"."===e.token[n]&&(t+=1)}n+=1}while(n<c)}if("!"===g||"..."===g)return(h(b,125)||"x}"===b)&&(x[s-1]=u),void x.push(-20);if(";"===b||"x;"===b)return"for"!==e.token[e.begin[s]-1]&&(x[s-1]=u),void x.push(-20);if("*"===g)return x[s-1]="function"===b||"yield"===b?-20:-10,void x.push(-10);if("?"!==g){if(":"===g){if("map"===e.stack[s]||"type"===e.types[s+1]||"type_start"===e.types[s+1])return x[s-1]=-20,void x.push(-10);if(v.length>0&&e.begin[v[v.length-1]]===e.begin[s]){let t=s,n=e.begin[s];do{if(t-=1,e.begin[t]===n){if(h(e.token[t],44)||h(e.token[t],59)){x[s-1]=-20;break}if("?"===e.token[t])return v.pop(),N(),!0===i.ternaryLine&&(x[s-1]=-10),void x.push(-10)}else"end"===e.types[t]&&(t=e.begin[t])}while(t>n)}return"where"===e.token[s-2]&&e.stack[s-2]===e.stack[s]?(x[s-1]=-10,void x.push(-10)):"reference"===m&&"("!==e.token[e.begin[s]]&&"x("!==e.token[e.begin[s]]?(x[s-1]=-20,void x.push(-10)):!h(b,41)&&"x)"!==b||"function"!==e.token[e.begin[s-1]-2]?"attribute"===e.stack[s]||"("!==e.token[e.begin[s]]&&"x("!==e.token[e.begin[s]]&&("reference"===m||h(b,41)||h(b,93)||"?"===b)&&("map"===e.stack[s]||"class"===e.stack[s]||"reference"===e.types[s+1])&&(0===v.length||v[v.length-1]<e.begin[s])&&("mapclassexpressionmethodglobalparen".indexOf(e.stack[s])>-1||"word"===e.types[s-2]&&"switch"!==e.stack[s])?(x[s-1]=-20,void x.push(-10)):"switch"===e.stack[s]&&(v.length<1||v[v.length-1]<e.begin[s])?(x[s-1]=-20,void(!0===i.caseSpace?x.push(-10):x.push(u))):("object"===e.stack[s]?x[s-1]=-20:v.length>0?x[s-1]=u:x[s-1]=-10,void x.push(-10)):(x[s-1]=-20,void x.push(-10))}if("++"!==g&&"--"!==g){if("+"===g){if(x[s-1]="start"===m?-20:-10,n.wrap<1||"x("===e.token[e.begin[s]])return void x.push(-10);let t=e.token[s+1];if(void 0===t)return void x.push(-10);if("operator"===e.types[s-1]||"start"===e.types[s-1]){if("reference"===e.types[s+1]||"("===t||"["===t)return void x.push(-20);if(Number(t.slice(1,-1))>-1&&(!0===/\d/.test(t.charAt(1))||"."===t.charAt(1)||"-"===t.charAt(1)||"+"===t.charAt(1)))return void x.push(-20)}return o()}if("comment"!==e.types[s-1]&&(h(b,40)?x[s-1]=-20:"*"===g&&"object"===e.stack[s]&&"reference"===e.types[s+1]&&(h(b,123)||h(b,44))?x[s-1]=u:("?"!==g||0===v.length)&&(x[s-1]=-10)),g.indexOf("=")>-1&&"=="!==g&&"==="!==g&&"!="!==g&&"!=="!==g&&">="!==g&&"<="!==g&&"=>"!==g&&"method"!==e.stack[s]&&"object"!==e.stack[s]){let n=s+1,i=0,r=!1,o=t;if((h(e.token[e.begin[s]],40)||"x("===e.token[e.begin[s]])&&"function"!==e.token[s+1])return;do{if("start"===e.types[n]){if(!0===r&&"["!==e.token[n]){!0===S[S.length-1]&&(S[S.length-1]=!1);break}i+=1}if("end"===e.types[n]&&(i-=1),i<0){!0===S[S.length-1]&&(S[S.length-1]=!1);break}if(0===i){if(o=e.token[n],!0===r){if("operator"===e.types[n]||h(e.token[n],59)||"x;"===e.token[n]||"?"===e.token[n]||"var"===e.token[n]||"let"===e.token[n]||"const"===e.token[n]){void 0!==o&&("?"===o||o.indexOf("=")>-1&&"=="!==o&&"==="!==o&&"!="!==o&&"!=="!==o&&">="!==o&&"<="!==o)&&!1===S[S.length-1]&&(S[S.length-1]=!0),(";"===o||"x;"===o||"var"===o||"let"===o||"const"===o)&&!0===S[S.length-1]&&(S[S.length-1]=!1);break}!0===S[S.length-1]&&("return"===o||"break"===o||"continue"===o||"throw"===o)&&(S[S.length-1]=!1)}(";"===o||"x;"===o||","===o)&&(r=!0)}n+=1}while(n<c);x.push(-10)}else if("-"===g&&"return"===b||h(b,61))x.push(-20);else{if("operator"!==m||"reference"!==e.types[s+1]||"--"===b||"++"===b||"&&"===g||"||"===g)return o();x.push(-20)}}else"number"===m||"reference"===m?(x[s-1]=-20,x.push(-10)):s<c-1&&("number"===e.types[s+1]||"reference"===e.types[s+1])?x.push(-20):x.push(-10)}else{if(0===e.lines[s]&&"word"===e.types[s-2]&&"return"!==e.token[s-2]&&"in"!==e.token[s-2]&&"instanceof"!==e.token[s-2]&&"typeof"!==e.token[s-2]&&("reference"===m||"word"===m)&&("word"===e.types[s+1]||"reference"===e.types[s+1]||(h(e.token[s+1],40)||"x("===e.token[s+1])&&"new"===e.token[s-2]))return x[s-1]=-20,"word"===e.types[s+1]||"reference"===e.types[s+1]?void x.push(-10):void x.push(-20);if(":"===e.token[s+1])return x[s-1]=-20,void x.push(-20);if(v.push(s),!0===i.ternaryLine)x[s-1]=-10;else{let t=s-1;do{t-=1}while(t>-1&&x[t]<-9);if(r.push(s),u+=1,x[t]===u&&":"!==e.token[t+1]&&(u+=1,r.push(s)),x[s-1]=u,h(e.token[e.begin[s]],40)&&(r.length<2||r[0]===r[1])){O[O.length-1]=!1,s-2===e.begin[s]?x[e.begin[s]]=u-1:x[e.begin[s]]=u,t=s-2;do{if("end"===e.types[t]&&x[t-1]>-1)break;x[t]>-1&&(x[t]=x[t]+1),t-=1}while(t>e.begin[s])}}x.push(-10)}}function M(){let t=()=>{let t=e.begin[s];if(t<0)Be.stack.push([e.token[s],-1]);else{if("function"!==e.stack[t+1])do{t=e.begin[t]}while(t>-1&&"function"!==e.stack[t+1]);Be.stack.push([e.token[s],t])}};if("comment"===e.types[s-1]?x[s-1]=u:"end"===m&&")"!==b&&")"!==e.token[e.begin[s-1]-1]?x[s-1]=-10:"separator"!==m&&"start"!==m&&"end"!==m&&m.indexOf("template_string")<0&&(x[s-1]="word"===m||"operator"===m||"property"===m||"type"===m||"reference"===m?-10:-20),"var"===b&&e.lexer[s-1]===l)t();else if("function"===b)Be.stack.push([e.token[s],s]);else if("let"===b||"const"===b)Be.stack.push([e.token[s],s]);else if("arguments"===e.stack[s])Be.stack.push([e.token[s],s]);else if(h(b,44)){let n=s;do{n-=1}while(n>e.begin[s]&&"var"!==e.token[n]&&"let"!==e.token[n]&&"const"!==e.token[n]);"var"===e.token[n]?t():("let"===e.token[n]||"const"===e.token[n])&&Be.stack.push([e.token[s],s])}x.push(-10)}function W(){let t=_(q[q.length-1])?[]:q[q.length-1],n=()=>{if(i.methodChain>0){let t=s,n=e.begin[s],r=[s],o="if"===e.token[n-1];do{if(t-=1,"end"===e.types[t]&&(t=e.begin[t]),e.begin[t]===n){if("string"===e.types[t]&&e.token[t].indexOf("${")===e.token[t].length-2)break;if("."===e.token[t]){if(x[t-1]>0)return void(x[s-1]=!0===o?u+1:u);r.push(t)}else if(";"===e.token[t]||","===e.token[t]||"operator"===e.types[t]||("word"===e.types[t]||"reference"===e.types[t])&&("word"===e.types[t-1]||"reference"===e.types[t-1]))break}}while(t>n);if(r.length<i.methodChain)return void(x[s-1]=-20);t=0,n=r.length;do{x[r[t]-1]=!0===o?u+1:u,t+=1}while(t<n);t=r[r.length-1]-1;do{x[t]>-1&&(x[t]=x[t]+1),t+=1}while(t<s);u=!0===o?u+2:u+1}x[s-1]=u};if("::"===g)return x[s-1]=-20,void x.push(-20);if("."===g)return"("!==e.token[e.begin[s]]&&"x("!==e.token[e.begin[s]]&&t.length>0&&("object"===e.stack[s]||"array"===e.stack[s]?L(!0,!1):L(!1,!1)),0===i.methodChain?x[s-1]=-20:i.methodChain<0?e.lines[s]>0?n():x[s-1]=-20:n(),void x.push(-20);if(","===g){if(z(),!1===w[w.length-1]&&("object"===e.stack[s]||"array"===e.stack[s]||"paren"===e.stack[s]||"expression"===e.stack[s]||"method"===e.stack[s])&&(w[w.length-1]=!0,h(e.token[e.begin[s]],40))){let t=s;do{t-=1,e.begin[t]===e.begin[s]&&"+"===e.token[t]&&x[t]>-9&&(x[t]=x[t]+2)}while(t>e.begin[s])}if("array"===e.stack[s]&&"indent"===i.arrayFormat)return x[s-1]=-20,void x.push(u);if("array"===e.stack[s]&&"inline"===i.arrayFormat)return x[s-1]=-20,void x.push(-10);if("object"===e.stack[s]&&"indent"===i.objectIndent)return x[s-1]=-20,void x.push(u);if("object"===e.stack[s]&&"inline"===i.objectIndent)return x[s-1]=-20,void x.push(-10);if(t.length>0)return t[t.length-1]>-1&&N(),x[s-1]=-20,void x.push(u);if(":"===e.token[s-2]&&"where"===e.token[s-4])return x[s-1]=-20,void x.push(-10);if(x[s-1]=-20,"end"!==e.types[s+1]&&($[$.length-1]=$[$.length-1]+1),(h(e.token[e.begin[s]],40)||"x("===e.token[e.begin[s]])&&"jsx"!==Be.language&&"global"!==e.stack[s]&&("string"!==e.types[s-1]&&"number"!==e.types[s-1]||"+"!==e.token[s-2]||"string"===e.types[s-1]&&"number"!==e.types[s-1]&&h(e.token[s-2],43)&&"string"!==e.types[s-3]&&"number"!==e.types[s-3]))return void x.push(-10);if("reference"===m&&"word"===e.types[s-2]&&"var-let-const-from".indexOf(e.token[s-2])<0&&("end"===e.types[s-3]||";"===e.token[s-3]))return A[A.length-1]=!0,void x.push(-10);if(!0===A[A.length-1]||"notation"===e.stack[s])return void x.push(-10);if($[$.length-1]>3&&("array"===e.stack[s]||"object"===e.stack[s])){if(!0===O[O.length-1]&&L(!0,!0),x[s-1]=-20,!0===j[j.length-1])return void x.push(u);let t=e.begin[s],n=s;do{"end"===e.types[n]?n=e.begin[n]:h(e.token[n],44)&&"comment"!==e.types[n+1]&&(x[n]=u),n-=1}while(n>t);return x[t]=u,void(j[j.length-1]=!0)}if("object"===e.stack[s]&&!0===O[O.length-1]&&"word"!==e.types[e.begin[s]-1]&&"reference"!==e.types[e.begin[s]-1]&&"("!==e.token[e.begin[s]-1]&&"x("!==e.token[e.begin[s]-1]){let t=e.begin[s],n=s-1;do{if(e.begin[n]===t){if(h(e.token[n],44))break;if(h(e.token[n],58)){L(!0,!1);break}}n-=1}while(n>t)}if(!1===O[O.length-1]||h(e.token[s-2],43)&&("string"===m||"number"===m)&&x[s-2]>0&&(h(b,34)||h(b,39))){if("method"===e.stack[s]){if(h(e.token[s-2],43)&&(h(b,34)||h(b,39))&&('"'===e.token[s-3].charAt(0)||"'"===e.token[s-3].charAt(0)))return void x.push(u+2);if("+"!==e.token[s-2])return void x.push(-10)}return void x.push(u)}return!0===O[O.length-1]&&"object"!==e.stack[s]||$[$.length-1]<4&&("array"===e.stack[s]||"object"===e.stack[s])?void x.push(-10):void x.push(u)}if(h(g,59)||"x;"===g){if(z(),void 0!==e.token[s+1]&&e.types[s+1].indexOf("attribute")>0&&e.types[s+1].indexOf("end")>0)return x[s-1]=-20,void x.push(u-1);if(y[y.length-1]>-1&&"expression"!==e.stack[y[y.length-1]]){let t=s;do{if(t-=1,h(e.token[t],59))break;if(h(e.token[t],44)){u-=1;break}"end"===e.types[t]&&(t=e.begin[t])}while(t>0&&t>e.begin[s])}return y[y.length-1]=-1,N(),"for"!==e.token[e.begin[s]-1]&&L(!1,!1),A[A.length-1]=!1,x[s-1]=-20,e.begin[s]>0&&"for"===e.token[e.begin[s]-1]&&"for"!==e.stack[s]?void x.push(-10):void x.push(u)}x.push(-20)}function R(){let t=e.stack[s+1],r=0===s?e.stack[s]:e.stack[s-1];if((h(b,41)||k(b,93)&&("object"===r||"array"===r))&&("method"!==t||"method"===t&&k(e.token[s+1],41)&&k(e.token[s+2],41))&&(h(b,41)&&("function"!==t||h(e.token[e.begin[e.begin[s-1]-1]],40)||"x("===e.token[e.begin[e.begin[s-1]-1]])?L(!1,!1):"end"!==e.types[s+1]&&"end"!==e.types[s+2]&&L(!0,!1)),w.push(!1),q.push([]),S.push(!1),j.push(!1),A.push(!1),$.push(0),!0===i.neverFlatten||"attribute"===t||"generic"===m||"indent"===i.arrayFormat&&"array"===t||"class"===t&&k(b,40)&&"x("!==b||h(g,91)&&"function"===e.token[s+1]?O.push(!1):"expression"===t||"method"===t||("object"===t||"class"===t)&&(h(b,40)||"x("===b||"word"===m||"reference"===m)||"array"===t||h(g,40)||"x("===g||h(g,123)&&"object"===t&&"operator"!==m&&"start"!==m&&"string"!==m&&"number"!==m&&"object"!==r&&"array"!==r&&s>0?O.push(!0):O.push(!1),k(g,40)&&"x("!==g&&"attribute"!==e.stack[s+1]&&(u+=1),h(g,123)||"x{"===g){if(y.push(-1),"comment"!==e.types[s-1]&&("markup"===m?x[s-1]=u:!0===i.braceAllman&&"operator"!==m&&"return"!==b?x[s-1]=u-1:"block"!==e.stack[s+1]&&("function"===t||h(b,41)||"x)"===b||h(b,44)||h(b,125)||"markup"===m)?x[s-1]=-10:(h(b,123)||"x{"===b||h(b,91)||h(b,125)||"x}"===b)&&(x[s-1]=u-1)),"object"===t){if("indent"===i.objectIndent)return O[O.length-1]=!1,void x.push(u);if("inline"===i.objectIndent)return O[O.length-1]=!0,void x.push(-20)}return"switch"===t?!0===i.noCaseIndent?void x.push(u-1):(u+=1,void x.push(u)):!0===O[O.length-1]&&"word"!==m&&"reference"!==m?void x.push(-20):void x.push(u)}if(h(g,40)||"x("===g)return n.wrap>0&&h(g,40)&&")"!==e.token[s+1]&&C.push(1),h(b,45)&&(h(e.token[s-2],40)||"x("===e.token[s-2])&&(x[s-2]=-20),"end"===m&&"if"!==r&&"for"!==r&&"catch"!==r&&"else"!==r&&"do"!==r&&"try"!==r&&"finally"!==r&&"catch"!==r&&("comment"===e.types[s-1]?x[s-1]=u:x[s-1]=-20),"async"===b?x[s-1]=-10:("method"===t||"function"===e.token[s-2]&&"reference"===m)&&("import"===b||"in"===b||!0===i.functionNameSpace?x[s-1]=-10:h(b,125)&&"function"===e.stack[s-1]||"word"===m||"reference"===m||"property"===m?x[s-1]=-20:"method"!==r&&"method"!==t&&(x[s-1]=u)),h(b,43)&&(h(e.token[s-2],34)||h(e.token[s-2],39))?void x.push(u):(h(b,125)||"x}"===b||(h(b,45)&&(s<2||k(e.token[s-2],41)&&k(e.token[s-2],93)&&"x)"!==e.token[s-2]&&"reference"!==e.types[s-2]&&"string"!==e.types[s-2]&&"number"!==e.types[s-2])||!1===i.functionSpace&&"function"===b)&&(x[s-1]=-20),void x.push(-20));if(h(g,91)){if(h(b,91)&&(w[w.length-2]=!0),"return"===b||"var"===b||"let"===b||"const"===b?x[s-1]=-10:"comment"===e.types[s-1]||"attribute"===e.stack[s-1]||"end"!==m&&"word"!==m&&"reference"!==m?(h(b,91)||h(b,123)||"x{"===b)&&(x[s-1]=u-1):x[s-1]=-20,"attribute"===e.stack[s])return void x.push(-20);if("indent"===i.arrayFormat)return O[O.length-1]=!1,void x.push(u);if("inline"===i.arrayFormat)return O[O.length-1]=!0,void x.push(-20);if("method"===t||!0===O[O.length-1])return void x.push(-20);let n=s+1;do{if(h(e.token[n],93))return void x.push(-20);if(h(e.token[n],44))return void x.push(u);n+=1}while(n<c);x.push(-20)}}function B(){if((h(b,41)||"x)"===b)&&"class"===e.stack[s]&&("static"===e.token[e.begin[s-1]-1]||"final"===e.token[e.begin[s-1]-1]||"void"===e.token[e.begin[s-1]-1])&&(x[s-1]=-10,x[e.begin[s-1]-1]=-10),h(b,93)&&(x[s-1]=-10),"else"===g&&h(b,125)&&("x}"===e.token[s-2]&&(x[s-3]=x[s-3]-1),(!0===i.braceAllman||!0===i.elseNewline)&&(x[s-1]=u)),"new"===g&&P.js.keywords.has(e.token[s+1])&&(r+=1),"from"===g&&"end"===m&&s>0&&("import"===e.token[e.begin[s-1]-1]||h(e.token[e.begin[s-1]-1],44))&&(x[s-1]=-10),"function"===g)return!1===i.functionSpace&&s<c-1&&(h(e.token[s+1],40)||"x("===e.token[s+1])?void x.push(-20):void x.push(-10);if(h(b,45)&&s>1)"operator"===e.types[s-2]||h(e.token[s-2],44)?x[s-1]=-20:"start"===e.types[s-2]&&(x[s-2]=-20,x[s-1]=-20);else if("while"!==g||!h(b,125)&&"x}"!==b){if("in"===g||(h(b,125)||"x}"===b)&&("catch"===g||"else"===g&&!1===i.elseNewline&&!1===i.braceAllman))x[s-1]=-10;else if("var"===g||"let"===g||"const"===g){if(y[y.length-1]=s,"end"===m&&(x[s-1]=u),"for"!==e.token[e.begin[s]-1]){let t=s+1,n=0;do{if("end"===e.types[t]&&(n-=1),"start"===e.types[t]&&(n+=1),n<0||0===n&&(h(e.token[t],59)||h(e.token[t],44)))break;t+=1}while(t<c);h(e.token[t],44)&&(u+=1)}return void x.push(-10)}}else{let t=s-1,n=0;do{if((h(e.token[t],125)||"x}"===e.token[t])&&(n+=1),(h(e.token[t],123)||"x{"===e.token[t])&&(n-=1),0===n){if("do"===e.token[t-1]){x[s-1]=-10;break}x[s-1]=u;break}t-=1}while(t>-1)}return"word"===m||"switch"!==e.stack[s]||"default"!==g&&"case"!==g?"catch"===g&&"."===b?(x[s-1]=-20,void x.push(-20)):"catch"===g||"finally"===g?(x[s-1]=-10,void x.push(-10)):void(!1===i.bracePadding&&s<c-1&&h(e.token[s+1],125)?x.push(-20):"object"!==e.stack[s]||!h(b,123)&&!h(b,44)||!h(e.token[s+1],40)&&"x("!==e.token[s+1]?("comment"===e.types[s-1]&&h(e.token[e.begin[s]],40)&&(x[s-1]=u+1),!0===n.script.inlineReturn&&"return"===g&&"start"===m&&"if"===e.stack[s]&&"x{"===b?(x[s-1]=-20,x.push(-20),console.log(b,m,g,f,x[s],u)):x.push(-10)):x.push(-20)):(x[s-1]=u-1,void x.push(-10))}do{e.lexer[s]===l?(f=e.types[s],g=e.token[s],"comment"===f?I():"regex"===f?x.push(-20):"string"===f?(1===g.length?(x.push(-20),0===e.lines[s]&&(x[s-1]=-20)):0===g.indexOf("#!/")?x.push(u):"liquid"!==m&&"liquid"!==e.types[s+1]&&x.push(-10),(h(b,44)||"start"===m)&&("object"===e.stack[s]||"array"===e.stack[s])&&!1===O[O.length-1]&&s>0&&(x[s-1]=u)):0===f.indexOf("template_string")?("template_string_start"===f?(u+=1,x.push(u)):"template_string_else"===f?(z(),x[s-1]=u-1,x.push(u)):(z(),u-=1,x[s-1]=u,x.push(-10)),s>2&&("template_string_else"===e.types[s-2]||"template_string_start"===e.types[s-2])&&(!0===i.bracePadding?(x[s-2]=-10,x[s-1]=-10):(x[s-2]=-20,x[s-1]=-20))):"separator"===f?W():"start"===f?R():"end"===f?T():"type"===f||"type_start"===f||"type_end"===f?(h(e.token[s-1],44)||h(e.token[s-1],58)&&"data_type"!==e.stack[s-1]?x[s-1]=-10:x[s-1]=-20,("type"===e.types[s]||"type_end"===e.types[s])&&x.push(-10),"type_start"===e.types[s]&&x.push(-20)):"operator"===f?E():"word"===f?B():"reference"===f?M():"markup"===f?((","!==e.token[s+1]&&g.indexOf("/>")!==g.length-2||","===e.token[s+1]&&"React"!==e.token[e.begin[s]-3])&&L(!1,!1),"return"===b||"?"===b||":"===b?(x[s-1]=-10,x.push(-20)):"start"===m||"return"===e.token[s-2]&&"method"===e.stack[s-1]?x.push(u):x.push(-20)):0===f.indexOf("liquid")?"liquid_else"===f?"string"===m?(e.lines[s-1]<=1&&(x[s-1]=-20),e.lines[s]>0?(u-=1,x.push(u)):x.push(-20)):(x[s-1]=u-1,x.push(u)):"liquid_start"===f?"string"===m?(e.lines[s-1]<=1&&(x[s-1]=-20),e.lines[s]>0?(u+=1,x.push(u)):x.push(-20)):(u+=1,e.lines[s-1]<1&&(x[s-1]=-20),e.lines[s]>0?x.push(u):x.push(-20)):"liquid_end"===f?"string"===m?(e.lines[s-1]<=1&&(x[s-1]=-20),e.lines[s]>1&&(x[s-1]=u-1,x.push(u))):(u-=1,"liquid_start"===m||e.lines[s-1]<1?x[s-1]=-20:x[s-1]=u,e.lines[s]>0?x.push(u):x.push(-20)):"liquid"===f&&(h(b,58)&&-10===x[s-2]&&(x[s-2]=-20),e.lines[s]>0?x.push(u):x.push(-20)):"generic"===f?(k(b,35)&&"return"!==b&&"operator"!==m&&"public"!==b&&"private"!==b&&"static"!==b&&"final"!==b&&"implements"!==b&&"class"!==b&&"void"!==b&&(x[s-1]=-20),h(e.token[s+1],40)||"x("===e.token[s+1]?x.push(-20):x.push(-10)):x.push(-10),"comment"!==f&&(m=f,b=g),C.length>0&&k(e.token[s],41)&&("comment"===e.types[s]&&C[C.length-1]>-1?C[C.length-1]=n.wrap+1:x[s]>-1||h(e.token[s],96)&&e.token[s].indexOf(o)>0?C[C.length-1]=-1:C[C.length-1]>-1&&(C[C.length-1]=C[C.length-1]+e.token[s].length,-10===x[s]&&(C[C.length-1]=C[C.length-1]+1)))):F(),s+=1}while(s<c);return x})();return(()=>{let r=[],p=n.indentChar.repeat(n.indentSize),f=n.preserveLine+1,g=["x;","x}","x{","x(","x)"],m=Be.start,b=n.indentLevel;function y(t){let n=m===c-1?1:e.lines[m+1]-1>f?f:e.lines[m+1]>1?e.lines[m+1]-1:1;return Be.crlf.repeat(n)+p.repeat(t)}if(!0===i.vertical){let t=function(t){let i=0,r=0,o=t-1,a=0,l=0,c=e.begin[m],p=[];do{if((e.begin[o]===c||h(e.token[o],93)||h(e.token[o],41))&&(h(e.token[o+1],61)||h(e.token[o+1],59)&&"object"===e.stack[o])){a=o,r=0;do{if(e.begin[a]===c){if(h(e.token[a],58)||h(e.token[a],59)||"x;"===e.token[a]||u[a]>-1&&"comment"!==e.types[a]){h(e.token[a+1],46)&&(r+=n.indentSize*n.indentChar.length);break}}else if(u[a]>-1)break;"comment"!==e.types[a]&&(-10===u[a-1]&&(r+=1),r=e.token[a].length+r),a-=1}while(a>c);if(l=a,h(e.token[l],44)&&h(e.token[o+1],61))do{if("end"===e.types[l]&&(l=e.begin[l]),e.begin[l]===c){if(h(e.token[l],59)||"x;"===e.token[l])break;if("var"===e.token[l]||"const"===e.token[l]||"let"===e.token[l]){r+=n.indentSize*n.indentChar.length;break}}l-=1}while(l>c);r>i&&(i=r),p.push([o,r]),o=a}else"end"===e.types[o]&&(o=e.begin[o]);o-=1}while(o>c);if(o=p.length,o>0)do{if(o-=1,a=p[o][1],a<i)do{e.token[p[o][0]]=e.token[p[o][0]]+s,a+=1}while(a<i)}while(o>0)};m=c;do{m-=1,"script"===e.lexer[m]&&h(e.token[m],125)&&k(e.token[m-1],123)&&u[e.begin[m]]>0?t(m):m=e.begin[m]}while(m>0)}m=Be.start;do{if(e.lexer[m]===l){if("comment"===e.types[m]&&!0===i.commentIndent&&/\n/.test(e.token[m])){let t=e.begin[m]>-1?h(e.token[m][2],42)?d(u[m],p)+n.indentChar:d(u[m],p):n.indentChar,i=e.token[m].split(/\n/),r=1;do{i[r]=t+i[r].trimStart(),r+=1}while(r<i.length);e.token.splice(m,1,i.join(o))}g.indexOf(e.token[m])<0&&(k(e.token[m],59)||!1===i.noSemicolon?r.push(e.token[m]):u[m]<0&&"comment"!==e.types[m+1]&&r.push(";")),m<c-1&&e.lexer[m+1]!==l&&e.begin[m]===e.begin[m+1]&&e.types[m+1].indexOf("end")<0&&k(e.token[m],44)?r.push(s):u[m]>-1?((u[m]>-1&&h(e.token[m],123)||u[m]>-1&&h(e.token[m+1],125))&&e.lines[m]<3&&!0===i.braceNewline&&e.lines[m+1]<3&&r.push(y(0)),2===Be.mode?Be.ender!==m&&r.push(y(u[m])):m!==c-1&&r.push(y(u[m])),b=u[m]):-10===u[m]&&(r.push(s),e.lexer[m+1]!==l&&(b+=1))}else if(a[m]===m)r.push(e.token[m]);else{Be.ender=a[m],Be.start=m;let e=Be.external(b);r.push(e),m=Be.iterator,-10===u[m]?r.push(s):u[m]>-1&&r.push(y(u[m]))}m+=1}while(m<c);return Be.iterator=c-1,r.join(t)})()}():void 0}var Ne=Object.assign||((e,t)=>(t&&Object.keys(t).forEach((n=>e[n]=t[n])),e)),Pe=(e,t,n)=>{let i=typeof n;if(n&&"object"===i)if(Array.isArray(n))for(let i of n)t=Pe(e,t,i);else for(let i of Object.keys(n)){let r=n[i];"function"==typeof r?t[i]=r(t[i],Fe):void 0===r?e&&!isNaN(i)?t.splice(i,1):delete t[i]:null===r||"object"!=typeof r||Array.isArray(r)?t[i]=r:"object"==typeof t[i]?t[i]=r===t[i]?r:Fe(t[i],r):t[i]=Pe(!1,{},r)}else"function"===i&&(t=n(t,Fe));return t},Fe=(e,...t)=>{let n=Array.isArray(e);return Pe(n,n?e.slice():Ne({},e),t)},ze=Fe,Ee=ze({crlf:!1,correct:!1,preset:"default",language:"auto",endNewline:!1,indentChar:" ",indentLevel:0,indentSize:2,preserveLine:2,wrap:0,wrapFraction:0,liquid:{commentNewline:!1,commentIndent:!0,delimiterTrims:"preserve",delimiterPlacement:"preserve",forceFilter:0,forceArgument:0,ignoreTagList:[],indentAttribute:!1,lineBreakSeparator:"before",normalizeSpacing:!0,preserveComment:!1,preserveInternal:!1,dedentTagList:[],quoteConvert:"none"},markup:{attributeCasing:"preserve",attributeSort:!1,commentNewline:!1,commentIndent:!0,delimiterTerminus:"inline",forceAttribute:3,forceAttributeValue:!0,forceIndent:!1,ignoreCSS:!1,ignoreJS:!0,ignoreJSON:!1,lineBreakValue:"preserve",preserveComment:!1,preserveText:!1,preserveAttribute:!1,selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!1,quoteConvert:"none"},json:{arrayFormat:"default",braceAllman:!1,bracePadding:!1,objectIndent:"default",objectSort:!1,braceStyle:"none",caseSpace:!1,commentIndent:!1,commentNewline:!1,correct:!1,elseNewline:!1,functionNameSpace:!1,functionSpace:!1,methodChain:4,neverFlatten:!1,noCaseIndent:!1,preserveComment:!1,styleGuide:"none",ternaryLine:!1,variableList:"none",quoteConvert:"double",endComma:"never",noSemicolon:!0,vertical:!1},style:{commentIndent:!1,commentNewline:!1,atRuleSpace:!0,classPadding:!1,noLeadZero:!1,preserveComment:!1,sortSelectors:!1,sortProperties:!1,quoteConvert:"none"},script:{arrayFormat:"default",braceNewline:!1,bracePadding:!1,braceStyle:"none",braceAllman:!1,caseSpace:!1,commentIndent:!1,commentNewline:!1,elseNewline:!1,endComma:"never",functionNameSpace:!1,functionSpace:!1,inlineReturn:!0,methodChain:4,neverFlatten:!1,noCaseIndent:!1,noSemicolon:!1,objectSort:!1,objectIndent:"default",preserveComment:!1,quoteConvert:"none",styleGuide:"none",ternaryLine:!1,variableList:"none",vertical:!1}}),Me=class extends Array{get entry(){return this[this.length-1]}get token(){return this[this.length-1][0]}get index(){return this[this.length-1][1]}update(e,t){let n=this.length-1;return n>0?(void 0===t?"string"==typeof e?this[n][0]=e:this[n][1]=e:(this[n][0]=e,this[n][1]=t),this[n]):(this.push([e,t]),this[n+1])}pop(){let e=this.length-1,t=this[e];return e>0&&this.splice(e,1),t}},We=class{constructor(){this.hooks={parse:null,format:null},this.start=0,this.ender=0,this.iterator=0,this.attributes=new Map,this.regions=new Map,this.pairs=new Map,this.error=null,this.crlf="\n",this.references=[[]],this.count=-1,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineOffset=0,this.lineIndex=0,this.rules=Ee,this.data={begin:[],ender:[],lexer:[],lines:[],stack:[],token:[],types:[]}}get source(){return 2===this.mode?We.region:"node"===E.env&&Buffer.isBuffer(We.input)?We.input.toString():We.input}set source(e){We.input="node"!==E.env||Buffer.isBuffer(e)?e:Buffer.from(e)}get current(){return{begin:this.data.begin[this.count],ender:this.data.ender[this.count],lexer:this.data.lexer[this.count],lines:this.data.lines[this.count],stack:this.data.stack[this.count],token:this.data.token[this.count],types:this.data.types[this.count]}}reset(){this.error=null,this.count=-1,this.start=0,this.ender=0,this.lineColumn=0,this.lineNumber=1,this.lineDepth=2,this.lineIndex=0,this.lineOffset=0,this.data.begin=[],this.data.ender=[],this.data.lexer=[],this.data.lines=[],this.data.stack=[],this.data.token=[],this.data.types=[],this.references=[[]],this.stack=new Me(["global",-1]),this.mode=1,this.pairs.size>0&&this.pairs.clear(),this.attributes.size>0&&this.attributes.clear(),this.regions.size>0&&this.regions.clear()}get(e){return{begin:this.data.begin[e],ender:this.data.ender[e],lexer:this.data.lexer[e],lines:this.data.lines[e],stack:this.data.stack[e],token:this.data.token[e],types:this.data.types[e]}}document(e,t=3){return this.reset(),Le(e),1===t?this.data:(this.mode=3,Te(e))}external(e,t){if(1!==this.mode){if(0===this.regions.size)return this.source;let{id:t,lexer:n}=this.regions.get(this.start);this.mode=2,this.language=t,this.rules.indentLevel=e;let i=Te(n);return this.mode=3,this.rules.indentLevel=0,this.language=this.rules.language,this.lexer=l(this.language),i}{this.mode=2;let n=c(e);We.region=t,this.language=e,this.lexer=l(this.language),this.regions.set(this.count+1,{lexer:n,id:this.language}),Le(n),this.mode=1,this.lexer=l(this.rules.language),this.language=this.rules.language}}final(e){let t=this.count,n=e.begin[t];if(!("style"===e.lexer[t]&&this.rules.style.sortProperties||"script"===e.lexer[t]&&(this.rules.script.objectSort||this.rules.json.objectSort))){do{e.begin[t]===n||e.begin[e.begin[t]]===n&&e.types[t].indexOf("attribute")>-1&&e.types[t].indexOf("attribute_end")<0?e.ender[t]=this.count:t=e.begin[t],t-=1}while(t>n);t>-1&&(e.ender[t]=this.count)}}syntactic(e,t){if("liquid_start"===e.types||"start"===e.types)this.pairs.set(this.count,{index:this.count,line:this.lineNumber,token:e.token,type:"start"===e.types?2:3,stack:t});else if(this.pairs.has(this.stack.index)&&("end"===e.types||"liquid_end"===e.types)){let t=this.pairs.get(this.stack.index);3===t.type?e.token.indexOf(`end${t.stack}`)>-1?this.pairs.delete(this.stack.index):W(112,t):2===t.type&&`</${t.stack}>`===e.token&&this.pairs.delete(this.stack.index)}}replace(e,t=this.count){for(let n in e)this.data[n][t]=e[n]}push(e,n,i=t){if(e.begin.push(n.begin),e.ender.push(n.ender),e.lexer.push(n.lexer),e.stack.push(n.stack),e.token.push(n.token),e.types.push(n.types),e.lines.push(n.lines),e===this.data){if(this.count=this.count+1,"style"!==n.lexer&&i.replace(/[{}<>%]/g,t)===t&&(i="else"===n.types?"else":F(n.token)),this.lineOffset=0,"start"===n.types||n.types.indexOf("_start")>0)this.stack.push([i,this.count]),this.lineDepth=this.lineDepth+this.rules.indentSize;else if("end"===n.types||n.types.indexOf("_end")>0){let t=0,n=this.stack.length;n>2&&("else"===e.types[this.stack[n-1][1]]||e.types[this.stack[n-1][1]].indexOf("_else")>0)&&("start"===e.types[this.stack[n-2][1]]||e.types[this.stack[n-2][1]].indexOf("_start")>0)&&("else"===e.types[this.stack[n-2][1]+1]||e.types[this.stack[n-2][1]+1].indexOf("_else")>0)&&(this.stack.pop(),e.begin[this.count]=this.stack.index,e.stack[this.count]=this.stack.token,e.ender[this.count-1]=this.count,t=e.ender[e.begin[this.count]+1]),this.final(e),t>0&&(e.ender[e.begin[this.count]+1]=t),this.stack.pop(),this.lineDepth=this.lineDepth-this.rules.indentSize}else("else"===n.types||n.types.indexOf("_else")>0)&&(i===t&&(i="else"),this.count>0&&("start"===e.types[this.count-1]||e.types[this.count-1].indexOf("_start")>0)?this.stack.push([i,this.count]):(this.final(e),this.stack.update(i===t?"else":i,this.count)));null!==this.hooks.parse&&this.hooks.parse[0].call({line:this.lineNumber,stack:this.stack.entry,language:this.language},n,this.count)}}pop(e){return e===this.data&&(this.count=this.count-1),{begin:e.begin.pop(),ender:e.ender.pop(),lexer:e.lexer.pop(),lines:e.lines.pop(),stack:e.stack.pop(),token:e.token.pop(),types:e.types.pop()}}concat(e,t){e.begin=e.begin.concat(t.begin),e.ender=e.ender.concat(t.ender),e.lexer=e.lexer.concat(t.lexer),e.stack=e.stack.concat(t.stack),e.token=e.token.concat(t.token),e.types=e.types.concat(t.types),e.lines=e.lines.concat(t.lines),e===this.data&&(this.count=e.token.length-1)}splice(e){let n=this.data.begin[this.count],i=this.data.token[this.count];void 0!==e.record&&e.record.token!==t?(e.data.begin.splice(e.index,e.howmany,e.record.begin),e.data.ender.splice(e.index,e.howmany,e.record.ender),e.data.token.splice(e.index,e.howmany,e.record.token),e.data.lexer.splice(e.index,e.howmany,e.record.lexer),e.data.stack.splice(e.index,e.howmany,e.record.stack),e.data.types.splice(e.index,e.howmany,e.record.types),e.data.lines.splice(e.index,e.howmany,e.record.lines),e.data===this.data&&(this.count=this.count-e.howmany+1,(n!==this.data.begin[this.count]||i!==this.data.token[this.count])&&(this.lineOffset=0))):(e.data.begin.splice(e.index,e.howmany),e.data.ender.splice(e.index,e.howmany),e.data.token.splice(e.index,e.howmany),e.data.lexer.splice(e.index,e.howmany),e.data.stack.splice(e.index,e.howmany),e.data.types.splice(e.index,e.howmany),e.data.lines.splice(e.index,e.howmany),e.data===this.data&&(this.count=this.count-e.howmany,this.lineOffset=0))}is(e,t){return this.count>0&&this.data[e][this.count]===t}lines(e,t){return this.lineNumber=this.lineNumber+1,this.lineIndex=e,t+1}spacer(e){this.lineOffset=1;do{if(e.array[e.index]===o&&(this.lineOffset=this.lineOffset+1,this.lineNumber=this.lineNumber+1),!1===b(e.array[e.index+1]))break;e.index=e.index+1}while(e.index<e.end);return e.index}},Re=We;Re.input=t,Re.region=t;var Be=new Re;function De(e){let n=[],i=0,r=/(((var)|(let)|(const)|(function)|(import))\s+(\w|\$)+[a-zA-Z0-9]*)/.test(e)&&!1===/@import/.test(e),s=/((((final)|(public)|(private))\s+static)|(static\s+void))/.test(e);function o(){let o=1,a=t,l=!1,c=!1,u=/((public)|(private))\s+(static\s+)?(((v|V)oid)|(class)|(final))/.test(e);if(o<i)do{!1===l?h(n[o],42)&&h(n[o-1],47)?(n[o-1]=t,l=!0):!1===c&&o<i-6&&102===n[o].charCodeAt(0)&&105===n[o+1].charCodeAt(0)&&108===n[o+2].charCodeAt(0)&&116===n[o+3].charCodeAt(0)&&101===n[o+4].charCodeAt(0)&&114===n[o+5].charCodeAt(0)&&h(n[o+6],58)&&(c=!0):!0===l&&h(n[o],42)&&o!==i-1&&h(n[o+1],47)?(l=!1,n[o]=t,n[o+1]=t):!0===c&&h(n[o],59)&&(c=!1,n[o]=t),(!0===l||!0===c)&&(n[o]=t),o+=1}while(o<i);return a=n.join(t),!1===/\s\/\//.test(e)&&!1===/\/\/\s/.test(e)&&!0===/^(\s*(\{|\[)(?!%))/.test(e)&&/((\]|\})\s*)$/.test(e)&&-1!==e.indexOf(",")?{language:"json",lexer:"script"}:!0!==/((\}?(\(\))?\)*;?\s*)|([a-z0-9]("|')?\)*);?(\s*\})*)$/i.test(e)||!0!==r&&!0!==u&&!0!==/console\.log\(/.test(e)&&!0!==/export\s+default\s+class\s+/.test(e)&&!0!==/export\s+(const|var|let|class)s+/.test(e)&&!0!==/document\.get/.test(e)&&!0!==/((=|(\$\())\s*function)|(\s*function\s+(\w*\s+)?\()/.test(e)&&-1!==e.indexOf("{")&&!0!==/^(\s*if\s+\()/.test(e)?e.indexOf("{")>-1&&(/^(\s*[\u007b\u0024\u002e#@a-z0-9])/i.test(e)||/^(\s*\/(\*|\/))/.test(e)||/^(\s*\*\s*\{)/.test(e))&&!1===/^(\s*if\s*\()/.test(e)&&!1===/=\s*(\{|\[|\()/.test(a)&&(!1===/(\+|-|=|\?)=/.test(a)||/\/\/\s*=+/.test(a)||/=+('|")?\)/.test(e)&&/;\s*base64/.test(e))&&!1===/function(\s+\w+)*\s*\(/.test(a)?/:\s*(?:number|string|boolean|any|unknown)(?:\[\])?/.test(e)||/(?:public|private)\s+/.test(e)||/(?:export|declare)\s+type\s+\w+\s*=/.test(e)||/(?:namespace|interface|enum|implements|declare)\s+\w+/.test(e)||/(?:typeof|keyof|as)\s+\w+/.test(e)||/\w+\s+as\s+\w+/.test(e)||/\[\w+(?:(?::\s*\w+)|(?:\s+in\s+\w+))\]:/.test(e)||/\):\s*\w+(?:\[\])?\s*(?:=>|\{)\s+/.test(e)||/(var|const|let)\s+\w+:\s*(string|number|boolean|string|any)(\[\])?/.test(e)?{language:"typescript",lexer:"script"}:!1===/\s(class|var|const|let)\s+\w/.test(e)&&/<[a-zA-Z](?:-[a-zA-Z])?/.test(e)&&/<\/[a-zA-Z-](?:-[a-zA-Z])?/.test(e)&&(/\s?\{%/.test(e)||/{{/.test(e))?{language:"liquid",lexer:"markup"}:!1===/^(\s*[$@])/.test(e)&&/([}\]];?\s*)$/.test(e)&&(/^\s*import\s+\*\s+as\s+\w+\s+from\s+['"]/.test(e)||/module\.export\s+=\s+/.test(e)||/export\s+default\s+\{/.test(e)||/[?:]\s*[{[]/.test(e)||/^(?:\s*return;?(?:\s+[{[])?)/.test(e))?{language:"javascript",lexer:"script"}:/{%/.test(e)&&/{{/.test(e)&&/<\w/.test(e)?{language:"liquid",lexer:"markup"}:/{\s*(?:\w|\.|@|#)+\s*\{/.test(e)?{language:"less",lexer:"style"}:/\$(\w|-)/.test(e)?{language:"scss",lexer:"style"}:!0===/[;{:]\s*@\w/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}:e.indexOf("{%")>-1?{language:"liquid",lexer:"markup"}:{language:"unknown",lexer:"text"}:e.indexOf("(")>-1||e.indexOf("=")>-1||e.indexOf(";")>-1&&e.indexOf("{")>-1?!0===s||/\w<\w+(,\s+\w+)*>/.test(e)||/(?:var|let|const)\s+\w+\s*:/.test(e)||/=\s*<\w+/.test(e)?{language:"typescript",lexer:"script"}:{language:"javascript",lexer:"script"}:{language:"unknown",lexer:"text"}}function a(){return/^(\s*<!doctype\s+html>)/i.test(e)||/^(\s*<html)/i.test(e)||/<form\s/i.test(e)&&/<label\s/i.test(e)&&/<input\s/i.test(e)||/<img(\s+\w+=['"]?\S+['"]?)*\s+src\s*=/.test(e)||/<a(\s+\w+=['"]?\S+['"]?)*\s+href\s*=/.test(e)||/<ul\s/i.test(e)&&/<li\s/i.test(e)&&/<\/li>/i.test(e)&&/<\/ul>/i.test(e)||/<head\s*>/.test(e)&&/<\/head>/.test(e)||/^(\s*<!DOCTYPE\s+((html)|(HTML))\s+PUBLIC\s+)/.test(e)&&!1===/XHTML\s+1\.1/.test(e)&&!1===/XHTML\s+1\.0\s+(S|s)((trict)|(TRICT))/.test(e)?/{%-?\s*(schema|for|if|unless|render|include)/.test(e)||/{%-?\s*end\w+/.test(e)||/{{-?\s*content_for/.test(e)||/{{-?\s*[a-zA-Z0-9_'".[\]]+\s*-?}}/.test(e)||/{%/.test(e)&&/%}/.test(e)&&/{{/.test(e)&&/}}/.test(e)?{language:"liquid",lexer:"markup"}:{language:"html",lexer:"markup"}:/\s?{[{%]-?/.test(e)?{language:"liquid",lexer:"markup"}:{language:"xml",lexer:"markup"}}return null===e||e.replace(/\s+/g,t)===t?{language:"unknown",lexer:"text"}:(/\n\s*#{1,6}\s+/.test(e)||/\n\s*(?:\*|-|(?:\d+\.))\s/.test(e))&&(/\[( |x|X)\]/.test(e)||/\s[*_~]{1,2}\w+[*_~]{1,2}/.test(e)||/\n\s*```[a-zA-Z]*?\s+/.test(e)||/-+\|(-+\|)+/.test(e))?{language:"markdown",lexer:"text"}:/^(\s*<!DOCTYPE\s+html>)/i.test(e)?a():/^\s*@(?:charset|import|include|keyframes|media|namespace|page)\b/.test(e)||!1===s&&!1===/=(>|=|-|\+|\*)/.test(e)&&!1===/^(?:\s*((if)|(for)|(function))\s*\()/.test(e)&&!1===/(?:\s|;|\})((if)|(for)|(function\s*\w*))\s*\(/.test(e)&&!1===r&&!1===/return\s*\w*\s*(;|\})/.test(e)&&(void 0===e||/^(?:\s*#(?!(!\/)))/.test(e)||/\n\s*(\.|@)\w+(\(|(\s*:))/.test(e)&&!1===/>\s*<\w/.test(e)||/^\s*:root\s*\{/.test(e)||/-{2}\w+\s*\{/.test(e)||/^\s*(?:body|button|hr|section|h[1-6]|p|strong|\*)\s+\{\s+/.test(e))?/\n\s*#+\s+/.test(e)||/^#+\s+/.test(e)?{language:"markdown",lexer:"markup"}:/\$[a-zA-Z]/.test(e)||/\{\s*(\w|\.|\$|#)+\s*\{/.test(e)||/^[.#]?[\w][\w-]+\s+\{(?:\s+[a-z][a-z-]+:\s*\S+;)+\s+[&>+]?\s+[.#:]?[\w][\w-]\s+\{/.test(e)&&!1===/:\s*@[a-zA-Z];/.test(e)?{language:"scss",lexer:"style"}:/@[a-zA-Z]:/.test(e)||/\.[a-zA-Z]\(\);/.test(e)?{language:"less",lexer:"style"}:{language:"css",lexer:"style"}:(n=e.replace(/\[[a-zA-Z][\w-]*=['"]?[a-zA-Z][\w-]*['"]?\]/g,t).split(t),i=n.length,/^(\s*({{|{%|<))/.test(e)?a():!0===s||!1===/^(?:[\s\w-]*<)/.test(e)&&!1===/(?:>[\s\w-]*)$/.test(e)?o():(/^(?:\s*<\?xml)/.test(e)||/(?:>[\w\s:]*)?<(?:\/|!|#)?[\w\s:\-[]+/.test(e)||/^\s*</.test(e)&&/<\/\w+(\w|\d)+>\s*$/.test(e))&&(/^(?:[\s\w]*<)/.test(e)||/(?:>[\s\w]*)$/.test(e))||/^(?:\s*<s((cript)|(tyle)))/i.test(e)&&/(?:<\/s((cript)|(tyle))>\s*)$/i.test(e)?!1===/^(?:[\s\w]*<)/.test(e)||!1===/(?:>[\s\w]*)$/.test(e)?o():a():{language:"unknown",lexer:"text"})}function Je(e,t,n){if("global"===e)switch(t){case"indentChar":return function(e,t,n){if("string"==typeof n)return!0;throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:"global"===e?t:`${e} → ${t}`,provided:n,expected:["string"]})}(e,t,n);case"preset":case"language":return Ue(e,t,n);case"crlf":case"correct":case"endNewline":return Ze(e,t,n);case"indentLevel":case"indentSize":case"preserveLine":case"wrap":case"wrapFraction":return He(e,t,n);default:return!1}else if("liquid"===e)switch(t){case"commentNewline":case"commentIndent":case"indentAttribute":case"normalizeSpacing":case"preserveComment":case"preserveInternal":return Ze(e,t,n);case"forceArgument":case"forceFilter":return He(e,t,n);case"ignoreTagList":case"dedentTagList":return Ve(e,t,n);case"lineBreakSeparator":case"delimiterPlacement":case"delimiterTrims":case"quoteConvert":return Ue(e,t,n)}else if("markup"===e)switch(t){case"forceAttribute":if(S(n))return He(e,t,n);if($(n))return Ze(e,t,n);throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:`${e} → ${t}`,provided:n,expected:["boolean","number"]});case"attributeSort":if($(n))return Ze(e,t,n);if(q(n))return Ve(e,t,n);throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:`${e} → ${t}`,provided:n,expected:["boolean","number"]});case"commentNewline":case"commentIndent":case"forceIndent":case"forceAttributeValue":case"ignoreCSS":case"ignoreJS":case"ignoreJSON":case"preserveComment":case"preserveText":case"preserveAttribute":case"selfCloseSpace":case"selfCloseSVG":case"stripAttributeLines":return Ze(e,t,n);case"attributeCasing":case"delimiterTerminus":case"lineBreakValue":case"quoteConvert":return Ue(e,t,n)}else if("style"===e)switch(t){case"correct":case"atRuleSpace":case"classPadding":case"noLeadZero":case"sortSelectors":case"sortProperties":return $(n);case"quoteConvert":return Ue(e,t,n)}else if("json"===e)switch(t){case"arrayFormat":case"objectIndent":return Ue(e,t,n);case"allowComments":case"braceAllman":case"bracePadding":case"objectSort":return Ze(e,t,n)}}function Ve(e,t,n){if(q(n)){if(0===n.length)return!0;for(let i=0;i<n.length;i++)if(!1===O(n[i]))throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:`${e} → ${t} (index: ${i})`,provided:n,expected:["string"]});return!0}throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:"global"===e?t:`${e} → ${t}`,provided:n,expected:["string[]"]})}function He(e,t,n){if(S(n)&&!1===isNaN(n))return!0;throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:"global"===e?t:`${e} → ${t}`,provided:n,expected:["number"]})}function Ze(e,t,n){if(S(n))return 0!==n;if($(n))return!0;throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:"global"===e?t:`${e} → ${t}`,provided:n,expected:["boolean"]})}function Ue(e,t,n){if(!1===O(n))throw R({message:`Invalid ${e} rule (${t}) type "${typeof n}" provided`,option:`${e} → ${t}`,provided:n,expected:["string"]});if("language"===t){switch(n){case"text":case"markup":case"html":case"liquid":case"xml":case"javascript":case"typescript":case"jsx":case"tsx":case"json":case"less":case"scss":case"sass":case"css":return!0}throw R({message:`Unsupported "${t}" identifier provided`,option:e===`${t} (global)`?t:`${e} → ${t}`,provided:n,expected:["text","auto","markup","html","liquid","xml","javascript","typescript","jsx","tsx","json","less","scss","sass","css"]})}if("preset"===t){switch(n){case"default":case"strict":case"recommended":case"warrington":case"prettier":return!0}throw R({message:`Unsupported "${t}" provided`,option:e===`${t} (global)`?t:`${e} → ${t}`,provided:n,expected:["default","strict","recommended","warrington","prettier"]})}if("attributeCasing"===t)switch(n){case"preserve":case"lowercase":case"lowercase-name":case"lowercase-value":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["preserve","lowercase","lowercase-name","lowercase-value"]})}else if("delimiterTrims"===t)switch(n){case"preserve":case"never":case"always":case"tags":case"outputs":case"multiline":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["preserve","never","always","tags","outputs","multiline","linebreak"]})}else if("delimiterPlacement"===t)switch(n){case"default":case"inline":case"preserve":case"consistent":case"force":case"force-multiline":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["default","inline","preserve","consistent","force","force-multiline"]})}else if("lineBreakSeparator"===t)switch(n){case"preserve":case"before":case"after":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["preserve","before","after"]})}else if("delimiterTerminus"===t)switch(n){case"force":case"inline":case"adapt":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["force","inline","adapt"]})}else if("lineBreakValue"===t)switch(n){case"preserve":case"align":case"indent":case"force-preserve":case"force-align":case"force-indent":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["preserve","align","indent","force-preserve","force-align","force-indent"]})}else if("quoteConvert"===t)switch(n){case"none":case"double":case"single":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["none","double","single"]})}else if("objectIndent"===t||"arrayFormat"===t)switch(n){case"default":case"indent":case"inline":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["default","indent","inline"]})}else if("endComma"===t)switch(n){case"none":case"always":case"never":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["none","always","never"]})}else if("variableList"===t)switch(n){case"none":case"each":case"list":return!0;default:throw R({message:`Invalid "${t}" option provided`,option:`${e} → ${t}`,provided:n,expected:["none","each","list"]})}}var Ge=ze({preset:"recommended",language:"auto",preserveLine:2,wrap:120,wrapFraction:90,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,commentNewline:!0,delimiterTrims:"tags",lineBreakSeparator:"after",quoteConvert:"double",delimiterPlacement:"consistent"},markup:{attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:2,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0}}),Xe=ze({preset:"strict",language:"auto",preserveLine:1,wrap:0,wrapFraction:80,liquid:{ignoreTagList:[],commentNewline:!0,delimiterTrims:"never",lineBreakSeparator:"before",quoteConvert:"double",forceArgument:3,forceFilter:4,delimiterPlacement:"consistent"},markup:{attributeSort:["id","class","type","name","value","href","src"],attributeCasing:"lowercase-name",commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!1,ignoreJSON:!1,ignoreJS:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent",objectSort:!0},style:{commentNewline:!0,commentIndent:!0,quoteConvert:"double",noLeadZero:!0,sortProperties:!0,sortSelectors:!0}}),Qe=ze({preset:"warrington",language:"auto",preserveLine:2,wrap:0,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"adapt",forceAttribute:1,forceIndent:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}}),Ye=ze({preset:"prettier",language:"auto",preserveLine:1,wrap:80,wrapFraction:60,liquid:{ignoreTagList:["javascript"],indentAttribute:!0,lineBreakSeparator:"after",dedentTagList:["schema"],quoteConvert:"double"},markup:{commentNewline:!0,delimiterTerminus:"force",forceAttribute:1,forceIndent:!0,ignoreJS:!0,ignoreCSS:!0,ignoreJSON:!1,lineBreakValue:"force-indent",selfCloseSpace:!0,selfCloseSVG:!0,stripAttributeLines:!0,quoteConvert:"double"},json:{arrayFormat:"indent",objectIndent:"indent"},style:{commentIndent:!1,quoteConvert:"double"}}),Ke=["correct","crlf","endNewline","indentChar","indentLevel","indentSize","preserveLine","wrap","wrapFraction"],et=["liquid","markup","style","json","script"],tt={};((t,n)=>{for(var i in n)e(t,i,{get:n[i],enumerable:!0})})(tt,{defaults:()=>Ee});var nt=new class{constructor(){this.language="auto",this.lexer="auto",this.stats=null,this.events={format:[],error:[],rules:[],parse:[]},"node"===E.env&&(E.cwd=process.cwd()),"browser"===E.env&&("esthetic"in window||ke(window,"esthetic",{configurable:!0,get:()=>nt}))}get presets(){return tt}get table(){return Be.data}get definitions(){return me}get detect(){return De}get error(){return Be.error}grammar(e){return e?(P.extend(e),this):P.extend()}config(e){if(!e)return E;for(let t in e)t in E&&(E[t]=e[t]);return"browser"===E.env&&!1===E.globalThis&&"esthetic"in window&&delete window.esthetic,this}on(e,t){return this.events[e].push(t),this}hook(e,t){Be.hooks[e]=[t]}format(e,t){if(Be.source=e,j(t)&&"language"in t&&this.language!==t.language&&Ue("global","language",t.language)&&(this.language=Be.language=Be.rules.language=t.language,this.lexer=Be.lexer=l(Be.language)),this.rules(t),"auto"===this.lexer){let e=this.detect(Be.source);this.language=Be.language=Be.rules.language=e.language,this.lexer=Be.lexer=l(e.language)}let n=c(this.language),i=E.reportStats?u(this.language,this.lexer):null,r=Be.document(n);if(null!==Be.error){if(this.events.error.length>0){for(let e of this.events.error)e(Be.error);return e}if(E.throwErrors)throw Be.error;return e}let s=null===i?null:this.stats=i(r.length);if(this.events.format.length>0)for(let t of this.events.format)if(!1===t.call({get data(){return Be.data}},{get output(){return e},get stats(){return s},get rules(){return Be.rules}}))return e;return r}parse(e,t){if(Be.source=e,j(t)&&"language"in t&&this.language!==t.language&&Ue("global","language",t.language)&&(this.language=Be.language=Be.rules.language=t.language,this.lexer=Be.lexer=l(Be.language)),this.rules(t),"auto"===this.lexer){let e=this.detect(Be.source);this.language=Be.language=Be.rules.language=e.language,this.lexer=Be.lexer=l(e.language)}let n=c(this.language),i=E.reportStats?u(this.language,this.lexer):null,r=Be.document(n,1);if(null!==Be.error){if(this.events.error.length>0){for(let e of this.events.error)e(Be.error);return[]}if(E.throwErrors)throw Be.error;return[]}let s=null===i?null:this.stats=i(Be.count);if(this.events.parse.length>0)for(let t of this.events.parse)if(!1===t({get data(){return Be.data},get stats(){return s},get rules(){return Be.rules}}))return e;return r}rules(e){return _(e)||(Be.rules=function(e,t){let n,i=e,r=v(i);t.rules.length>0&&(n={}),"preset"in i&&function(e){if(e.preset!==Be.rules.preset&&Ue("global","preset",e.preset)){if(Be.rules=ge({},Ee),Be.rules.preset=e.preset,"default"===e.preset)return;let t;switch(e.preset){case"strict":t=v(Xe);for(let e of Ke)t(e)&&(Be.rules[e]=Xe[e]);for(let e of et)t(e)&&ge(Be.rules[e],Xe[e]);break;case"recommended":t=v(Ge);for(let e of Ke)t(e)&&(Be.rules[e]=Ge[e]);for(let e of et)t(e)&&ge(Be.rules[e],Ge[e]);break;case"warrington":t=v(Qe);for(let e of Ke)t(e)&&(Be.rules[e]=Qe[e]);for(let e of et)t(e)&&ge(Be.rules[e],Qe[e]);break;case"prettier":t=v(Ye);for(let e of Ke)t(e)&&(Be.rules[e]=Ye[e]);for(let e of et)t(e)&&ge(Be.rules[e],Ye[e])}}}(i),r("language")&&Je("global","language",i.language)&&Be.language!==i.language&&(Be.language=Be.rules.language=i.language);for(let e of Ke)!1!==r(e)&&Be.rules[e]!==i[e]&&Je("global",e,i[e])&&(n&&(n[e]={from:Be.rules[e],to:i[e]}),"crlf"===e&&(Be.crlf=i[e]?"\r\n":o),"wrap"===e&&i[e]>0&&(!1===r("wrapFraction")||r("wrapFraction")&&i.wrapFraction<=0)&&(i.wrapFraction=i[e]-i[e]/4),Be.rules[e]=i[e]);for(let e of et)if(!1!==r(e)&&Be.rules[e]!==i[e]){n&&(n[e]={});for(let t in i[e])Je(e,t,i[e][t])&&(n&&(n[e][t]={old:Be.rules[e][t],now:i[e][t]}),Be.rules[e][t]=i[e][t])}if(t.rules.length>0)for(let e of t.rules)e(n,Be.rules);return Be.rules}(e,this.events),this.language=Be.language,this.lexer=Be.lexer=l(Be.language)),Be.rules}liquid(e,t){return this.language=Be.language=Be.rules.language="liquid",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}html(e,t){return this.language=Be.language=Be.rules.language="html",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}xml(e,t){return this.language=Be.language=Be.rules.language="xml",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}css(e,t){return this.language=Be.language=Be.rules.language="css",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}json(e,t){return this.language=Be.language=Be.rules.language="json",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}js(e,t){return this.language=Be.language=Be.rules.language="javascript",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}ts(e,t){return this.language=Be.language=Be.rules.language="typescript",this.lexer=Be.lexer=l(Be.language),this.format(e,t)}};export{nt as default};