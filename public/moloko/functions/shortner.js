var f=(o,e,n)=>new Promise((s,i)=>{var r=t=>{try{a(n.next(t))}catch(d){i(d)}},c=t=>{try{a(n.throw(t))}catch(d){i(d)}},a=t=>t.done?s(t.value):Promise.resolve(t.value).then(r,c);a((n=n.apply(o,e)).next())});import{Octokit as l}from"@octokit/core";import{randomUUID as b}from"crypto";var h=o=>f(void 0,null,function*(){let e=new l({auth:process.env.GH_TOKEN}),{data:{files:n}}=yield e.request("GET /gists/{gist_id}",{gist_id:"f959466bbadede97d8b40b2f9544b320",headers:{"X-GitHub-Api-Version":"2022-11-28"}});if(!(n&&"links.json"in n&&n["links.json"]&&"content"in n["links.json"]&&n["links.json"].content))return;let s=JSON.parse(n["links.json"].content);if(!s)return;let i=`r-${b()}`,r=o.body;return s[i]=r,yield e.request("PATCH /gists/{gist_id}",{gist_id:"f959466bbadede97d8b40b2f9544b320",files:{"files.json":{content:JSON.stringify(s)}},headers:{"X-GitHub-Api-Version":"2022-11-28"}}),{statusCode:200,body:JSON.stringify({pathname:i})}});export{h as handler};
