var f=(o,e,t)=>new Promise((s,i)=>{var r=n=>{try{a(t.next(n))}catch(d){i(d)}},c=n=>{try{a(t.throw(n))}catch(d){i(d)}},a=n=>n.done?s(n.value):Promise.resolve(n.value).then(r,c);a((t=t.apply(o,e)).next())});import{Octokit as l}from"@octokit/core";import{randomUUID as p}from"crypto";var u=o=>f(void 0,null,function*(){let e=new l({auth:process.env.GH_TOKEN}),{data:{files:t}}=yield e.request("GET /gists/{gist_id}",{gist_id:"f959466bbadede97d8b40b2f9544b320",headers:{"X-GitHub-Api-Version":"2022-11-28"}});if(!(t&&"links.json"in t&&t["links.json"]&&"content"in t["links.json"]&&t["links.json"].content))return;let s=JSON.parse(t["links.json"].content);if(!s)return;let i=`r-${p()}`,r=o.path;return s[i]=r,yield e.request("PATCH /gists/{gist_id}",{gist_id:"f959466bbadede97d8b40b2f9544b320",files:{"files.json":{content:JSON.stringify(s)}},headers:{"X-GitHub-Api-Version":"2022-11-28"}}),{statusCode:200,body:JSON.stringify({pathname:i})}}),m={path:"/shortener",method:["POST","GET"]};export{m as config,u as handler};
